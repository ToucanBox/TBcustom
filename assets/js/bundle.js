!function o(s,a,u){function h(e,t){if(!a[e]){if(!s[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(l)return l(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=a[e]={exports:{}};s[e][0].call(i.exports,function(t){return h(s[e][1][t]||t)},i,i.exports,o,s,a,u)}return a[e].exports}for(var l="function"==typeof require&&require,t=0;t<u.length;t++)h(u[t]);return h}({1:[function(t,e,r){var n=function(){this.armCanvas=new PIXI.Container,this.armCanvas.scale.x=-1,this.flipToggle=!1,this.armCanvas.pivot.x=100,this.armCanvas.pivot.y=40,this.armCanvas.position.x=98,this.armCanvas.position.y=42,this.toucanooLayer=new PIXI.Container,this.armCanvas.addChild(this.toucanooLayer),this.clothesLayer=new PIXI.Container,this.armCanvas.addChild(this.clothesLayer),this.armBase=new PIXI.Sprite.fromFrame("a1.png"),this.toucanooLayer.addChild(this.armBase),this.armFlip=new PIXI.Sprite.fromFrame("a2.png"),this.armTshirt=new PIXI.Sprite.fromFrame("a3.png"),this.armTshirt.position.set(-3,3),this.armJumper=new PIXI.Sprite.fromFrame("a4.png"),this.armJumper.position.set(4,0),this.armPjs=new PIXI.Sprite.fromFrame("a5.png"),this.armPjs.position.set(0,-1),this.mask=new PIXI.Graphics,this.mask.lineStyle(1,16767232,1),this.mask.beginFill(9160191,.4),this.mask.moveTo(200,80),this.mask.lineTo(70,80),this.mask.lineTo(70,0),this.mask.lineTo(200,0),this.mask.lineTo(200,80)};n.prototype.removeAllClothes=function(){for(var t=this.clothesLayer.children.length-1;0<=t;t--)this.clothesLayer.removeChild(this.clothesLayer.children[t]);this.armBase.mask=null,this.armFlip.mask=null},n.prototype.removeClothesChange=function(){for(var t=this.clothesLayer.children.length-1;0<=t;t--)this.clothesLayer.removeChild(this.clothesLayer.children[t])},n.prototype.changeArmClothes=function(t){"40"===t?(this.removeClothesChange(),this.clothesLayer.addChild(this.armPjs),this.armBase.mask=this.mask,this.armFlip.mask=this.mask):"7"===t?(this.removeClothesChange(),this.clothesLayer.addChild(this.armJumper),this.armBase.mask=this.mask,this.armFlip.mask=this.mask):"32"===t?(this.removeClothesChange(),this.clothesLayer.addChild(this.armTshirt),this.armBase.mask=this.mask,this.armFlip.mask=this.mask):(this.removeClothesChange(),this.armBase.mask=null,this.armFlip.mask=null)},n.prototype.toggleArmHand=function(){this.flipToggle?(this.toucanooLayer.removeChild(this.armFlip),this.toucanooLayer.addChild(this.armBase),this.flipToggle=!1):(this.toucanooLayer.removeChild(this.armBase),this.toucanooLayer.addChild(this.armFlip),this.flipToggle=!0)},e.exports=n},{}],2:[function(t,e,r){t("animejs");var n=function(t,e,r,n,i){this.cWidth=n,this.shadow=new PIXI.Graphics,this.shadow.beginFill(4275515),this.shadow.alpha=.2,this.circleL=new PIXI.Circle(n/2+84,2420,56),this.circleR=new PIXI.Circle(n/2-84,2420,56),this.shadow.drawShape(this.circleL),this.shadow.drawShape(this.circleR),this.shadow.scale.set(1,.3),e.addChild(this.shadow),this.torso=new PIXI.Sprite.fromFrame("b2.png"),this.torso.anchor.x=.5,this.torso.anchor.y=.5,this.torso.position.x=n/2,this.torso.position.y=i/2+100,e.addChild(this.torso),this.isBlinking=!1,this.eyeL=new PIXI.Sprite.fromFrame("b5.png"),this.eyeR=new PIXI.Sprite.fromFrame("b5.png"),this.eyeL.anchor.set(.5,.5),this.eyeR.anchor.set(.5,.5),this.eyeL.scale.x=.95,this.eyeL.scale.y=.95,this.eyeL.scale.x=.95,this.eyeR.scale.y=.95,r.addChild(this.eyeL),r.addChild(this.eyeR),this.eyeL.position.set(n/2+32,i/2-40),this.eyeR.position.set(n/2-32,i/2-40),this.smileEyes=!1,this.eyeSL=new PIXI.Sprite.fromFrame("b6.png"),this.eyeSR=new PIXI.Sprite.fromFrame("b6.png"),this.eyeSL.anchor.set(.5,.5),this.eyeSR.anchor.set(.5,.5),this.eyeSL.scale.set(.95,.95),this.eyeSR.scale.set(.95,.95),r.addChild(this.eyeSL),r.addChild(this.eyeSR),this.eyeSL.position.set(n/2+32,i/2-40),this.eyeSR.position.set(n/2-32,i/2-40),this.eyeSL.alpha=0,this.eyeSR.alpha=0,this.eyeBrowL=new PIXI.Sprite.fromFrame("b7.png"),this.eyeBrowR=new PIXI.Sprite.fromFrame("b7.png"),this.eyeBrowL.anchor.set(.5,.5),this.eyeBrowL.scale.set(-1,1),this.eyeBrowR.anchor.set(.5,.5),r.addChild(this.eyeBrowL),r.addChild(this.eyeBrowR),this.eyeBrowL.position.set(n/2+33,i/2-70),this.eyeBrowR.position.set(n/2-33,i/2-70),this.mouthMain=new PIXI.Sprite.fromFrame("b8.png"),this.mouthMain.anchor.set(.5,.5),this.mouthMain.position.set(n/2,i/2+10),r.addChild(this.mouthMain),this.mouthMain.alpha=1,this.mouthSwapped=!1,this.mouthOing=!1,this.mouthO=new PIXI.Sprite.fromFrame("b5.png"),this.mouthO.anchor.set(.5,.5),this.mouthO.scale.set(.75,.75),r.addChild(this.mouthO),this.mouthO.position.set(n/2,i/2+10),this.mouthO.alpha=0,this.mouthC=new PIXI.Sprite.fromFrame("b3.png"),this.mouthC.anchor.set(.5,.5),this.mouthC.scale.set(.95,.95),r.addChild(this.mouthC),this.mouthC.position.set(n/2,i/2+10),this.mouthC.alpha=0};n.prototype.doBlink=function(){var t=this;this.isBlinking?(this.eyeL.scale.y=.95,this.eyeR.scale.y=.95,this.isBlinking=!1):(this.eyeL.scale.y=.2,this.eyeR.scale.y=.2,this.isBlinking=!0,setTimeout(function(){t.doBlink()},80))},n.prototype.swapMouth=function(){var t=this;this.mouthSwapped?(this.mouthC.alpha=0,this.mouthMain.alpha=1,this.mouthO.alpha=0,this.mouthSwapped=!1):(this.mouthC.alpha=1,this.mouthMain.alpha=0,this.mouthO.alpha=0,this.mouthSwapped=!0,setTimeout(function(){t.swapMouth()},1500))},n.prototype.oMouth=function(){var t=this;this.mouthOing?(this.mouthC.alpha=0,this.mouthMain.alpha=1,this.mouthO.alpha=0,this.mouthOing=!1):(this.mouthC.alpha=0,this.mouthMain.alpha=0,this.mouthO.alpha=1,this.mouthOing=!0,setTimeout(function(){t.oMouth()},1500))},n.prototype.sEyes=function(){var t=this;this.smileEyes?(this.eyeSL.alpha=0,this.eyeSR.alpha=0,this.eyeL.alpha=1,this.eyeR.alpha=1,this.smileEyes=!1):(this.eyeSL.alpha=1,this.eyeSR.alpha=1,this.eyeL.alpha=0,this.eyeR.alpha=0,this.smileEyes=!0,setTimeout(function(){t.sEyes()},2500))},e.exports=n},{animejs:9}],3:[function(t,e,r){e.exports=new function(){this.canvas=document.getElementById("canvas-main"),this.resize=function(t){this.intendedHeight=window.innerHeight-180,this.scale=this.intendedHeight/720,this.screenRatio=window.innerWidth/window.innerHeight,this.smallScreenScale=.78,this.resetScale=1,void 0!==t&&"resize"!==t.type?(this.canvas.style.webkitTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.MozTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.msTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.OTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.transform="scale("+this.scale+","+this.scale+")"):.65<this.screenRatio&&window.innerWidth<=360?(this.resetScale=this.smallScreenScale,this.canvas.style.webkitTransform="scale("+this.smallScreenScale+","+this.smallScreenScale+")",this.canvas.style.MozTransform="scale("+this.smallScreenScale+","+this.smallScreenScale+")",this.canvas.style.msTransform="scale("+this.smallScreenScale+","+this.smallScreenScale+")",this.canvas.style.OTransform="scale("+this.smallScreenScale+","+this.smallScreenScale+")",this.canvas.style.transform="scale("+this.smallScreenScale+","+this.smallScreenScale+")"):.72<this.screenRatio?(this.canvas.style.webkitTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.MozTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.msTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.OTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.transform="scale("+this.scale+","+this.scale+")"):(this.canvas.style.webkitTransform="scale("+this.resetScale+","+this.resetScale+")",this.canvas.style.MozTransform="scale("+this.resetScale+","+this.resetScale+")",this.canvas.style.msTransform="scale("+this.resetScale+","+this.resetScale+")",this.canvas.style.OTransform="scale("+this.resetScale+","+this.resetScale+")",this.canvas.style.transform="scale("+this.resetScale+","+this.resetScale+")")},window.addEventListener("resize",function(t){this.resize(t)}.bind(this)),window.addEventListener("orientationchange",function(t){setTimeout(this.resize(t),500)}.bind(this))}},{}],4:[function(t,e,r){var o=t("./lory.js").lory,h=t("pixi.js"),n=t("animejs"),i=t("dragula"),s=t("./body.js"),l=t("./item.js"),a=t("./arm.js"),c=t("jspdf"),d=t("filesaver.js-npm"),f=t("detectie"),u=function(){this.canvas=document.getElementById("Pcanvas"),this.renderer=h.autoDetectRenderer(600,720,{transparent:!0,antialias:!1}),this.canvas.appendChild(this.renderer.view),this.renderer.view.setAttribute("class","canvas-class"),this.renderer.view.setAttribute("id","output"),this.iconList=document.getElementById("icons"),this.canvasMain=document.getElementById("canvas-main"),this.brt=new h.BaseRenderTexture(200,80,h.SCALE_MODES.LINEAR,1),this.rt=new h.RenderTexture(this.brt),this.cWidth=600,this.cHeight=720,this.stage=new h.Container,this.viewport=new h.Container,this.viewport.pivot.x=this.cWidth/2,this.viewport.pivot.y=this.cHeight/2,this.viewport.position.x=this.cWidth/2,this.viewport.position.y=this.cHeight/2,this.stage.addChild(this.viewport),this.route=new h.Container,this.route.pivot.x=this.cWidth/2,this.route.pivot.y=this.cHeight,this.route.position.x=this.cWidth/2,this.route.position.y=this.cHeight-40,this.route.skew.x=0,this.route.rotation=0,this.route.scale.y=1,this.viewport.addChild(this.route),this.cape=new h.Sprite.fromFrame("39.png"),this.cape.anchor.set(.5,.5),this.cape.alpha=0,this.route.addChild(this.cape),this.cape.position.set(300,600),this.bodyLayer=new h.Container,this.route.addChild(this.bodyLayer),this.clothesLayer=new h.Container,this.route.addChild(this.clothesLayer),this.armLayer=new h.Container,this.route.addChild(this.armLayer),this.dressLayer=new h.Container,this.route.addChild(this.dressLayer),this.skirtLayer=new h.Container,this.route.addChild(this.skirtLayer),this.accessoriesLayer=new h.Container,this.route.addChild(this.accessoriesLayer),this.faceLayer=new h.Container,this.route.addChild(this.faceLayer),this.itemTextures=[],this.pointsR=[],this.pointsL=[],this.ropeLength=200/19,this.wave={bL:0,bR:0},this.isArmWaving=!1,this.isMainArmLoop=!1,this.isArmWiggle=!1,this.isArmSwing=!1,this.isArmSpiral=!1,this.count=0,this.armCount=0,this.isCounting=!0,this.isAnimLooping=!1,this.lastId=0,this.currentId=0,this.name="toucanoo's name",this.startX=0,this.startY=0,this.dX=0,this.dy=0;var l=this;this.removeLast=function(t){var e=l.lastId;"40"===e||"32"===e||"7"===e?(l.removeChildId(l.clothesLayer,e),l.removeAllArmClothes(e)):"5"===e||"45"===e?l.removeChildId(l.dressLayer,e):"1"===e||"8"===e||"18"===e||"22"===e||"29"===e||"37"===e||"46"===e||"52"===e?l.removeChildId(l.accessoriesLayer,e):"2"===e||"11"===e||"21"===e||"25"===e||"48"===e||"55"===e?l.removeChildId(l.accessoriesLayer,e):"6"===e||"10"===e||"20"===e||"31"===e?(type="Shoes",l.removeChildId(l.accessoriesLayer,e)):"3"===e||"27"===e||"33"===e||"38"===e||"47"===e||"13"===e?l.removeChildId(l.faceLayer,e):"30"===e||"26"===e||"28"===e||"42"===e||"49"===e||"54"===e?l.removeChildId(l.faceLayer,e):"39"===e?l.cape.alpha=0:"62"===e?l.removeChildId(l.skirtLayer,e):l.removeChildId(l.accessoriesLayer,e)},this.undoButton=document.getElementById("undo-btn"),this.undoButton.addEventListener("click",function(t){this.removeLast()}.bind(this),!1),this.onStart=function(t){t.preventDefault(),l.dX=0,l.dy=0,l.currentId=t.target.id.toString(),"touchstart"===t.type?(l.startX=t.touches[0].pageX,l.startY=t.touches[0].pageY):(l.startX=t.pageX,l.startY=t.pageY,document.body.onmouseup=l.onEnd.bind(l),l.tempStaticIcon=document.getElementById(t.target.id),null===l.tempStaticIcon.onmouseup&&(l.tempStaticIcon.onmouseup=l.onEnd.bind(l)))},this.onMove=function(t){"touchmove"===t.type?(l.dX=l.startX-t.touches[0].pageX,l.dY=l.startY-t.touches[0].pageY):(l.dX=l.startX-t.pageX,l.dY=l.startY-t.pageY)},this.onEnd=function(t){t.preventDefault();var e=(l.viewport,l.currentId),r=e-1,n=l.itemTextures[r],i=l.canvasMain.getBoundingClientRect(),o=i.left,s=i.top,a=i.width/600,u=0,h=0;"mouseup"===t.type&&(document.body.onmouseup=null),"touchend"===t.type?(u=(t.changedTouches[0].pageX-o)/a,h=(t.changedTouches[0].pageY-s)/a+50,85<l.dY?(l.lastId=e,l.initBody.oMouth(),setTimeout(function(){l.initBody.sEyes()},700),l.addItem(e,n,u,h)):Math.abs(l.dX)<5&&Math.abs(l.dY)<5?(l.lastId=e,l.initBody.oMouth(),setTimeout(function(){l.initBody.sEyes()},700),l.addItem(e,n,u,h)):0===l.dX&&(l.lastId=e,l.initBody.oMouth(),setTimeout(function(){l.initBody.sEyes()},700),l.addItem(e,n,u,h))):(l.lastId=e,l.initBody.oMouth(),setTimeout(function(){l.initBody.sEyes()},700),u=(t.pageX-o)/a,h=(t.pageY-s)/a+50,l.addItem(e,n,u,h))}};u.prototype.addItem=function(t,e,r,n){var i;"40"===t||"32"===t||"7"===t?(i=new l(t,e,"Clothes",this.cWidth,this.cHeight,r,n),this.removeChildType(this.clothesLayer,"Clothes"),this.removeChildType(this.dressLayer,"Clothes"),this.clothesLayer.addChild(i),i.startIntro(),this.changeArms(t)):"5"===t||"45"===t?(i=new l(t,e,"Clothes",this.cWidth,this.cHeight,r,n),this.removeChildType(this.dressLayer,"Clothes"),this.removeChildType(this.clothesLayer,"Clothes"),this.dressLayer.addChild(i),i.startIntro(),this.changeArms(t)):"1"===t||"8"===t||"18"===t||"22"===t||"29"===t||"37"===t||"46"===t||"52"===t?(i=new l(t,e,"Hair",this.cWidth,this.cHeight,r,n),this.removeChildType(this.accessoriesLayer,"Hair"),this.accessoriesLayer.addChild(i),i.startIntro()):"2"===t||"11"===t||"21"===t||"25"===t||"48"===t||"55"===t?(i=new l(t,e,"Hats",this.cWidth,this.cHeight,r,n),this.removeChildType(this.accessoriesLayer,"Hats"),this.accessoriesLayer.addChild(i),i.startIntro()):"6"===t||"10"===t||"20"===t||"31"===t?(i=new l(t,e,"Shoes",this.cWidth,this.cHeight,r,n),this.removeChildType(this.accessoriesLayer,"Shoes"),this.accessoriesLayer.addChild(i),i.startIntro()):"3"===t||"27"===t||"33"===t||"38"===t||"47"===t||"13"===t?(i=new l(t,e,"FaceLayer",this.cWidth,this.cHeight,r,n),this.faceLayer.addChild(i),i.startIntro()):"30"===t||"26"===t||"28"===t||"42"===t||"49"===t||"54"===t?(i=new l(t,e,"Glasses",this.cWidth,this.cHeight,r,n),this.removeChildType(this.faceLayer,"Glasses"),this.faceLayer.addChild(i),i.startIntro()):"39"===t?("Low Accessories",this.cape.alpha=1):("62"===t?(i=new l(t,e,"Skirt",this.cWidth,this.cHeight,r,n),this.skirtLayer.addChild(i)):(i=new l(t,e,"Accessories",this.cWidth,this.cHeight,r,n),this.accessoriesLayer.addChild(i)),i.startIntro())},u.prototype.loadTextures=function(){for(var t=1;t<=62;t++){var e=h.Texture.fromFrame(t+".png");this.itemTextures.push(e)}},u.prototype.populatePalette=function(){for(var t=(i([this.iconList],{copy:!0,revertOnSpill:!0,removeOnSpill:!0}),1);t<=62;t++){var e=document.createElement("li");e.className="js_slide sprite-icons icons-"+t,e.id=t,e.addEventListener("touchstart",function(t){this.onStart(t)}.bind(this),!1),e.addEventListener("touchmove",function(t){this.onMove(t)}.bind(this),!1),e.addEventListener("touchend",function(t){this.onEnd(t)}.bind(this),!1),e.addEventListener("mousedown",function(t){this.onStart(t)}.bind(this),!1),this.iconList.appendChild(e)}},u.prototype.initSlider=function(t,e){var r,n=document.querySelector(".slider"),i=document.getElementsByClassName("prev")[0];t<=400?r=o(n,{enableMouseEvents:!1,slidesToScroll:3,rewind:!0}):t<=800&&400<=t?r=o(n,{enableMouseEvents:!1,slidesToScroll:4,rewind:!0}):800<=t&&(r=o(n,{enableMouseEvents:!1,slidesToScroll:8,rewind:!0})),this.noBk=function(t){var e=r.returnIndex();i.style.visibility=0===e?"hidden":"visible"},n.addEventListener("after.lory.slide",function(t){this.noBk()}.bind(this))},u.prototype.makeTestFrame=function(){this.stage.removeChild(this.viewport),this.graphics=new h.Graphics,this.graphics.beginFill(16777215),this.graphics.moveTo(0,0),this.graphics.lineTo(600,0),this.graphics.lineTo(600,720),this.graphics.lineTo(0,720),this.graphics.lineTo(0,0),this.stage.addChild(this.graphics),this.stage.addChild(this.viewport)},u.prototype.startAnimate=function(){this.isAnimLooping||(this.isAnimLooping=!0,requestAnimationFrame(this.animate.bind(this)));var t=this;this.startWave=setInterval(function(){t.animateWave()},n.random(16e3,22e3)),this.startWiggle=setInterval(function(){t.startArmWiggle()},n.random(1e4,14e3)),this.startSwing=setInterval(function(){t.startArmSwing()},n.random(2e4,25e3)),"debug"===window.location.search.substring(1)&&setInterval(function(){t.startArmSpiral()},6e3)},u.prototype.startFaceAnimate=function(){var t=this;t.startBlink=setInterval(function(){t.initBody.doBlink()},n.random(4e3,6e3)),t.startSwapMouth=setInterval(function(){t.initBody.swapMouth()},n.random(5e3,7e3)),t.startFaceMove=setInterval(function(){t.startAnimeFace()},n.random(6e3,8e3))},u.prototype.animate=function(){this.isCounting&&(this.count+=.01,this.armCount+=.01),this.renderer.render(this.initArm.armCanvas,this.rt),this.route.rotation=.015*Math.sin(this.count),this.route.scale.y=1+.025*Math.sin(2.5*this.count);for(var t=1;t<this.pointsR.length;t++)this.pointsR[0].y=0,this.pointsR[0].x=0,this.isMainArmLoop?(this.pointsR[t].y=Math.pow(t,1.1*(Math.sin(3.5*this.armCount)+.1*Math.sin(5.5*this.armCount+60))),this.pointsR[t].x=t*this.ropeLength-.5*Math.pow(t,Math.sin(3.2*this.armCount+5)+.1*Math.sin(8*this.armCount+30)),this.pointsL[t].y=Math.pow(t,1.1*(Math.sin(3.55*this.armCount)+.1*Math.sin(5.55*this.armCount+61))),this.pointsL[t].x=t*this.ropeLength-.5*Math.pow(t,Math.sin(3.25*this.armCount+5.5)+.1*Math.sin(7.5*this.armCount+30.5))):this.isArmWiggle?(this.pointsR[t].y=2*Math.sin(t/2+20*this.armCount),this.pointsL[t].y=2*Math.sin(t/2+20*this.armCount)):this.isArmSpiral?(this.pointsR[t].y=-10*t*Math.sin(this.armCount*(t/13))+2*Math.pow(Math.log(t),2),this.pointsR[t].x=6*t*Math.cos(this.armCount*(t/13))-2*Math.pow(Math.log(t),2)):this.isArmSwing?(this.pointsR[t].y=t*this.ropeLength*Math.sin(.05*Math.sin(3*this.armCount)*.9*t),this.pointsR[t].x=t*this.ropeLength*Math.cos(.05*Math.sin(3*this.armCount)*t),this.pointsL[t].y=t*this.ropeLength*Math.sin(.05*Math.sin(3*this.armCount)*.9*t),this.pointsL[t].x=t*this.ropeLength*Math.cos(.05*Math.sin(3*this.armCount)*t),this.ropeR.rotation=-.89-.3*Math.sin(3*this.armCount+3.3),this.ropeL.rotation=.89+.3*Math.sin(3*this.armCount+3.3),this.ropeR.position.y=407-5*Math.sin(3*this.armCount),this.ropeL.position.y=407-5*Math.sin(3*this.armCount),this.ropeR.position.x=180-9*Math.sin(3*this.armCount),this.ropeL.position.x=420+9*Math.sin(3*this.armCount)):this.isArmWaving&&(this.pointsR[t].y=-t*this.ropeLength*Math.sin(.07*t*this.wave.bR),this.pointsR[t].x=t*this.ropeLength*Math.cos(.07*t*this.wave.bR),this.pointsL[t].y=-t*this.ropeLength*Math.sin(.07*t*this.wave.bL),this.pointsL[t].x=t*this.ropeLength*Math.cos(.07*t*this.wave.bL));requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.stage)},u.prototype.animateWave=function(t){var e=this;this.isArmWiggle||this.isArmSwing||this.isArmSpiral||e.isArmWaving||(e.isArmWaving=!0,e.isMainArmLoop=!1,this.animeWave1=n({targets:this.wave,bR:1.2,autoplay:!1,duration:2e3,elasticity:600,direction:"alternate",loop:1,update:function(){e.wave.bR<0&&e.initArm.flipToggle&&e.initArm.toggleArmHand()},begin:function(){e.initArm.toggleArmHand()},complete:function(){e.isArmWaving=!1,e.isMainArmLoop=!0,e.armCount=0}}),this.animeWaveCompensate=n({targets:this.ropeR,rotation:-1.4,autoplay:!1,duration:2e3,elasticity:600,direction:"alternate",loop:1}),this.animeWaveCompensate2=n({targets:this.ropeR.position,x:192,y:408,autoplay:!1,duration:2e3,elasticity:600,direction:"alternate",loop:1}),this.animeWaveCompensate3=n({targets:this.ropeR.scale,y:.8,autoplay:!1,duration:2e3,elasticity:400,direction:"alternate",loop:1}),this.animeSkew=n({targets:this.route.skew,x:-.06,autoplay:!1,duration:2e3,elasticity:400,direction:"alternate",loop:1}),this.animeWave1.play(),this.animeWaveCompensate.play(),this.animeWaveCompensate2.play(),this.animeWaveCompensate3.play(),this.animeSkew.play())},u.prototype.startArmWiggle=function(){var t=this;this.isArmWiggle||this.isArmWaving||this.isArmSwing||this.isArmSpiral?!this.isArmWiggle||this.isArmWaving||this.isArmSwing||this.isArmSpiral||(this.isArmWaving=!1,this.isMainArmLoop=!0,this.isArmWiggle=!1,this.isArmSwing=!1,this.isArmSpiral=!1):(this.isArmWaving=!1,this.isMainArmLoop=!1,this.isArmWiggle=!0,this.isArmSwing=!1,this.isArmSpiral=!1,this.outArmWiggle=setTimeout(function(){t.startArmWiggle()},4e3))},u.prototype.startArmSwing=function(){var t=this;this.isArmWiggle||this.isArmWaving||this.isArmSwing||this.isArmSpiral?this.isArmWiggle||this.isArmWaving||!this.isArmSwing||this.isArmSpiral||(this.isArmWaving=!1,this.isMainArmLoop=!0,this.isArmWiggle=!1,this.isArmSwing=!1,this.isArmSpiral=!1,this.ropeR.rotation=-.89,this.ropeL.rotation=.89,this.ropeR.position.y=403,this.ropeL.position.y=403,this.ropeR.position.x=179,this.ropeL.position.x=421):(this.armCount=0,this.isArmWaving=!1,this.isMainArmLoop=!1,this.isArmWiggle=!1,this.isArmSwing=!0,this.isArmSpiral=!1,this.outArmSwing=setTimeout(function(){t.startArmSwing()},5300))},u.prototype.startArmSpiral=function(){var t=this;this.isArmWiggle||this.isArmWaving||this.isArmSwing||this.isArmSpiral?this.isArmWiggle||this.isArmWaving||this.isArmSwing||!this.isArmSpiral||(this.isArmWaving=!1,this.isMainArmLoop=!0,this.isArmWiggle=!1,this.isArmSwing=!1,this.isArmSpiral=!1):(this.armCount=0,this.isArmWaving=!1,this.isMainArmLoop=!1,this.isArmWiggle=!1,this.isArmSwing=!1,this.isArmSpiral=!0,this.outArmSpiral=setTimeout(function(){t.startArmSpiral()},3e4))},u.prototype.makeBody=function(){this.banner=new h.Sprite.fromFrame("b1.png"),this.banner.anchor.x=.5,this.banner.anchor.y=.5,this.banner.position.x=this.cWidth/2,this.banner.position.y=785,this.initBody=new s(this.route,this.bodyLayer,this.faceLayer,this.cWidth,this.cHeight)},u.prototype.startAnimeFace=function(){var t=this;this.animeFace=n({targets:this.faceLayer.position,x:function(t,e){return n.random(6,9)},y:function(t,e){return n.random(0,-2)},autoplay:!1,duration:function(t,e){return n.random(600,1e3)},delay:function(t,e){return n.random(100,300)},direction:"alternate",easing:"easeOutExpo",loop:1,complete:function(){t.animeFace2.play()}}),this.animeFace2=n({targets:this.faceLayer.position,x:function(t,e){return n.random(-4,-6)},y:function(t,e){return n.random(0,2)},autoplay:!1,duration:function(t,e){return n.random(600,1e3)},delay:function(t,e){return n.random(200,800)},direction:"alternate",easing:"easeOutExpo",loop:1}),this.animeFace.play()},u.prototype.makeArms=function(){this.initArm=new a;for(var t=0;t<20;t++)this.pointsR.push(new h.Point(t*this.ropeLength,null));for(this.ropeR=new h.mesh.Rope(this.rt,this.pointsR),this.ropeR.pivot.x=38,this.ropeR.pivot.y=0,this.ropeR.scale.x=-1,this.armLayer.addChild(this.ropeR),this.ropeR.rotation=-.89,this.ropeR.position.x=179,this.ropeR.position.y=403,t=0;t<20;t++)this.pointsL.push(new h.Point(t*this.ropeLength,null));this.ropeL=new h.mesh.Rope(this.rt,this.pointsL),this.ropeL.pivot.x=38,this.ropeL.pivot.y=0,this.armLayer.addChild(this.ropeL),this.ropeL.rotation=.89,this.ropeL.position.x=421,this.ropeL.position.y=403},u.prototype.changeArms=function(t){this.initArm.changeArmClothes(t)},u.prototype.removeAllArmClothes=function(t){this.initArm.removeAllClothes(t)},u.prototype.removeChildType=function(t,e){for(var r=t.children.length-1;0<=r;r--)t.children[r].type===e&&t.removeChild(t.children[r])},u.prototype.removeChildId=function(t,e){for(var r=t.children.length-1;0<=r;r--)t.children[r].id===e&&t.removeChild(t.children[r])},u.prototype.printPipe=function(){var t;for(this.makeTestFrame(),this.isCounting=!1,this.animeWave1.pause(),this.animeWaveCompensate.pause(),this.animeWaveCompensate2.pause(),this.animeWaveCompensate3.pause(),this.animeSkew.pause(),clearInterval(this.startWave),clearInterval(this.startWiggle),clearInterval(this.startSwing),clearInterval(this.outArmWiggle),clearInterval(this.outArmSwing),clearInterval(this.startBlink),clearInterval(this.startSwapMouth),clearInterval(this.startFaceMove),this.route.position.y-=65,this.route.addChild(this.banner),t=0;t<this.accessoriesLayer.children.length;t++)this.accessoriesLayer.children[t].removeAnchor();for(t=0;t<this.faceLayer.children.length;t++)this.faceLayer.children[t].removeAnchor&&this.faceLayer.children[t].removeAnchor();this.textName=new h.Text(this.name,{fontFamily:"Kent4F",fontSize:24,fill:4275515,align:"center"}),this.textName.anchor.set(.5,.5),this.textName.position.set(this.cWidth/2,779),this.route.addChild(this.textName)},u.prototype.reversePrintPipe=function(){this.isArmWaving&&(this.animeWave1.restart(),this.animeWaveCompensate.restart(),this.animeWaveCompensate2.restart(),this.animeWaveCompensate3.restart(),this.animeSkew.restart()),this.route.position.y+=65,this.route.removeChild(this.banner),this.route.removeChild(this.textName),this.count=0,this.armCount=0,this.isCounting=!0,this.startFaceAnimate(),this.startAnimate(),this.stage.removeChild(this.graphics)},u.prototype.setNameText=function(t){this.textName.text=t,this.name=t},u.prototype.getCanvasImage=function(){return this.renderer.render(this.stage),this.canvasData=this.renderer.view.toDataURL("image/png",1),this.canvasData},u.prototype.printCanvas=function(){var t=window.open();t.document.open(),t.document.write('<img src="'+this.canvasData+'" style=" display: block; width: 660px; height: 792; margin: 0 auto;"/>'),t.document.close(),t.focus(),t.print()},u.prototype.saveCanvas=function(){if(f()){for(var t=this.canvasData,e=atob(t.split(",")[1]),r=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),i=new Uint8Array(n),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);var s=new Blob([n],{type:r});d.saveAs(s,this.name+".png")}else{var a=new c;a.setProperties({title:this.name,subject:"Your very own toucanoo",author:"toucanBox"}),a.addImage(this.canvasData,"PNG",24,30,162,194.4);var u=a.output("blob");d.saveAs(u,this.name+".pdf")}},u.prototype.startGirl=function(t){var e=new l("5",this.itemTextures[4],"Clothes",this.cWidth,this.cHeight,0,0);this.dressLayer.addChild(e);var r=new l("37",this.itemTextures[36],"Hair",this.cWidth,this.cHeight,this.cWidth/2-5,this.cHeight/2-70);this.accessoriesLayer.addChild(r);var n=new l("31",this.itemTextures[30],"Shoes",this.cWidth,this.cHeight,this.cWidth/2,this.cHeight-10);this.accessoriesLayer.addChild(n);var i=new l("19",this.itemTextures[18],"Accessories",this.cWidth,this.cHeight,this.cWidth/2+8,this.cHeight/2+115);this.accessoriesLayer.addChild(i)},u.prototype.startBoy=function(t){var e=new l("32",this.itemTextures[31],"Clothes",this.cWidth,this.cHeight,0,0);this.clothesLayer.addChild(e),this.changeArms("32");var r=new l("18",this.itemTextures[17],"Hair",this.cWidth,this.cHeight,this.cWidth/2,this.cHeight/2-105);this.accessoriesLayer.addChild(r);var n=new l("6",this.itemTextures[5],"Shoes",this.cWidth,this.cHeight,this.cWidth/2,this.cHeight-20);this.accessoriesLayer.addChild(n);var i=new l("17",this.itemTextures[16],"Accessories",this.cWidth,this.cHeight,this.cWidth/2+80,this.cHeight/2+110);this.accessoriesLayer.addChild(i)},u.prototype.startPj=function(t){var e=new l("40",this.itemTextures[39],"Clothes",this.cWidth,this.cHeight,0,0);this.clothesLayer.addChild(e),this.changeArms("40");var r=new l("55",this.itemTextures[54],"Hats",this.cWidth,this.cHeight,this.cWidth/2+23,this.cHeight/2-133);this.accessoriesLayer.addChild(r)},u.prototype.startScottish=function(t){var e=new h.Texture.fromFrame("kilt.png"),r=new l("kilt",e,"Skirt",this.cWidth,this.cHeight,this.cWidth/2-4,this.cHeight-120);this.skirtLayer.addChild(r);var n=new l("7",this.itemTextures[6],"Clothes",this.cWidth,this.cHeight,0,0);this.clothesLayer.addChild(n),this.changeArms("7");var i=new l("18",this.itemTextures[17],"Hair",this.cWidth,this.cHeight,this.cWidth/2,this.cHeight/2-105);this.accessoriesLayer.addChild(i);var o=new l("2",this.itemTextures[1],"Hats",this.cWidth,this.cHeight,this.cWidth/2-30,this.cHeight/2-160);this.accessoriesLayer.addChild(o);var s=new l("6",this.itemTextures[5],"Accessories",this.cWidth,this.cHeight,this.cWidth/2,this.cHeight-20);this.accessoriesLayer.addChild(s);var a=new l("35",this.itemTextures[34],"Accessories",this.cWidth,this.cHeight,this.cWidth/2-3,this.cHeight-190);this.accessoriesLayer.addChild(a);var u=new l("47",this.itemTextures[46],"Facelayer",this.cWidth,this.cHeight,this.cWidth/2,this.cHeight/2+10);this.faceLayer.addChild(u)},e.exports=new u},{"./arm.js":1,"./body.js":2,"./item.js":6,"./lory.js":7,animejs:9,detectie:17,dragula:19,"filesaver.js-npm":22,jspdf:24,"pixi.js":161}],5:[function(t,e,r){t("pixi.js");var s=t("animejs"),n=function(t){var r=this;this.init=t,this.fader=document.getElementById("fader"),this.printModal=document.getElementById("print-modal"),this.adviceModal=document.getElementById("advice-modal"),this.endBtn=document.getElementById("print-btn"),this.endBtn.addEventListener("click",function(){r.onOutroClick()},!1),this.onOutroClick=function(t){r.fader.setAttribute("class","fade-bk"),r.printModal.setAttribute("class","modal"),r.init.printPipe(),r.doPreview()},this.adviceBtn=document.getElementById("print-advice"),this.adviceBtn.addEventListener("click",function(){r.showAdvice()},!1),this.showAdvice=function(){r.adviceModal.setAttribute("class","modal"),r.printModal.setAttribute("class","modal hidden"),r.imgAdvice=document.getElementById("img-indicator"),r.imgAdvice.setAttribute("class"," ")},this.adviceBack=document.getElementById("advice-back-do"),this.adviceBack.addEventListener("click",function(){r.closeAdvice()},!1),this.closeAdvice=function(){r.adviceModal.setAttribute("class","modal hidden"),r.printModal.setAttribute("class","modal")},this.output=document.getElementById("output"),this.preview=document.getElementById("preview-output"),this.doPrintBtn=document.querySelectorAll(".print-do");for(var e=0;e<this.doPrintBtn.length;e++)this.doPrintBtn[e].addEventListener("click",function(){r.doPrint()},!1),this.doPrint=function(t){r.init.printCanvas()};this.doPDFBtn=document.querySelectorAll(".save-do");for(e=0;e<this.doPDFBtn.length;e++)this.doPDFBtn[e].addEventListener("click",function(){r.doPDF()},!1),this.doPDF=function(t){r.init.saveCanvas()};this.textInput=document.getElementById("text-field"),this.useValue=function(t){var e=r.textInput.value;r.addText(e),r.doPreview(),13==t.keyCode&&r.doPrintBtn.click()},this.textInput.onchange=this.useValue,this.textInput.onblur=this.useValue,this.textInput.onkeyup=this.useValue,this.doBackBtn=document.querySelectorAll(".back-do");for(e=0;e<this.doBackBtn.length;e++)this.doBackBtn[e].addEventListener("click",function(){r.doBack()},!1);this.doBack=function(t){r.init.reversePrintPipe(),r.printModal.setAttribute("class","modal hidden"),r.fader.setAttribute("class","fade-bk hidden")},setTimeout(function(){r.demoSequence()},4e3)};n.prototype.addText=function(t){this.init.setNameText(t)},n.prototype.doPreview=function(){this.canvasData=this.init.getCanvasImage(),this.preview.src=this.canvasData},n.prototype.onIntroGirl=function(){this.init.startGirl()},n.prototype.onIntroBoy=function(){this.init.startBoy()},n.prototype.onIntroNeutralPjs=function(){this.init.startPj()},n.prototype.onIntroScottish=function(){this.init.startScottish()},n.prototype.onIntroNeutralNaked=function(){},n.prototype.demoSequence=function(){var t=this;this.indicator=document.getElementById("indicator"),this.indicator.style.display="block";var e=window.innerWidth/2,r=window.innerHeight/2,n=e-this.indicator.offsetLeft,i=r-this.indicator.offsetTop,o=s({targets:this.indicator,scale:{value:.97,duration:300,delay:800,easing:"easeInOutExpo"},translateX:{value:n,duration:1800,delay:1100,easing:"easeInOutQuad"},translateY:{value:i,duration:1800,delay:1100,easing:"easeInOutQuad"},opacity:{value:1,duration:900,easing:"easeInOutExpo"},complete:function(){s.remove(o),s({targets:".indicatorImg",opacity:0,duration:1100,easing:"easeInOutExpo",scale:{value:1.03,duration:300,easing:"easeInOutExpo"},autoplay:!0,complete:function(){t.indicator.style.display="none"}})}})},n.prototype.getStarted=function(){this.type=window.location.search.substring(1),"girl"===this.type?this.onIntroGirl():"boy"===this.type?this.onIntroBoy():"pjs"===this.type?this.onIntroNeutralPjs():"debug"===this.type?(this.onIntroNeutralNaked(),this.testCanvasTarget=document.getElementById("canvas-main"),this.testOutputParent=document.getElementsByClassName("space")[0],this.testOutput=document.createElement("div"),setTimeout(function(){this.testScale=this.testCanvasTarget.style.transform,this.testOutput.innerHTML="height: "+window.innerHeight+", width: "+window.innerWidth+", canvas transform: "+this.testScale,this.testOutputParent.appendChild(this.testOutput)}.bind(this),5e3)):"scottish"===this.type?this.onIntroScottish():this.onIntroNeutralNaked()},e.exports=n},{animejs:9,"pixi.js":161}],6:[function(t,e,r){var n=t("animejs"),i=function(t,e,r,n,i,o,s){this.id=t,this.type=r,this.image=e,PIXI.Sprite.call(this,e),this.wiggle=!1,this.interactive=!0,this.buttonMode=!0,this.anchor.x=.5,this.anchor.y=.5,this.scale.x=1,this.scale.y=1,this.position.x=600<o||o<0?n/2:o,this.position.y=780<s||s<100?i/2:s,this.anchors=!0,this.count=0,"40"===t?(this.position.x=n/2-4,this.position.y=i/2+163):"5"===t?(this.position.x=n/2+8,this.position.y=i/2+128):"32"===t?(this.position.x=n/2+1,this.position.y=i/2+119,this.scale.x=1.01):"7"===t?(this.position.x=n/2-4,this.position.y=i/2+119):"45"===t?(this.position.x=n/2-4,this.position.y=i/2+119):("Shoes"===r?(this.hitSizerY=this.height/1.6,this.hitSizerX=this.width/2,this.hitArea=new PIXI.Ellipse(.5,.5,this.hitSizerX,this.hitSizerY),this.visualHit=new PIXI.Ellipse(.5,.5,this.hitSizerX,this.hitSizerY)):(100<this.width?this.hitSizer=80:80<this.width&&80<this.height?this.hitSizer=this.width/2.5:this.hitSizer=40,this.hitArea=new PIXI.Circle(.5,.5,this.hitSizer),this.visualHit=new PIXI.Circle(.5,.5,this.hitSizer)),this.drawHit=new PIXI.Graphics,this.drawHit.beginFill(16770120),this.drawHit.drawShape(this.visualHit),this.drawHit.alpha=0,this.addChild(this.drawHit),this.on("mousedown",this.onDragStart.bind(this)).on("touchstart",this.onDragStart.bind(this)).on("mouseup",this.onDragEnd.bind(this)).on("mouseupoutside",this.onDragEnd.bind(this)).on("touchend",this.onDragEnd.bind(this)).on("touchendoutside",this.onDragEnd.bind(this)).on("mousemove",this.onDragMove.bind(this)).on("touchmove",this.onDragMove.bind(this))),requestAnimationFrame(this.animate.bind(this)),this.fadeHit()};((i.prototype=Object.create(PIXI.Sprite.prototype)).constructor=i).prototype.removeAnchor=function(){this.removeChild(this.drawHit)},i.prototype.restoreAnchor=function(){this.addChild(this.drawHit)},i.prototype.onDragStart=function(t){if(!this.dragging){this.data=t.data,this.alpha=.5,this.dragging=!0,this.scale.x*=1.05,this.scale.y*=1.05,this.dragPoint=t.data.getLocalPosition(this.parent),this.dragPoint.x-=this.position.x,this.dragPoint.y-=this.position.y;var e=this.parent;e.removeChild(this),e.addChild(this)}},i.prototype.onDragEnd=function(t){this.dragging&&(this.alpha=1,this.dragging=!1,this.scale.x/=1.05,this.scale.y/=1.05,this.data=null,this.rotation=0,560<=this.position.x||this.position.x<=40?this.destroy():(760<=this.position.y||this.position.y<=40)&&this.destroy())},i.prototype.onDragMove=function(t){if(this.dragging){var e=this.data.getLocalPosition(this.parent);this.position.x=e.x-this.dragPoint.x,this.position.y=e.y-this.dragPoint.y}},i.prototype.animate=function(t){this.count+=.01,this.dragging&&(this.rotation=.05*Math.sin(20*this.count)),!this.dragging&&this.anchors,"13"===this.id&&(this.rotation=2*this.count),requestAnimationFrame(this.animate.bind(this))},i.prototype.startIntro=function(){this.scale.x=0,this.scale.y=0,this.intro=n({targets:this.scale,x:1,y:1,duration:1e3,autoplay:!1}),this.intro.play()},i.prototype.fadeHit=function(){this.fader=n({targets:this.drawHit,alpha:.5,duration:1e3,autoplay:!0,delay:3e3,easing:"easeInOutQuad",direction:"alternate",loop:!0})},e.exports=i},{animejs:9}],7:[function(t,i,o){!function(t,e){if("object"==typeof o&&"object"==typeof i)i.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof o?o:t)[n]=r[n]}}(this,function(){return function(r){function n(t){if(i[t])return i[t].exports;var e=i[t]={exports:{},id:t,loaded:!1};return r[t].call(e.exports,e,e.exports,n),e.loaded=!0,e.exports}var i={};return n.m=r,n.c=i,n.p="",n(0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var L=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};e.lory=function(c,d){function p(t,e){var r=D.classNameActiveSlide;t.forEach(function(t,e){t.classList.contains(r)&&t.classList.remove(r)}),t[e].classList.add(r)}function m(t,e,r){(0,i.default)(c,t+".lory."+e,r)}function g(t,e,r){var n=P&&P.style;n&&(n[I.transition+"TimingFunction"]=r,n[I.transition+"Duration"]=e+"ms",I.hasTranslate3d?n[I.transform]="translate3d("+t+"px, 0, 0)":n[I.transform]="translate("+t+"px, 0)")}function o(t,e){var r=D,n=r.slideSpeed,i=r.slidesToScroll,o=r.infinite,s=r.rewind,a=r.rewindSpeed,u=r.ease,h=r.classNameActiveSlide,l=n,c=e?k+1:k-1,d=Math.round(E-S);m("before","slide",{index:k,nextSlide:c}),"number"!=typeof t&&(t=e?k+i:k-i),t=Math.min(Math.max(t,0),C.length-1),o&&void 0===e&&(t+=o);var f=Math.min(Math.max(-1*C[t].offsetLeft,-1*d),0);s&&Math.abs(T.x)===d&&e&&(t=f=0,l=a),g(f,l,u),T.x=f,C[t].offsetLeft<=d&&(k=t),!o||t!==C.length-o&&0!==t||(e&&(k=o),e||(k=C.length-2*o),T.x=-1*C[k].offsetLeft,R=function(){g(-1*C[k].offsetLeft,0,void 0)}),h&&p(N.call(C),k),m("after","slide",{currentSlide:k})}function t(){m("before","init"),I=(0,B.default)();var t,e,r,n,i=D=L({},F.default,d),o=i.classNameFrame,s=i.classNameSlideContainer,a=i.classNamePrevCtrl,u=i.classNameNextCtrl,h=i.enableMouseEvents,l=i.classNameActiveSlide;O=c.getElementsByClassName(o)[0],P=O.getElementsByClassName(s)[0],A=c.getElementsByClassName(a)[0],M=c.getElementsByClassName(u)[0],T={x:P.offsetLeft,y:P.offsetTop},D.infinite&&(t=N.call(P.children),e=D.infinite,r=t.slice(0,e),n=t.slice(t.length-e,t.length),r.forEach(function(t){var e=t.cloneNode(!0);P.appendChild(e)}),n.reverse().forEach(function(t){var e=t.cloneNode(!0);P.insertBefore(e,P.firstChild)}),P.addEventListener(I.transitionEnd,b)),C=N.call(P.children),f(),l&&p(C,k),A&&M&&(A.addEventListener("click",v),M.addEventListener("click",y)),O.addEventListener("touchstart",x),h&&(O.addEventListener("mousedown",x),O.addEventListener("click",w)),D.window.addEventListener("resize",_),m("after","init")}function f(){var t=D,e=t.infinite,r=t.ease,n=t.rewindSpeed,i=t.rewindOnResize,o=t.classNameActiveSlide;E=P.getBoundingClientRect().width||P.offsetWidth,(S=O.getBoundingClientRect().width||O.offsetWidth)===E&&(E=C.reduce(function(t,e){return t+e.getBoundingClientRect().width||e.offsetWidth},0)),i?k=0:(r=null,n=0),e?(g(-1*C[k+e].offsetLeft,0,null),k+=e):g(-1*C[k].offsetLeft,n,r),T.x=-1*C[k].offsetLeft,o&&p(N.call(C),k)}function v(){o(!1,!1)}function y(){o(!1,!0)}function b(){R&&(R(),R=void 0)}function x(t){var e=D.enableMouseEvents,r=t.touches?t.touches[0]:t;e&&(O.addEventListener("mousemove",s),O.addEventListener("mouseup",a),O.addEventListener("mouseleave",a)),O.addEventListener("touchmove",s),O.addEventListener("touchend",a);var n=r.pageX,i=r.pageY;u={x:n,y:i,time:Date.now()},l=void 0,h={},m("on","touchstart",{event:t})}function s(t){var e=t.touches?t.touches[0]:t,r=e.pageX,n=e.pageY;h={x:r-u.x,y:n-u.y},void 0===l&&(l=!!(l||Math.abs(h.x)<Math.abs(h.y))),!l&&u&&(t.preventDefault(),g(T.x+h.x,0,null)),m("on","touchmove",{event:t})}function a(t){var e=u?Date.now()-u.time:void 0,r=Number(e)<300&&25<Math.abs(h.x)||Math.abs(h.x)>S/3,n=!k&&0<h.x||k===C.length-1&&h.x<0,i=h.x<0;l||(r&&!n?o(!1,i):g(T.x,D.snapBackSpeed)),u=void 0,O.removeEventListener("touchmove",s),O.removeEventListener("touchend",a),O.removeEventListener("mousemove",s),O.removeEventListener("mouseup",a),O.removeEventListener("mouseleave",a),m("on","touchend",{event:t})}function w(t){h.x&&t.preventDefault()}function _(t){f(),m("on","resize",{event:t})}var T=void 0,E=void 0,S=void 0,C=void 0,O=void 0,P=void 0,A=void 0,M=void 0,I=void 0,R=void 0,k=0,D={};"undefined"!=typeof jQuery&&c instanceof jQuery&&(c=c[0]);var u=void 0,h=void 0,l=void 0;return t(),{setup:t,reset:f,slideTo:function(t){o(t)},returnIndex:function(){return k-D.infinite||0},prev:v,next:y,destroy:function(){m("before","destroy"),O.removeEventListener(I.transitionEnd,b),O.removeEventListener("touchstart",x),O.removeEventListener("touchmove",s),O.removeEventListener("touchend",a),O.removeEventListener("mousemove",s),O.removeEventListener("mousedown",x),O.removeEventListener("mouseup",a),O.removeEventListener("mouseleave",a),O.removeEventListener("click",w),D.window.removeEventListener("resize",_),A&&A.removeEventListener("click",v),M&&M.removeEventListener("click",y),D.infinite&&Array.apply(null,Array(D.infinite)).forEach(function(){P.removeChild(P.firstChild),P.removeChild(P.lastChild)}),m("after","destroy")}}};var B=n(r(2)),i=n(r(3)),F=n(r(5)),N=Array.prototype.slice},function(t,e){(function(a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t,e,r,n=void 0,i=void 0,o=void 0,s=void 0;return t=document.createElement("_"),e=t.style,r=void 0,""===e[r="webkitTransition"]&&(o="webkitTransitionEnd",i=r),""===e[r="transition"]&&(o="transitionend",i=r),""===e[r="webkitTransform"]&&(n=r),""===e[r="msTransform"]&&(n=r),""===e[r="transform"]&&(n=r),document.body.insertBefore(t,null),e[n]="translate3d(0, 0, 0)",s=!!a.getComputedStyle(t).getPropertyValue(n),document.body.removeChild(t),{transform:n,transition:i,transitionEnd:o,hasTranslate3d:s}}}).call(e,function(){return this}())},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){var n=new o.default(e,{bubbles:!0,cancelable:!0,detail:r});t.dispatchEvent(n)};var n,i=r(4),o=(n=i)&&n.__esModule?n:{default:n}},function(r,t){(function(t){var e=t.CustomEvent;r.exports=function(){try{var t=new e("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?e:"function"==typeof document.createEvent?function(t,e){var r=document.createEvent("CustomEvent");return e?r.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):r.initCustomEvent(t,!1,!1,void 0),r}:function(t,e){var r=document.createEventObject();return r.type=t,e?(r.bubbles=Boolean(e.bubbles),r.cancelable=Boolean(e.cancelable),r.detail=e.detail):(r.bubbles=!1,r.cancelable=!1,r.detail=void 0),r}}).call(t,function(){return this}())},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={slidesToScroll:1,slideSpeed:300,rewindSpeed:600,snapBackSpeed:200,ease:"ease",rewind:!1,infinite:!1,classNameFrame:"js_frame",classNameSlideContainer:"js_slides",classNamePrevCtrl:"js_prev",classNameNextCtrl:"js_next",classNameActiveSlide:"active",enableMouseEvents:!1,window:window,rewindOnResize:!0}}])})},{}],8:[function(e,t,r){var n=e("pixi.js");e("animejs");document.addEventListener("DOMContentLoaded",function(t){n.loader.add("base","../assets/img/canvas/base-arms.json").add("items","../assets/img/canvas/items.json").on("progress",function(t,e){}).load(function(){var t=e("./init.js");t.loadTextures(),t.populatePalette(),t.initSlider(window.innerWidth,window.innerHeight),t.makeBody(),t.makeArms(),new(e("./introOutro.js"))(t).getStarted(),e("./canvasSizer.js").resize(void 0),setTimeout(function(){t.startFaceAnimate(),t.startAnimate(),document.getElementById("busy").style.display="none",setTimeout(function(){t.animateWave()},1e3)},500)})})},{"./canvasSizer.js":3,"./init.js":4,"./introOutro.js":5,animejs:9,"pixi.js":161}],9:[function(t,e,r){var n,i;n=this,i=function(){var c,r,t,e,n,o={duration:1e3,delay:0,loop:!1,autoplay:!0,direction:"normal",easing:"easeOutElastic",elasticity:400,round:!1,begin:void 0,update:void 0,complete:void 0},i=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skewX","skewY"],p={arr:function(t){return Array.isArray(t)},obj:function(t){return-1<Object.prototype.toString.call(t).indexOf("Object")},svg:function(t){return t instanceof SVGElement},dom:function(t){return t.nodeType||p.svg(t)},num:function(t){return!isNaN(parseInt(t))},str:function(t){return"string"==typeof t},fnc:function(t){return"function"==typeof t},und:function(t){return void 0===t},nul:function(t){return"null"==typeof t},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return p.hex(t)||p.rgb(t)||p.hsl(t)}},a=(e={},n={Sine:function(t){return 1+Math.sin(Math.PI/2*t-Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t,e){if(0===t||1===t)return t;var r=1-Math.min(e,998)/1e3,n=t/1-1,i=r/(2*Math.PI)*Math.asin(1);return-Math.pow(2,10*n)*Math.sin((n-i)*(2*Math.PI)/r)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,r=4;t<((e=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*e-2)/22-t,2)}},["Quad","Cubic","Quart","Quint","Expo"].forEach(function(t,e){n[t]=function(t){return Math.pow(t,e+2)}}),Object.keys(n).forEach(function(t){var r=n[t];e["easeIn"+t]=r,e["easeOut"+t]=function(t,e){return 1-r(1-t,e)},e["easeInOut"+t]=function(t,e){return t<.5?r(2*t,e)/2:1-r(-2*t+2,e)/2},e["easeOutIn"+t]=function(t,e){return t<.5?(1-r(1-2*t,e))/2:(r(2*t-1,e)+1)/2}}),e.linear=function(t){return t},e),s=function(t){return p.str(t)?t:t+""},u=function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},h=function(t){if(p.col(t))return!1;try{return document.querySelectorAll(t)}catch(t){return!1}},l=function(t){return t.reduce(function(t,e){return t.concat(p.arr(e)?l(e):e)},[])},m=function(t){return p.arr(t)?t:(p.str(t)&&(t=h(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])},d=function(t,e){return t.some(function(t){return t===e})},f=function(t){return t.filter(function(t,e,r){return r.indexOf(t)===e})},g=function(t){var e={};for(var r in t)e[r]=t[r];return e},v=function(t,e){for(var r in e)t[r]=p.und(t[r])?e[r]:t[r];return t},y=function(t){return p.rgb(t)?t:p.hex(t)?function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,r,n){return e+e+r+r+n+n});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgb("+parseInt(e[1],16)+","+parseInt(e[2],16)+","+parseInt(e[3],16)+")"}(t):p.hsl(t)?function(t){t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t);var e,r,n,i=parseInt(t[1])/360,o=parseInt(t[2])/100,s=parseInt(t[3])/100,a=function(t,e,r){return r<0&&(r+=1),1<r&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t};if(0==o)e=r=n=s;else{var u=s<.5?s*(1+o):s+o-s*o,h=2*s-u;e=a(h,u,i+1/3),r=a(h,u,i),n=a(h,u,i-1/3)}return"rgb("+255*e+","+255*r+","+255*n+")"}(t):void 0},b=function(t){return/([\+\-]?[0-9|auto\.]+)(%|px|pt|em|rem|in|cm|mm|ex|pc|vw|vh|deg)?/.exec(t)[2]},x=function(t,e,r){return b(e)?e:-1<t.indexOf("translate")?b(r)?e+b(r):e+"px":-1<t.indexOf("rotate")||-1<t.indexOf("skew")?e+"deg":e},w=function(t,e){if(e in t.style)return getComputedStyle(t).getPropertyValue(u(e))||"0"},_=function(t,e){return p.dom(t)&&d(i,e)?"transform":p.dom(t)&&(t.getAttribute(e)||p.svg(t)&&t[e])?"attribute":p.dom(t)&&"transform"!==e&&w(t,e)?"css":p.nul(t[e])||p.und(t[e])?void 0:"object"},T=function(t,e){switch(_(t,e)){case"transform":return function(t,r){var e=-1<r.indexOf("scale")?1:0,n=t.style.transform;if(!n)return e;for(var i=/(\w+)\((.+?)\)/g,o=[],s=[],a=[];o=i.exec(n);)s.push(o[1]),a.push(o[2]);var u=a.filter(function(t,e){return s[e]===r});return u.length?u[0]:e}(t,e);case"css":return w(t,e);case"attribute":return t.getAttribute(e)}return t[e]||0},E=function(t,e,r){if(p.col(e))return y(e);if(b(e))return e;var n=b(b(t.to)?t.to:t.from);return!n&&r&&(n=b(r)),n?e+n:e},S=function(t){var e=/-?\d*\.?\d+/g;return{original:t,numbers:s(t).match(e)?s(t).match(e).map(Number):[0],strings:s(t).split(e)}},C=function(t,e,r,n){var i={};if("transform"===r)i.from=t+"("+x(t,e.from,e.to)+")",i.to=t+"("+x(t,e.to)+")";else{var o="css"===r?w(n,t):void 0;i.from=E(e,e.from,o),i.to=E(e,e.to,o)}return{from:S(i.from),to:S(i.to)}},O=function(d,t){var f=[];return d.forEach(function(h,l){var c=h.target;return t.forEach(function(t){var e,r,n,i,o,s=_(c,t.name);if(s){var a=(e=c,r=t.name,n=t.value,i=l,{from:1<(o=m(p.fnc(n)?n(e,i):n)).length?o[0]:T(e,r),to:1<o.length?o[1]:o[0]}),u=g(t);u.animatables=h,u.type=s,u.from=C(t.name,a,u.type,c).from,u.to=C(t.name,a,u.type,c).to,u.round=p.col(a.from)||u.round?1:0,u.delay=(p.fnc(u.delay)?u.delay(c,l,d.length):u.delay)/F.speed,u.duration=(p.fnc(u.duration)?u.duration(c,l,d.length):u.duration)/F.speed,f.push(u)}})}),f},P=function(t,e){var r,n,i,o=O(t,e);return(r=o,n=["name","from","to","delay","duration"],i={},r.forEach(function(e){var t=JSON.stringify(n.map(function(t){return e[t]}));i[t]=i[t]||[],i[t].push(e)}),Object.keys(i).map(function(t){return i[t]})).map(function(t){var e=g(t[0]);return e.animatables=t.map(function(t){return t.animatables}),e.totalDuration=e.delay+e.duration,e})},A=function(i,o){i.tweens.forEach(function(t){var e=t.to,r=t.from,n=i.duration-(t.delay+t.duration);t.from=e,t.to=r,o&&(t.delay=n)}),i.reversed=!i.reversed},M=function(t){var e=[],r=[];return t.tweens.forEach(function(t){"css"!==t.type&&"transform"!==t.type||(e.push("css"===t.type?u(t.name):"transform"),t.animatables.forEach(function(t){r.push(t.target)}))}),{properties:f(e).join(", "),elements:f(r)}},I=function(o,t){var n,e,i,s=Math.min(Math.max(t-o.delay,0),o.duration)/o.duration,r=o.to.numbers.map(function(t,e){var r=o.from.numbers[e],n=a[o.easing](s,o.elasticity),i=o.path?function(n,i){var o=n.path,s=n.value*i,t=function(t){var e=t||0,r=1<i?n.value+e:s+e;return o.getPointAtLength(r)},e=t(),r=t(-1),a=t(1);switch(n.name){case"translateX":return e.x;case"translateY":return e.y;case"rotate":return 180*Math.atan2(a.y-r.y,a.x-r.x)/Math.PI}}(o,n):r+n*(t-r);return o.round?Math.round(i*o.round)/o.round:i});return n=r,e=o.to.strings,i=o.from.strings,e.reduce(function(t,e,r){return e=e||i[r-1],t+n[r-1]+e})},R=function(t,e){var r;t.currentTime=e,t.progress=e/t.duration*100;for(var n=0;n<t.tweens.length;n++){var i=t.tweens[n];i.currentValue=I(i,e);for(var o=i.currentValue,s=0;s<i.animatables.length;s++){var a=i.animatables[s],u=a.id,h=a.target,l=i.name;switch(i.type){case"css":h.style[l]=o;break;case"attribute":h.setAttribute(l,o);break;case"object":h[l]=o;break;case"transform":r||(r={}),r[u]||(r[u]=[]),r[u].push(o)}}}if(r)for(var n in c||(c=(w(document.body,"transform")?"":"-webkit-")+"transform"),r)t.animatables[n].target.style[c]=r[n].join(" ")},k=function(t){var e,r,n,i={};return i.animatables=(n=(n=t.targets)?l(p.arr(n)?n.map(m):m(n)):[]).map(function(t,e){return{target:t,id:e}}),i.settings=v(t,o),i.properties=function(t,e){var r=[];for(var n in t)if(!o.hasOwnProperty(n)&&"targets"!==n){var i=p.obj(t[n])?g(t[n]):{value:t[n]};i.name=n,r.push(v(i,e))}return r}(t,i.settings),i.tweens=P(i.animatables,i.properties),i.duration=i.tweens.length?(r=i.tweens,Math.max.apply(Math,r.map(function(t){return t.totalDuration}))):t.duration,i.delay=i.tweens.length?(e=i.tweens,Math.min.apply(Math,e.map(function(t){return t.delay}))):t.delay,i.currentTime=0,i.progress=0,i.ended=!1,i},D=[],L=0,B=(r=function(){L=requestAnimationFrame(t)},t=function(t){if(D.length){for(var e=0;e<D.length;e++)D[e].tick(t);r()}else cancelAnimationFrame(L),L=0},r),F=function(t){var n=k(t),i={};return n.tick=function(t){n.ended=!1,i.start||(i.start=t),i.current=Math.min(Math.max(i.last+t-i.start,0),n.duration),R(n,i.current);var e=n.settings;i.current>=n.delay&&(e.begin&&e.begin(n),e.begin=void 0,e.update&&e.update(n)),i.current>=n.duration&&(e.loop?(i.start=t,"alternate"===e.direction&&A(n,!0),p.num(e.loop)&&e.loop--):(n.ended=!0,n.pause(),e.complete&&e.complete(n)),i.last=0)},n.seek=function(t){R(n,t/100*n.duration)},n.pause=function(){M(n).elements.forEach(function(t){t.style.removeProperty("will-change")});var t=D.indexOf(n);-1<t&&D.splice(t,1)},n.play=function(t){n.pause(),t&&(n=v(k(v(t,n.settings)),n)),i.start=0,i.last=n.ended?0:n.currentTime;var e,r=n.settings;"reverse"===r.direction&&A(n),"alternate"!==r.direction||r.loop||(r.loop=1),(e=M(n)).elements.forEach(function(t){t.style.willChange=e.properties}),D.push(n),L||B()},n.restart=function(){n.reversed&&A(n),n.pause(),n.seek(0),n.play()},n.settings.autoplay&&n.play(),n};return F.version="1.1.3",F.speed=1,F.list=D,F.remove=function(t){for(var e=l(p.arr(t)?t.map(m):m(t)),r=D.length-1;0<=r;r--)for(var n=D[r],i=n.tweens,o=i.length-1;0<=o;o--)for(var s=i[o].animatables,a=s.length-1;0<=a;a--)d(e,s[a].target)&&(s.splice(a,1),s.length||i.splice(o,1),i.length||n.pause())},F.easings=a,F.getValue=T,F.path=function(t){var e=p.str(t)?h(t)[0]:t;return{path:e,value:e.getTotalLength()}},F.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},F},"function"==typeof define&&define.amd?define([],i):"object"==typeof e&&e.exports?e.exports=i():n.anime=i()},{}],10:[function(t,e,r){e.exports=function(t,e){return Array.prototype.slice.call(t,e)}},{}],11:[function(t,e,r){"use strict";"use restrict";function n(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}r.INT_BITS=32,r.INT_MAX=2147483647,r.INT_MIN=-1<<31,r.sign=function(t){return(0<t)-(t<0)},r.abs=function(t){var e=t>>31;return(t^e)-e},r.min=function(t,e){return e^(t^e)&-(t<e)},r.max=function(t,e){return t^(t^e)&-(t<e)},r.isPow2=function(t){return!(t&t-1||!t)},r.log2=function(t){var e,r;return e=(65535<t)<<4,e|=r=(255<(t>>>=e))<<3,e|=r=(15<(t>>>=r))<<2,(e|=r=(3<(t>>>=r))<<1)|(t>>>=r)>>1},r.log10=function(t){return 1e9<=t?9:1e8<=t?8:1e7<=t?7:1e6<=t?6:1e5<=t?5:1e4<=t?4:1e3<=t?3:100<=t?2:10<=t?1:0},r.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)},r.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},r.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var i=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(i),r.reverse=function(t){return i[255&t]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},r.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},r.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},r.interleave3=function(t,e,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},r.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},r.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},{}],12:[function(t,e,r){"use strict";var n=t("ticky");e.exports=function(t,e,r){t&&n(function(){t.apply(r||null,e||[])})}},{ticky:208}],13:[function(t,e,r){"use strict";var a=t("atoa"),u=t("./debounce");e.exports=function(i,t){var o=t||{},s={};return void 0===i&&(i={}),i.on=function(t,e){return s[t]?s[t].push(e):s[t]=[e],i},i.once=function(t,e){return e._once=!0,i.on(t,e),i},i.off=function(t,e){var r=arguments.length;if(1===r)delete s[t];else if(0===r)s={};else{var n=s[t];if(!n)return i;n.splice(n.indexOf(e),1)}return i},i.emit=function(){var t=a(arguments);return i.emitterSnapshot(t.shift()).apply(this,t)},i.emitterSnapshot=function(n){var t=(s[n]||[]).slice(0);return function(){var e=a(arguments),r=this||i;if("error"===n&&!1!==o.throws&&!t.length)throw 1===e.length?e[0]:e;return t.forEach(function(t){o.async?u(t,e,r):t.apply(r,e),t._once&&i.off(n,t)}),i}},i}},{"./debounce":12,atoa:10}],14:[function(r,n,t){(function(h){"use strict";function l(t,e,r){var n=function(t,e,r){var n,i;for(n=0;n<c.length;n++)if((i=c[n]).element===t&&i.type===e&&i.fn===r)return n}(t,e,r);if(n){var i=c[n].wrapper;return c.splice(n,1),i}}var o=r("custom-event"),s=r("./eventmap"),a=h.document,t=function(t,e,r,n){return t.addEventListener(e,r,n)},e=function(t,e,r,n){return t.removeEventListener(e,r,n)},c=[];h.addEventListener||(t=function(t,e,r){return t.attachEvent("on"+e,(s=l(n=t,i=e,o=r)||(a=n,u=o,function(t){var e=t||h.event;e.target=e.target||e.srcElement,e.preventDefault=e.preventDefault||function(){e.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){e.cancelBubble=!0},e.which=e.which||e.keyCode,u.call(a,e)}),c.push({wrapper:s,element:n,type:i,fn:o}),s));var n,i,o,s,a,u},e=function(t,e,r){var n=l(t,e,r);if(n)return t.detachEvent("on"+e,n)}),n.exports={add:t,remove:e,fabricate:function(t,e,r){var n,i=-1===s.indexOf(e)?new o(e,{detail:r}):(a.createEvent?(n=a.createEvent("Event")).initEvent(e,!0,!0):a.createEventObject&&(n=a.createEventObject()),n);t.dispatchEvent?t.dispatchEvent(i):t.fireEvent("on"+e,i)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":15,"custom-event":16}],15:[function(t,i,e){(function(t){"use strict";var e=[],r="",n=/^on/;for(r in t)n.test(r)&&e.push(r.slice(2));i.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(t,r,e){(function(t){var e=t.CustomEvent;r.exports=function(){try{var t=new e("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?e:"function"==typeof document.createEvent?function(t,e){var r=document.createEvent("CustomEvent");return e?r.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):r.initCustomEvent(t,!1,!1,void 0),r}:function(t,e){var r=document.createEventObject();return r.type=t,e?(r.bubbles=Boolean(e.bubbles),r.cancelable=Boolean(e.cancelable),r.detail=e.detail):(r.bubbles=!1,r.cancelable=!1,r.detail=void 0),r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(t,e,r){e.exports=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(0<e)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(0<t.indexOf("Trident/")){var r=t.indexOf("rv:");return parseInt(t.substring(r+3,t.indexOf(".",r)),10)}var n=t.indexOf("Edge/");return 0<n&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)}},{}],18:[function(t,e,r){"use strict";function n(t){var e=i[t];return e?e.lastIndex=0:i[t]=e=new RegExp(o+t+s,"g"),e}var i={},o="(?:^|\\s)",s="(?:\\s|$)";e.exports={add:function(t,e){var r=t.className;r.length?n(e).test(r)||(t.className+=" "+e):t.className=e},rm:function(t,e){t.className=t.className.replace(n(e)," ").trim()}}},{}],19:[function(t,e,r){(function(i){"use strict";function N(t,e,r,n){i.navigator.pointerEnabled?Q[e](t,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[r],n):i.navigator.msPointerEnabled?Q[e](t,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[r],n):(Q[e](t,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[r],n),Q[e](t,r,n))}function j(t){if(void 0!==t.touches)return t.touches.length;if(void 0!==t.which&&0!==t.which)return t.which;if(void 0!==t.buttons)return t.buttons;var e=t.button;return void 0!==e?1&e?1:2&e?3:4&e?2:0:void 0}function U(t,e){return void 0!==i[e]?i[e]:tt.clientHeight?tt[t]:$.body[t]}function q(t,e,r){var n,i=t||{},o=i.className;return i.className+=" gu-hide",n=$.elementFromPoint(e,r),i.className=o,n}function W(){return!1}function X(){return!0}function H(t){return t.width||t.right-t.left}function z(t){return t.height||t.bottom-t.top}function G(t){return t.parentNode===$?null:t.parentNode}function Y(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||function t(e){return!!e&&"false"!==e.contentEditable&&("true"===e.contentEditable||t(G(e)))}(t)}function V(e){return e.nextElementSibling||function(){for(var t=e;(t=t.nextSibling)&&1!==t.nodeType;);return t}()}function K(t,e){var r,n=(r=e).targetTouches&&r.targetTouches.length?r.targetTouches[0]:r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,i={pageX:"clientX",pageY:"clientY"};return t in i&&!(t in n)&&i[t]in n&&(t=i[t]),n[t]}var J=t("contra/emitter"),Q=t("crossvent"),Z=t("./classes"),$=document,tt=$.documentElement;e.exports=function(t,e){function s(t){return-1!==F.containers.indexOf(t)||B.isContainer(t)}function r(t){var e=t?"remove":"add";N(tt,e,"mousedown",i),N(tt,e,"mouseup",f)}function a(t){N(tt,t?"remove":"add","mousemove",o)}function u(t){var e=t?"remove":"add";Q[e](tt,"selectstart",n),Q[e](tt,"click",n)}function n(t){D&&t.preventDefault()}function i(t){if(P=t.clientX,A=t.clientY,1===j(t)&&!t.metaKey&&!t.ctrlKey){var e=t.target,r=h(e);r&&(D=r,a(),"mousedown"===t.type&&(Y(e)?e.focus():t.preventDefault()))}}function o(t){if(D){if(0===j(t))return void f({});if(void 0===t.clientX||t.clientX!==P||void 0===t.clientY||t.clientY!==A){if(B.ignoreInputTextSelection){var e=K("clientX",t),r=K("clientY",t);if(Y($.elementFromPoint(e,r)))return}var n=D;a(!0),u(),c(),l(n);var i={left:(o=S.getBoundingClientRect()).left+U("scrollLeft","pageXOffset"),top:o.top+U("scrollTop","pageYOffset")};C=K("pageX",t)-i.left,O=K("pageY",t)-i.top,Z.add(R||S,"gu-transit"),function(){if(!T){var t=S.getBoundingClientRect();(T=S.cloneNode(!0)).style.width=H(t)+"px",T.style.height=z(t)+"px",Z.rm(T,"gu-transit"),Z.add(T,"gu-mirror"),B.mirrorContainer.appendChild(T),N(tt,"add","mousemove",x),Z.add(B.mirrorContainer,"gu-unselectable"),F.emit("cloned",T,S,"mirror")}}(),x(t)}}var o}function h(t){if(!(F.dragging&&T||s(t))){for(var e=t;G(t)&&!1===s(G(t));){if(B.invalid(t,e))return;if(!(t=G(t)))return}var r=G(t);if(r&&!B.invalid(t,e)&&B.moves(t,r,e,V(t)))return{item:t,source:r}}}function l(t){var e,r;e=t.item,r=t.source,("boolean"==typeof B.copy?B.copy:B.copy(e,r))&&(R=t.item.cloneNode(!0),F.emit("cloned",R,t.item,"copy")),E=t.source,S=t.item,M=I=V(t.item),F.dragging=!0,F.emit("drag",S,E)}function c(){if(F.dragging){var t=R||S;p(t,G(t))}}function d(){a(!(D=!1)),u(!0)}function f(t){if(d(),F.dragging){var e=R||S,r=K("clientX",t),n=K("clientY",t),i=b(q(T,r,n),r,n);i&&(R&&B.copySortSource||!R||i!==E)?p(e,i):B.removeOnSpill?m():g()}}function p(t,e){var r=G(t);R&&B.copySortSource&&e===E&&r.removeChild(S),y(e)?F.emit("cancel",t,E,E):F.emit("drop",t,e,E,I),v()}function m(){if(F.dragging){var t=R||S,e=G(t);e&&e.removeChild(t),F.emit(R?"cancel":"remove",t,e,E),v()}}function g(t){if(F.dragging){var e=0<arguments.length?t:B.revertOnSpill,r=R||S,n=G(r),i=y(n);!1===i&&e&&(R?n&&n.removeChild(R):E.insertBefore(r,M)),i||e?F.emit("cancel",r,E,E):F.emit("drop",r,n,E,I),v()}}function v(){var t=R||S;d(),T&&(Z.rm(B.mirrorContainer,"gu-unselectable"),N(tt,"remove","mousemove",x),G(T).removeChild(T),T=null),t&&Z.rm(t,"gu-transit"),k&&clearTimeout(k),F.dragging=!1,L&&F.emit("out",t,L,E),F.emit("dragend",t),E=S=R=M=I=k=L=null}function y(t,e){var r;return r=void 0!==e?e:T?I:V(R||S),t===E&&r===M}function b(r,n,i){for(var o=r;o&&!function(){if(!1===s(o))return!1;var t=w(o,r),e=_(o,t,n,i);return!!y(o,e)||B.accepts(S,o,E,e)}();)o=G(o);return o}function x(t){function e(t){F.emit(t,s,L,E)}if(T){t.preventDefault();var r=K("clientX",t),n=K("clientY",t),i=r-C,o=n-O;T.style.left=i+"px",T.style.top=o+"px";var s=R||S,a=q(T,r,n),u=b(a,r,n),h=null!==u&&u!==L;(h||null===u)&&(L&&e("out"),L=u,h&&e("over"));var l=G(s);if(u===E&&R&&!B.copySortSource)return void(l&&l.removeChild(s));var c,d=w(u,a);if(null!==d)c=_(u,d,r,n);else{if(!0!==B.revertOnSpill||R)return void(R&&l&&l.removeChild(s));c=M,u=E}(null===c&&h||c!==s&&c!==V(s))&&(I=c,u.insertBefore(s,c),F.emit("shadow",s,u,E))}}function w(t,e){for(var r=e;r!==t&&G(r)!==t;)r=G(r);return r===tt?null:r}function _(i,t,o,s){var e,a="horizontal"===B.direction;return t!==i?(e=t.getBoundingClientRect(),(a?o>e.left+H(e)/2:s>e.top+z(e)/2)?V(t):t):function(){var t,e,r,n=i.children.length;for(t=0;t<n;t++){if(r=(e=i.children[t]).getBoundingClientRect(),a&&r.left+r.width/2>o)return e;if(!a&&r.top+r.height/2>s)return e}return null}()}1===arguments.length&&!1===Array.isArray(t)&&(e=t,t=[]);var T,E,S,C,O,P,A,M,I,R,k,D,L=null,B=e||{};void 0===B.moves&&(B.moves=X),void 0===B.accepts&&(B.accepts=X),void 0===B.invalid&&(B.invalid=function(){return!1}),void 0===B.containers&&(B.containers=t||[]),void 0===B.isContainer&&(B.isContainer=W),void 0===B.copy&&(B.copy=!1),void 0===B.copySortSource&&(B.copySortSource=!1),void 0===B.revertOnSpill&&(B.revertOnSpill=!1),void 0===B.removeOnSpill&&(B.removeOnSpill=!1),void 0===B.direction&&(B.direction="vertical"),void 0===B.ignoreInputTextSelection&&(B.ignoreInputTextSelection=!0),void 0===B.mirrorContainer&&(B.mirrorContainer=$.body);var F=J({containers:B.containers,start:function(t){var e=h(t);e&&l(e)},end:c,cancel:g,remove:m,destroy:function(){r(!0),f({})},canMove:function(t){return!!h(t)},dragging:!1});return!0===B.removeOnSpill&&F.on("over",function(t){Z.rm(t,"gu-hide")}).on("out",function(t){F.dragging&&Z.add(t,"gu-hide")}),r(),F}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":18,"contra/emitter":13,crossvent:14}],20:[function(t,e,r){"use strict";function n(t,e,r){r=r||2;var n,i,o,s,a,u,h,l=e&&e.length,c=l?e[0]*r:t.length,d=m(t,0,c,r,!0),f=[];if(!d)return f;if(l&&(d=function(t,e,r,n){var i,o,s,a,u,h=[];for(i=0,o=e.length;i<o;i++)s=e[i]*n,a=i<o-1?e[i+1]*n:t.length,(u=m(t,s,a,n,!1))===u.next&&(u.steiner=!0),h.push(w(u));for(h.sort(y),i=0;i<h.length;i++)b(h[i],r),r=g(r,r.next);return r}(t,e,d,r)),t.length>80*r){n=o=t[0],i=s=t[1];for(var p=r;p<c;p+=r)(a=t[p])<n&&(n=a),(u=t[p+1])<i&&(i=u),o<a&&(o=a),s<u&&(s=u);h=0!==(h=Math.max(o-n,s-i))?1/h:0}return v(d,f,r,n,i,h),f}function m(t,e,r,n,i){var o,s;if(i===0<O(t,e,r,n))for(o=e;o<r;o+=n)s=u(o,t[o],t[o+1],s);else for(o=r-n;e<=o;o-=n)s=u(o,t[o],t[o+1],s);return s&&a(s,s.next)&&(C(s),s=s.next),s}function g(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!a(n,n.next)&&0!==T(n.prev,n,n.next))n=n.next;else{if(C(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function v(t,e,r,n,i,o,s){if(t){!s&&o&&function(t,e,r,n){var i=t;for(;null===i.z&&(i.z=x(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next,i!==t;);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,s,a,u,h=1;do{for(r=t,o=t=null,s=0;r;){for(s++,n=r,e=a=0;e<h&&(a++,n=n.nextZ);e++);for(u=h;0<a||0<u&&n;)0!==a&&(0===u||!n||r.z<=n.z)?(r=(i=r).nextZ,a--):(n=(i=n).nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,h*=2}while(1<s)}(i)}(t,n,i,o);for(var a,u,h=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?c(t,n,i,o):l(t))e.push(a.i/r),e.push(t.i/r),e.push(u.i/r),C(t),t=u.next,h=u.next;else if((t=u)===h){s?1===s?v(t=d(t,e,r),e,r,n,i,o,2):2===s&&f(t,e,r,n,i,o):v(g(t),e,r,n,i,o,1);break}}}function l(t){var e=t.prev,r=t,n=t.next;if(0<=T(e,r,n))return!1;for(var i=t.next.next;i!==t.prev;){if(_(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&0<=T(i.prev,i,i.next))return!1;i=i.next}return!0}function c(t,e,r,n){var i=t.prev,o=t,s=t.next;if(0<=T(i,o,s))return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,h=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,l=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,c=x(a,u,e,r,n),d=x(h,l,e,r,n),f=t.prevZ,p=t.nextZ;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&_(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&0<=T(f.prev,f,f.next))return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&_(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=T(p.prev,p,p.next))return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&_(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&0<=T(f.prev,f,f.next))return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&_(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=T(p.prev,p,p.next))return!1;p=p.nextZ}return!0}function d(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!a(i,o)&&p(i,n,n.next,o)&&E(i,o)&&E(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),C(n),C(n.next),n=t=o),n=n.next}while(n!==t);return n}function f(t,e,r,n,i,o){var s,a,u=t;do{for(var h=u.next.next;h!==u.prev;){if(u.i!==h.i&&(a=h,(s=u).next.i!==a.i&&s.prev.i!==a.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&p(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(s,a)&&E(s,a)&&E(a,s)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;for(;r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next,r!==t;);return n}(s,a))){var l=S(u,h);return u=g(u,u.next),l=g(l,l.next),v(u,e,r,n,i,o),void v(l,e,r,n,i,o)}h=h.next}u=u.next}while(u!==t)}function y(t,e){return t.x-e.x}function b(t,e){if(e=function(t,e){var r,n=e,i=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&s<a){if((s=a)===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===s)return r.prev;var u,h=r,l=r.x,c=r.y,d=1/0;for(n=r.next;n!==h;)i>=n.x&&n.x>=l&&i!==n.x&&_(o<c?i:s,o,l,c,o<c?s:i,o,n.x,n.y)&&((u=Math.abs(o-n.y)/(i-n.x))<d||u===d&&n.x>r.x)&&E(n,t)&&(r=n,d=u),n=n.next;return r}(t,e)){var r=S(e,t);g(r,r.next)}}function x(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function w(t){for(var e=t,r=t;e.x<r.x&&(r=e),(e=e.next)!==t;);return r}function _(t,e,r,n,i,o,s,a){return 0<=(i-s)*(e-a)-(t-s)*(o-a)&&0<=(t-s)*(n-a)-(r-s)*(e-a)&&0<=(r-s)*(o-a)-(i-s)*(n-a)}function T(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function a(t,e){return t.x===e.x&&t.y===e.y}function p(t,e,r,n){return!!(a(t,e)&&a(r,n)||a(t,n)&&a(r,e))||0<T(t,e,r)!=0<T(t,e,n)&&0<T(r,n,t)!=0<T(r,n,e)}function E(t,e){return T(t.prev,t,t.next)<0?0<=T(t,e,t.next)&&0<=T(t,t.prev,e):T(t,e,t.prev)<0||T(t,t.next,e)<0}function S(t,e){var r=new s(t.i,t.x,t.y),n=new s(e.i,e.x,e.y),i=t.next,o=e.prev;return(t.next=e).prev=t,(r.next=i).prev=r,(n.next=r).prev=n,(o.next=n).prev=o,n}function u(t,e,r,n){var i=new s(t,e,r);return n?(i.next=n.next,(i.prev=n).next.prev=i,n.next=i):(i.prev=i).next=i,i}function C(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function s(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(t,e,r,n){for(var i=0,o=e,s=r-n;o<r;o+=n)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}e.exports=n,(e.exports.default=n).deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,s=Math.abs(O(t,0,o,r));if(i)for(var a=0,u=e.length;a<u;a++){var h=e[a]*r,l=a<u-1?e[a+1]*r:t.length;s-=Math.abs(O(t,h,l,r))}var c=0;for(a=0;a<n.length;a+=3){var d=n[a]*r,f=n[a+1]*r,p=n[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},n.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);0<i&&(n+=t[i-1].length,r.holes.push(n))}return r}},{}],21:[function(t,e,r){"use strict";function h(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function n(){this._events=new h,this._eventsCount=0}var i=Object.prototype.hasOwnProperty,f="~";Object.create&&(h.prototype=Object.create(null),(new h).__proto__||(f=!1)),n.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)i.call(t,e)&&r.push(f?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},n.prototype.listeners=function(t,e){var r=f?f+t:t,n=this._events[r];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},n.prototype.emit=function(t,e,r,n,i,o){var s=f?f+t:t;if(!this._events[s])return!1;var a,u,h=this._events[s],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,n),!0;case 5:return h.fn.call(h.context,e,r,n,i),!0;case 6:return h.fn.call(h.context,e,r,n,i,o),!0}for(u=1,a=new Array(l-1);u<l;u++)a[u-1]=arguments[u];h.fn.apply(h.context,a)}else{var c,d=h.length;for(u=0;u<d;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),l){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,r);break;case 4:h[u].fn.call(h[u].context,e,r,n);break;default:if(!a)for(c=1,a=new Array(l-1);c<l;c++)a[c-1]=arguments[c];h[u].fn.apply(h[u].context,a)}}return!0},n.prototype.on=function(t,e,r){var n=new o(e,r||this),i=f?f+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],n]:this._events[i].push(n):(this._events[i]=n,this._eventsCount++),this},n.prototype.once=function(t,e,r){var n=new o(e,r||this,!0),i=f?f+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],n]:this._events[i].push(n):(this._events[i]=n,this._eventsCount++),this},n.prototype.removeListener=function(t,e,r,n){var i=f?f+t:t;if(!this._events[i])return this;if(!e)return 0==--this._eventsCount?this._events=new h:delete this._events[i],this;var o=this._events[i];if(o.fn)o.fn!==e||n&&!o.once||r&&o.context!==r||(0==--this._eventsCount?this._events=new h:delete this._events[i]);else{for(var s=0,a=[],u=o.length;s<u;s++)(o[s].fn!==e||n&&!o[s].once||r&&o[s].context!==r)&&a.push(o[s]);a.length?this._events[i]=1===a.length?a[0]:a:0==--this._eventsCount?this._events=new h:delete this._events[i]}return this},n.prototype.removeAllListeners=function(t){var e;return t?(e=f?f+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new h:delete this._events[e])):(this._events=new h,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prototype.setMaxListeners=function(){return this},n.prefixed=f,n.EventEmitter=n,void 0!==e&&(e.exports=n)},{}],22:[function(t,e,r){var n=n||function(f){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=f.document,p=function(){return f.URL||f.webkitURL||f},m=t.createElementNS("http://www.w3.org/1999/xhtml","a"),g="download"in m,v=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),y=f.webkitRequestFileSystem,b=f.requestFileSystem||y||f.mozRequestFileSystem,o=function(t){(f.setImmediate||f.setTimeout)(function(){throw t},0)},x=0,w=function(t){setTimeout(function(){"string"==typeof t?p().revokeObjectURL(t):t.remove()},4e4)},_=function(t,e,r){for(var n=(e=[].concat(e)).length;n--;){var i=t["on"+e[n]];if("function"==typeof i)try{i.call(t,r||t)}catch(t){o(t)}}},T=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["",t],{type:t.type}):t},n=function(n,r,t){t||(n=T(n));var i,o,e,s=this,a=n.type,u=!1,h=function(){_(s,"writestart progress write writeend".split(" "))},l=function(){if(o&&v&&"undefined"!=typeof FileReader){var e=new FileReader;return e.onloadend=function(){var t=e.result;o.location.href="data:attachment/file"+t.slice(t.search(/[,;]/)),s.readyState=s.DONE,h()},e.readAsDataURL(n),void(s.readyState=s.INIT)}!u&&i||(i=p().createObjectURL(n)),o?o.location.href=i:void 0===f.open(i,"_blank")&&v&&(f.location.href=i),s.readyState=s.DONE,h(),w(i)},c=function(t){return function(){if(s.readyState!==s.DONE)return t.apply(this,arguments)}},d={create:!0,exclusive:!1};return s.readyState=s.INIT,r||(r="download"),g?(i=p().createObjectURL(n),void setTimeout(function(){var t,e;m.href=i,m.download=r,t=m,e=new MouseEvent("click"),t.dispatchEvent(e),h(),w(i),s.readyState=s.DONE})):(f.chrome&&a&&"application/octet-stream"!==a&&(e=n.slice||n.webkitSlice,n=e.call(n,0,n.size,"application/octet-stream"),u=!0),y&&"download"!==r&&(r+=".download"),("application/octet-stream"===a||y)&&(o=f),b?(x+=n.size,void b(f.TEMPORARY,x,c(function(t){t.root.getDirectory("saved",d,c(function(t){var e=function(){t.getFile(r,d,c(function(r){r.createWriter(c(function(e){e.onwriteend=function(t){o.location.href=r.toURL(),s.readyState=s.DONE,_(s,"writeend",t),w(r)},e.onerror=function(){var t=e.error;t.code!==t.ABORT_ERR&&l()},"writestart progress write abort".split(" ").forEach(function(t){e["on"+t]=s["on"+t]}),e.write(n),s.abort=function(){e.abort(),s.readyState=s.DONE},s.readyState=s.WRITING}),l)}),l)};t.getFile(r,{create:!1},c(function(t){t.remove(),e()}),c(function(t){t.code===t.NOT_FOUND_ERR?e():l()}))}),l)}),l)):void l())},e=n.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,r){return r||(t=T(t)),navigator.msSaveOrOpenBlob(t,e||"download")}:(e.abort=function(){this.readyState=this.DONE,_(this,"abort")},e.readyState=e.INIT=0,e.WRITING=1,e.DONE=2,e.error=e.onwritestart=e.onprogress=e.onwrite=e.onabort=e.onerror=e.onwriteend=null,function(t,e,r){return new n(t,e,r)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==e&&e.exports?e.exports.saveAs=n:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define([],function(){return n})},{}],23:[function(t,e,r){var n,i,o,s,a,u,h,l,c,d,f,p,m,g,v,y,b,x,w;n=this,i=/iPhone/i,o=/iPod/i,s=/iPad/i,a=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,u=/Android/i,h=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,l=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,c=/Windows Phone/i,d=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,f=/BlackBerry/i,p=/BB10/i,m=/Opera Mini/i,g=/(CriOS|Chrome)(?=.*\bMobile\b)/i,v=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,y=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),b=function(t,e){return t.test(e)},x=function(t){var e=t||navigator.userAgent,r=e.split("[FBAN");if(void 0!==r[1]&&(e=r[0]),void 0!==(r=e.split("Twitter"))[1]&&(e=r[0]),this.apple={phone:b(i,e),ipod:b(o,e),tablet:!b(i,e)&&b(s,e),device:b(i,e)||b(o,e)||b(s,e)},this.amazon={phone:b(h,e),tablet:!b(h,e)&&b(l,e),device:b(h,e)||b(l,e)},this.android={phone:b(h,e)||b(a,e),tablet:!b(h,e)&&!b(a,e)&&(b(l,e)||b(u,e)),device:b(h,e)||b(l,e)||b(a,e)||b(u,e)},this.windows={phone:b(c,e),tablet:b(d,e),device:b(c,e)||b(d,e)},this.other={blackberry:b(f,e),blackberry10:b(p,e),opera:b(m,e),firefox:b(v,e),chrome:b(g,e),device:b(f,e)||b(p,e)||b(m,e)||b(v,e)||b(g,e)},this.seven_inch=b(y,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},w=function(){var t=new x;return t.Class=x,t},void 0!==e&&e.exports&&"undefined"==typeof window?e.exports=x:void 0!==e&&e.exports&&"undefined"!=typeof window?e.exports=w():"function"==typeof define&&define.amd?define("isMobile",[],n.isMobile=w()):n.isMobile=w()},{}],24:[function(ut,pt,ht){(function(at){var t,e;t=this,e=function(){"use strict";var ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=("function"==typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator,function(st){function at(o){var s={};this.subscribe=function(t,e,r){if("function"!=typeof e)return!1;s.hasOwnProperty(t)||(s[t]={});var n=Math.random().toString(35);return s[t][n]=[e,!!r],n},this.unsubscribe=function(t){for(var e in s)if(s[e][t])return delete s[e][t],!0;return!1},this.publish=function(t){if(s.hasOwnProperty(t)){var e=Array.prototype.slice.call(arguments,1),r=[];for(var n in s[t]){var i=s[t][n];try{i[0].apply(o,e)}catch(t){st.console}i[1]&&r.push(n)}r.length&&r.forEach(this.unsubscribe)}}}function ut(t,e,r,n){var E={};"object"===(void 0===t?"undefined":ct(t))&&(t=(E=t).orientation,e=E.unit||e,r=E.format||r,n=E.compress||E.compressPdf||n),e=e||"mm",r=r||"a4",t=(""+(t||"P")).toLowerCase(),(""+r).toLowerCase();var S,C,O,i,c,P,o,s,a,u,d=!!n&&"function"==typeof Uint8Array,A=E.textColor||"0 g",h=E.drawColor||"0 G",M=E.fontSize||16,I=E.lineHeight||1.15,l=E.lineWidth||.200025,f=2,p=!1,m=[],g={},v={},y=0,b=[],x=[],w=[],_=[],T=[],R=0,k=0,D=0,L={title:"",subject:"",author:"",keywords:"",creator:""},B={},F=new at(B),N=E.hotfixes||[],j=function(t){return t.toFixed(2)},U=function(t){return t.toFixed(3)},q=function(t){return("0"+parseInt(t)).slice(-2)},W=function(t){p?b[i].push(t):(D+=t.length+1,_.push(t))},X=function(){return m[++f]=D,W(f+" 0 obj"),f},H=function(t){W("stream"),W(t),W("endstream")},z=function(){for(var t in W("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),W("/Font <<"),g)g.hasOwnProperty(t)&&W("/"+t+" "+g[t].objectNumber+" 0 R");W(">>"),W("/XObject <<"),F.publish("putXobjectDict"),W(">>")},G=function(){(function(){for(var t in g)g.hasOwnProperty(t)&&((e=g[t]).objectNumber=X(),W("<</BaseFont/"+e.PostScriptName+"/Type/Font"),"string"==typeof e.encoding&&W("/Encoding/"+e.encoding),W("/Subtype/Type1>>"),W("endobj"));var e})(),F.publish("putResources"),m[2]=D,W("2 0 obj"),W("<<"),z(),W(">>"),W("endobj"),F.publish("postPutResources")},Y=function(t,e,r){v.hasOwnProperty(e)||(v[e]={}),v[e][r]=t},V=function(t,e,r,n){var i="F"+(Object.keys(g).length+1).toString(10),o=g[i]={id:i,PostScriptName:t,fontName:e,fontStyle:r,encoding:n,metadata:{}};return Y(i,e,r),F.publish("addFont",o),i},K=function(t,e){return function(t,e){var r,n,i,o,s,a,u,h,l;if(i=(e=e||{}).sourceEncoding||"Unicode",s=e.outputEncoding,(e.autoencode||s)&&g[S].metadata&&g[S].metadata[i]&&g[S].metadata[i].encoding&&(o=g[S].metadata[i].encoding,!s&&g[S].encoding&&(s=g[S].encoding),!s&&o.codePages&&(s=o.codePages[0]),"string"==typeof s&&(s=o[s]),s)){for(u=!1,a=[],r=0,n=t.length;r<n;r++)(h=s[t.charCodeAt(r)])?a.push(String.fromCharCode(h)):a.push(t[r]),a[r].charCodeAt(0)>>8&&(u=!0);t=a.join("")}for(r=t.length;void 0===u&&0!==r;)t.charCodeAt(r-1)>>8&&(u=!0),r--;if(!u)return t;for(a=e.noBOM?[]:[254,255],r=0,n=t.length;r<n;r++){if((l=(h=t.charCodeAt(r))>>8)>>8)throw new Error("Character at position "+r+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");a.push(l),a.push(h-(l<<8))}return String.fromCharCode.apply(void 0,a)}(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},J=function(){(function(t,e){var r="string"==typeof e&&e.toLowerCase();if("string"==typeof t){var n=t.toLowerCase();lt.hasOwnProperty(n)&&(t=lt[n][0]/C,e=lt[n][1]/C)}if(Array.isArray(t)&&(e=t[1],t=t[0]),r){switch(r.substr(0,1)){case"l":t<e&&(r="s");break;case"p":e<t&&(r="s")}"s"===r&&(O=t,t=e,e=O)}p=!0,b[++y]=[],w[y]={width:Number(t)||c,height:Number(e)||P},x[y]={},Q(y)}).apply(this,arguments),W(j(l*C)+" w"),W(h),0!==R&&W(R+" J"),0!==k&&W(k+" j"),F.publish("addPage",{pageNumber:y})},Q=function(t){0<t&&t<=y&&(c=w[i=t].width,P=w[t].height)},Z=function(t,e){var r;switch(t=void 0!==t?t:g[S].fontName,e=void 0!==e?e:g[S].fontStyle,void 0!==t&&(t=t.toLowerCase()),t){case"sans-serif":case"verdana":case"arial":case"helvetica":t="helvetica";break;case"fixed":case"monospace":case"terminal":case"courier":t="courier";break;case"serif":case"cursive":case"fantasy":default:t="times"}try{r=v[t][e]}catch(t){}return r||null==(r=v.times[e])&&(r=v.times.normal),r},$=function(){p=!1,f=2,D=0,_=[],m=[],T=[],F.publish("buildDocument"),W("%PDF-"+ht),function(){var t,e,r,n,i,o,s,a,u,h=[];for(s=st.adler32cs||ut.adler32cs,d&&void 0===s&&(d=!1),t=1;t<=y;t++){if(h.push(X()),a=(c=w[t].width)*C,u=(P=w[t].height)*C,W("<</Type /Page"),W("/Parent 1 0 R"),W("/Resources 2 0 R"),W("/MediaBox [0 0 "+j(a)+" "+j(u)+"]"),F.publish("putPage",{pageNumber:t,page:b[t]}),W("/Contents "+(f+1)+" 0 R"),W(">>"),W("endobj"),e=b[t].join("\n"),X(),d){for(r=[],n=e.length;n--;)r[n]=e.charCodeAt(n);o=s.from(e),(i=new ft(6)).append(new Uint8Array(r)),e=i.flush(),(r=new Uint8Array(e.length+6)).set(new Uint8Array([120,156])),r.set(e,2),r.set(new Uint8Array([255&o,o>>8&255,o>>16&255,o>>24&255]),e.length+2),e=String.fromCharCode.apply(null,r),W("<</Length "+e.length+" /Filter [/FlateDecode]>>")}else W("<</Length "+e.length+">>");H(e),W("endobj")}m[1]=D,W("1 0 obj"),W("<</Type /Pages");var l="/Kids [";for(n=0;n<y;n++)l+=h[n]+" 0 R ";W(l+"]"),W("/Count "+y),W(">>"),W("endobj"),F.publish("postPutPages")}(),function(){F.publish("putAdditionalObjects");for(var t=0;t<T.length;t++){var e=T[t];m[e.objId]=D,W(e.objId+" 0 obj"),W(e.content),W("endobj")}f+=T.length,F.publish("postPutAdditionalObjects")}(),G(),X(),W("<<"),function(){for(var t in W("/Producer (jsPDF "+ut.version+")"),L)L.hasOwnProperty(t)&&L[t]&&W("/"+t.substr(0,1).toUpperCase()+t.substr(1)+" ("+K(L[t])+")");var e=new Date,r=e.getTimezoneOffset(),n=r<0?"+":"-",i=Math.floor(Math.abs(r/60)),o=Math.abs(r%60),s=[n,q(i),"'",q(o),"'"].join("");W(["/CreationDate (D:",e.getFullYear(),q(e.getMonth()+1),q(e.getDate()),q(e.getHours()),q(e.getMinutes()),q(e.getSeconds()),s,")"].join(""))}(),W(">>"),W("endobj"),X(),W("<<"),function(){switch(W("/Type /Catalog"),W("/Pages 1 0 R"),s||(s="fullwidth"),s){case"fullwidth":W("/OpenAction [3 0 R /FitH null]");break;case"fullheight":W("/OpenAction [3 0 R /FitV null]");break;case"fullpage":W("/OpenAction [3 0 R /Fit]");break;case"original":W("/OpenAction [3 0 R /XYZ null null 1]");break;default:var t=""+s;"%"===t.substr(t.length-1)&&(s=parseInt(s)/100),"number"==typeof s&&W("/OpenAction [3 0 R /XYZ null null "+j(s)+"]")}switch(a||(a="continuous"),a){case"continuous":W("/PageLayout /OneColumn");break;case"single":W("/PageLayout /SinglePage");break;case"two":case"twoleft":W("/PageLayout /TwoColumnLeft");break;case"tworight":W("/PageLayout /TwoColumnRight")}o&&W("/PageMode /"+o),F.publish("putCatalog")}(),W(">>"),W("endobj");var t,e=D,r="0000000000";for(W("xref"),W("0 "+(f+1)),W(r+" 65535 f "),t=1;t<=f;t++){var n=m[t];W("function"==typeof n?(r+m[t]()).slice(-10)+" 00000 n ":(r+m[t]).slice(-10)+" 00000 n ")}return W("trailer"),W("<<"),W("/Size "+(f+1)),W("/Root "+f+" 0 R"),W("/Info "+(f-1)+" 0 R"),W(">>"),W("startxref"),W(""+e),W("%%EOF"),p=!0,_.join("\n")},tt=function(t){var e="S";return"F"===t?e="f":"FD"===t||"DF"===t?e="B":"f"!==t&&"f*"!==t&&"B"!==t&&"B*"!==t||(e=t),e},et=function(){for(var t=$(),e=t.length,r=new ArrayBuffer(e),n=new Uint8Array(r);e--;)n[e]=t.charCodeAt(e);return r},rt=function(){return new Blob([et()],{type:"application/pdf"})},nt=(((u=function(t,e){var r="dataur"===(""+t).substr(0,6)?"data:application/pdf;base64,"+btoa($()):0;switch(t){case void 0:return $();case"save":if(navigator.getUserMedia&&(void 0===st.URL||void 0===st.URL.createObjectURL))return B.output("dataurlnewwindow");dt(rt(),e),"function"==typeof dt.unload&&st.setTimeout&&setTimeout(dt.unload,911);break;case"arraybuffer":return et();case"blob":return rt();case"bloburi":case"bloburl":return st.URL&&st.URL.createObjectURL(rt())||void 0;case"datauristring":case"dataurlstring":return r;case"dataurlnewwindow":var n=st.open(r);if(n||"undefined"==typeof safari)return n;case"datauri":case"dataurl":return st.document.location.href=r;default:throw new Error('Output type "'+t+'" is not supported.')}}).foo=function(){try{return u.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var r="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!st.console)throw new Error(r);st.console.error(r,t),st.alert&&alert(r)}}).bar=u).foo,it=function(t){return!0===Array.isArray(N)&&-1<N.indexOf(t)};switch(e){case"pt":C=1;break;case"mm":C=72/25.4000508;break;case"cm":C=72/2.54000508;break;case"in":C=72;break;case"px":C=1==it("px_scaling")?.75:96/72;break;case"pc":case"em":C=12;break;case"ex":C=6;break;default:throw"Invalid unit: "+e}for(var ot in B.internal={pdfEscape:K,getStyle:tt,getFont:function(){return g[Z.apply(B,arguments)]},getFontSize:function(){return M},getLineHeight:function(){return M*I},write:function(t){W(1===arguments.length?t:Array.prototype.join.call(arguments," "))},getCoordinateString:function(t){return j(t*C)},getVerticalCoordinateString:function(t){return j((P-t)*C)},collections:{},newObject:X,newAdditionalObject:function(){var t=2*b.length+1,e={objId:t+=T.length,content:""};return T.push(e),e},newObjectDeferred:function(){return m[++f]=function(){return D},f},newObjectDeferredBegin:function(t){m[t]=D},putStream:H,events:F,scaleFactor:C,pageSize:{get width(){return c},get height(){return P}},output:function(t,e){return nt(t,e)},getNumberOfPages:function(){return b.length-1},pages:b,out:W,f2:j,getPageInfo:function(t){return{objId:2*(t-1)+3,pageNumber:t,pageContext:x[t]}},getCurrentPageInfo:function(){return{objId:2*(i-1)+3,pageNumber:i,pageContext:x[i]}},getPDFVersion:function(){return ht},hasHotfix:it},B.addPage=function(){return J.apply(this,arguments),this},B.setPage=function(){return Q.apply(this,arguments),this},B.insertPage=function(t){return this.addPage(),this.movePage(i,t),this},B.movePage=function(t,e){if(e<t){for(var r=b[t],n=w[t],i=x[t],o=t;e<o;o--)b[o]=b[o-1],w[o]=w[o-1],x[o]=x[o-1];b[e]=r,w[e]=n,x[e]=i,this.setPage(e)}else if(t<e){for(r=b[t],n=w[t],i=x[t],o=t;o<e;o++)b[o]=b[o+1],w[o]=w[o+1],x[o]=x[o+1];b[e]=r,w[e]=n,x[e]=i,this.setPage(e)}return this},B.deletePage=function(){return function(t){0<t&&t<=y&&(b.splice(t,1),w.splice(t,1),i>--y&&(i=y),this.setPage(i))}.apply(this,arguments),this},B.setDisplayMode=function(t,e,r){if(s=t,a=e,-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(o=r))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+r+'" is not recognized.');return this},B.text=function(t,e,r,n,i,o){function s(t){return t=t.split("\t").join(Array(E.TabLen||9).join(" ")),K(t,n)}"number"==typeof t&&(O=r,r=e,e=t,t=O),"string"==typeof t&&(t=t.match(/[\n\r]/)?t.split(/\r\n|\r|\n/g):[t]),"string"==typeof i&&(o=i,i=null),"string"==typeof n&&(o=n,n=null),"number"==typeof n&&(i=n,n=null);var a="",u="Td";if(i){i*=Math.PI/180;var h=Math.cos(i),l=Math.sin(i);a=[j(h),j(l),j(-1*l),j(h),""].join(" "),u="Tm"}"noBOM"in(n=n||{})||(n.noBOM=!0),"autoencode"in n||(n.autoencode=!0);var c,d="",f=this.internal.getCurrentPageInfo().pageContext;if(!0===n.stroke?!0!==f.lastTextWasStroke&&(d="1 Tr\n",f.lastTextWasStroke=!0):(f.lastTextWasStroke&&(d="0 Tr\n"),f.lastTextWasStroke=!1),void 0===this._runningPageHeight&&(this._runningPageHeight=0),"string"==typeof t)t=s(t);else{if("[object Array]"!==Object.prototype.toString.call(t))throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');for(var p=t.concat(),m=[],g=p.length;g--;)m.push(s(p.shift()));if(o){var v,y,b,x=M*I,w=t.map(function(t){return this.getStringUnitWidth(t)*M/C},this);if(b=Math.max.apply(Math,w),"center"===o)v=e-b/2,e-=w[0]/2;else{if("right"!==o)throw new Error('Unrecognized alignment option, use "center" or "right".');v=e-b,e-=w[0]}y=e,t=m[0];var _=1;for(g=m.length;_<g;_++){var T=b-w[_];"center"===o&&(T/=2),t+=") Tj\n"+(v-y+T)+" -"+x+" Td ("+m[_],y=v+T}}else t=m.join(") Tj\nT* (")}return c=j((P-r)*C),W("BT\n/"+S+" "+M+" Tf\n"+M*I+" TL\n"+d+A+"\n"+a+j(e*C)+" "+c+" "+u+"\n("+t+") Tj\nET"),this},B.lstext=function(t,e,r,n){for(var i=0,o=t.length;i<o;i++,e+=n)this.text(t[i],e,r);return this},B.line=function(t,e,r,n){return this.lines([[r-t,n-e]],t,e)},B.clip=function(){W("W"),W("S")},B.clip_fixed=function(t){W("evenodd"===t?"W*":"W"),W("n")},B.lines=function(t,e,r,n,i,o){var s,a,u,h,l,c,d,f,p,m,g;for("number"==typeof t&&(O=r,r=e,e=t,t=O),n=n||[1,1],W(U(e*C)+" "+U((P-r)*C)+" m "),s=n[0],a=n[1],h=t.length,m=e,g=r,u=0;u<h;u++)2===(l=t[u]).length?(m=l[0]*s+m,g=l[1]*a+g,W(U(m*C)+" "+U((P-g)*C)+" l")):(c=l[0]*s+m,d=l[1]*a+g,f=l[2]*s+m,p=l[3]*a+g,m=l[4]*s+m,g=l[5]*a+g,W(U(c*C)+" "+U((P-d)*C)+" "+U(f*C)+" "+U((P-p)*C)+" "+U(m*C)+" "+U((P-g)*C)+" c"));return o&&W(" h"),null!==i&&W(tt(i)),this},B.rect=function(t,e,r,n,i){return tt(i),W([j(t*C),j((P-e)*C),j(r*C),j(-n*C),"re"].join(" ")),null!==i&&W(tt(i)),this},B.triangle=function(t,e,r,n,i,o,s){return this.lines([[r-t,n-e],[i-r,o-n],[t-i,e-o]],t,e,[1,1],s,!0),this},B.roundedRect=function(t,e,r,n,i,o,s){var a=4/3*(Math.SQRT2-1);return this.lines([[r-2*i,0],[i*a,0,i,o-o*a,i,o],[0,n-2*o],[0,o*a,-i*a,o,-i,o],[2*i-r,0],[-i*a,0,-i,-o*a,-i,-o],[0,2*o-n],[0,-o*a,i*a,-o,i,-o]],t+i,e,[1,1],s),this},B.ellipse=function(t,e,r,n,i){var o=4/3*(Math.SQRT2-1)*r,s=4/3*(Math.SQRT2-1)*n;return W([j((t+r)*C),j((P-e)*C),"m",j((t+r)*C),j((P-(e-s))*C),j((t+o)*C),j((P-(e-n))*C),j(t*C),j((P-(e-n))*C),"c"].join(" ")),W([j((t-o)*C),j((P-(e-n))*C),j((t-r)*C),j((P-(e-s))*C),j((t-r)*C),j((P-e)*C),"c"].join(" ")),W([j((t-r)*C),j((P-(e+s))*C),j((t-o)*C),j((P-(e+n))*C),j(t*C),j((P-(e+n))*C),"c"].join(" ")),W([j((t+o)*C),j((P-(e+n))*C),j((t+r)*C),j((P-(e+s))*C),j((t+r)*C),j((P-e)*C),"c"].join(" ")),null!==i&&W(tt(i)),this},B.circle=function(t,e,r,n){return this.ellipse(t,e,r,r,n)},B.setProperties=function(t){for(var e in L)L.hasOwnProperty(e)&&t[e]&&(L[e]=t[e]);return this},B.setFontSize=function(t){return M=t,this},B.setFont=function(t,e){return S=Z(t,e),this},B.setFontStyle=B.setFontType=function(t){return S=Z(void 0,t),this},B.getFontList=function(){var t,e,r,n={};for(t in v)if(v.hasOwnProperty(t))for(e in n[t]=r=[],v[t])v[t].hasOwnProperty(e)&&r.push(e);return n},B.addFont=function(t,e,r){V(t,e,r,"StandardEncoding")},B.setLineWidth=function(t){return W((t*C).toFixed(2)+" w"),this},B.setDrawColor=function(t,e,r,n){var i;return i=void 0===e||void 0===n&&t===e===r?"string"==typeof t?t+" G":j(t/255)+" G":void 0===n?"string"==typeof t?[t,e,r,"RG"].join(" "):[j(t/255),j(e/255),j(r/255),"RG"].join(" "):"string"==typeof t?[t,e,r,n,"K"].join(" "):[j(t),j(e),j(r),j(n),"K"].join(" "),W(i),this},B.setFillColor=function(t,e,r,n){var i;return void 0===e||void 0===n&&t===e===r?i="string"==typeof t?t+" g":j(t/255)+" g":void 0===n||"object"===(void 0===n?"undefined":ct(n))?(i="string"==typeof t?[t,e,r,"rg"].join(" "):[j(t/255),j(e/255),j(r/255),"rg"].join(" "),n&&0===n.a&&(i=["255","255","255","rg"].join(" "))):i="string"==typeof t?[t,e,r,n,"k"].join(" "):[j(t),j(e),j(r),j(n),"k"].join(" "),W(i),this},B.setTextColor=function(t,e,r){if("string"==typeof t&&/^#[0-9A-Fa-f]{6}$/.test(t)){var n=parseInt(t.substr(1),16);t=n>>16&255,e=n>>8&255,r=255&n}return A=0===t&&0===e&&0===r||void 0===e?U(t/255)+" g":[U(t/255),U(e/255),U(r/255),"rg"].join(" "),this},B.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},B.setLineCap=function(t){var e=this.CapJoinStyles[t];if(void 0===e)throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return W((R=e)+" J"),this},B.setLineJoin=function(t){var e=this.CapJoinStyles[t];if(void 0===e)throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return W((k=e)+" j"),this},B.output=nt,B.save=function(t){B.output("save",t)},ut.API)ut.API.hasOwnProperty(ot)&&("events"===ot&&ut.API.events.length?function(t,e){var r,n,i;for(i=e.length-1;-1!==i;i--)r=e[i][0],n=e[i][1],t.subscribe.apply(t,[r].concat("function"==typeof n?[n]:n))}(F,ut.API.events):B[ot]=ut.API[ot]);return function(){for(var t=[["Helvetica","helvetica","normal"],["Helvetica-Bold","helvetica","bold"],["Helvetica-Oblique","helvetica","italic"],["Helvetica-BoldOblique","helvetica","bolditalic"],["Courier","courier","normal"],["Courier-Bold","courier","bold"],["Courier-Oblique","courier","italic"],["Courier-BoldOblique","courier","bolditalic"],["Times-Roman","times","normal"],["Times-Bold","times","bold"],["Times-Italic","times","italic"],["Times-BoldItalic","times","bolditalic"],["ZapfDingbats","zapfdingbats"]],e=0,r=t.length;e<r;e++){var n=V(t[e][0],t[e][1],t[e][2],"StandardEncoding"),i=t[e][0].split("-");Y(n,i[0],i[1]||"")}F.publish("addFonts",{fonts:g,dictionary:v})}(),S="F1",J(r,t),F.publish("initialized"),B}var ht="1.3",lt={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};return ut.API={events:[]},ut.version="1.x-master","function"==typeof define&&define.amd?define("jsPDF",function(){return ut}):void 0!==pt&&pt.exports?pt.exports=ut:st.jsPDF=ut,ut}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0));(window.AcroForm=function(t){var l=window.AcroForm;l.scale=function(t){return t*(e.internal.scaleFactor/1)};var e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!(l.antiScale=function(t){return 1/e.internal.scaleFactor*t}),internal:null};f.API.acroformPlugin=e;var r=function(){for(var t in this.acroformPlugin.acroFormDictionaryRoot.Fields){var e=this.acroformPlugin.acroFormDictionaryRoot.Fields[t];e.hasAnnotation&&n.call(this,e)}},n=function(t){var e={type:"reference",object:t};f.API.annotationPlugin.annotations[this.internal.getPageInfo(t.page).pageNumber].push(e)},i=function(t){this.acroformPlugin.printedOut&&(this.acroformPlugin.printedOut=!1,this.acroformPlugin.acroFormDictionaryRoot=null),this.acroformPlugin.acroFormDictionaryRoot||function(){if(this.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");this.acroformPlugin.acroFormDictionaryRoot=new l.AcroFormDictionary,this.acroformPlugin.internal=this.internal,this.acroformPlugin.acroFormDictionaryRoot._eventID=this.internal.events.subscribe("postPutResources",s),this.internal.events.subscribe("buildDocument",r),this.internal.events.subscribe("putCatalog",o),this.internal.events.subscribe("postPutPages",a)}.call(this),this.acroformPlugin.acroFormDictionaryRoot.Fields.push(t)},o=function(){void 0!==this.acroformPlugin.acroFormDictionaryRoot&&this.internal.write("/AcroForm "+this.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")},s=function(){this.internal.events.unsubscribe(this.acroformPlugin.acroFormDictionaryRoot._eventID),delete this.acroformPlugin.acroFormDictionaryRoot._eventID,this.acroformPlugin.printedOut=!0},a=function(t){var e=!t;t||(this.internal.newObjectDeferredBegin(this.acroformPlugin.acroFormDictionaryRoot.objId),this.internal.out(this.acroformPlugin.acroFormDictionaryRoot.getString()));t=t||this.acroformPlugin.acroFormDictionaryRoot.Kids;for(var r in t){var n=t[r],i=n.Rect;n.Rect&&(n.Rect=l.internal.calculateCoordinates.call(this,n.Rect)),this.internal.newObjectDeferredBegin(n.objId);var o="";if(o+=n.objId+" 0 obj\n",o+="<<\n"+n.getContent(),n.Rect=i,n.hasAppearanceStream&&!n.appearanceStreamContent){var s=l.internal.calculateAppearanceStream.call(this,n);o+="/AP << /N "+s+" >>\n",this.acroformPlugin.xForms.push(s)}if(n.appearanceStreamContent){for(var a in o+="/AP << ",n.appearanceStreamContent){var u=n.appearanceStreamContent[a];if(o+="/"+a+" ",o+="<< ",1<=Object.keys(u).length||Array.isArray(u))for(var r in u)"function"==typeof(h=u[r])&&(h=h.call(this,n)),o+="/"+r+" "+h+" ",0<=this.acroformPlugin.xForms.indexOf(h)||this.acroformPlugin.xForms.push(h);else{var h=u;"function"==typeof h&&(h=h.call(this,n)),o+="/"+r+" "+h+" \n",0<=this.acroformPlugin.xForms.indexOf(h)||this.acroformPlugin.xForms.push(h)}o+=" >>\n"}o+=">>\n"}o+=">>\nendobj\n",this.internal.out(o)}e&&c.call(this,this.acroformPlugin.xForms)},c=function(t){for(var e in t){var r=e,n=t[e];this.internal.newObjectDeferredBegin(n&&n.objId);var i="";i+=n?n.getString():"",this.internal.out(i),delete t[r]}};t.addField=function(t){return t instanceof l.TextField?h.call(this,t):t instanceof l.ChoiceField?d.call(this,t):t instanceof l.Button?u.call(this,t):t instanceof l.ChildClass?i.call(this,t):t&&i.call(this,t),t.page=this.acroformPlugin.internal.getCurrentPageInfo().pageNumber,this};var u=function(t){(t=t||new l.Field).FT="/Btn";var e=t.Ff||0;t.pushbutton&&(e=l.internal.setBitPosition(e,17),delete t.pushbutton),t.radio&&(e=l.internal.setBitPosition(e,16),delete t.radio),t.noToggleToOff&&(e=l.internal.setBitPosition(e,15)),t.Ff=e,i.call(this,t)},h=function(t){(t=t||new l.Field).FT="/Tx";var e=t.Ff||0;t.multiline&&(e|=4096),t.password&&(e|=8192),t.fileSelect&&(e|=1<<20),t.doNotSpellCheck&&(e|=1<<22),t.doNotScroll&&(e|=1<<23),t.Ff=t.Ff||e,i.call(this,t)},d=function(t){var e=t||new l.Field;e.FT="/Ch";var r=e.Ff||0;e.combo&&(r=l.internal.setBitPosition(r,18),delete e.combo),e.edit&&(r=l.internal.setBitPosition(r,19),delete e.edit),e.sort&&(r=l.internal.setBitPosition(r,20),delete e.sort),e.multiSelect&&1.4<=this.internal.getPDFVersion()&&(r=l.internal.setBitPosition(r,22),delete e.multiSelect),e.doNotSpellCheck&&1.4<=this.internal.getPDFVersion()&&(r=l.internal.setBitPosition(r,23),delete e.doNotSpellCheck),e.Ff=r,i.call(this,e)}})(f.API);var a,u,h,t,e,r,i,o,n,x,w,_,T,l,P,A,M,p,m,g,s,v,y,b,E,c,S,C,d,O,I,R,k,D,L,B,F,N,j,U,q,W,X,H,z,G,Y=window.AcroForm;Y.internal={},Y.createFormXObject=function(t){var e=new Y.FormXObject,r=Y.Appearance.internal.getHeight(t)||0,n=Y.Appearance.internal.getWidth(t)||0;return e.BBox=[0,0,n,r],e},Y.Appearance={CheckBox:{createAppearanceStream:function(){return{N:{On:Y.Appearance.CheckBox.YesNormal},D:{On:Y.Appearance.CheckBox.YesPushDown,Off:Y.Appearance.CheckBox.OffPushDown}}},createMK:function(){return"<< /CA (3)>>"},YesPushDown:function(t){var e=Y.createFormXObject(t),r="";t.Q=1;var n=Y.internal.calculateX(t,"3","ZapfDingbats",50);return r+="0.749023 g\n             0 0 "+Y.Appearance.internal.getWidth(t)+" "+Y.Appearance.internal.getHeight(t)+" re\n             f\n             BMC\n             q\n             0 0 1 rg\n             /F13 "+n.fontSize+" Tf 0 g\n             BT\n",r+=n.text,r+="ET\n             Q\n             EMC\n",e.stream=r,e},YesNormal:function(t){var e=Y.createFormXObject(t),r="";t.Q=1;var n=Y.internal.calculateX(t,"3","ZapfDingbats",.9*Y.Appearance.internal.getHeight(t));return r+="1 g\n0 0 "+Y.Appearance.internal.getWidth(t)+" "+Y.Appearance.internal.getHeight(t)+" re\nf\nq\n0 0 1 rg\n0 0 "+(Y.Appearance.internal.getWidth(t)-1)+" "+(Y.Appearance.internal.getHeight(t)-1)+" re\nW\nn\n0 g\nBT\n/F13 "+n.fontSize+" Tf 0 g\n",r+=n.text,r+="ET\n             Q\n",e.stream=r,e},OffPushDown:function(t){var e=Y.createFormXObject(t),r="";return r+="0.749023 g\n            0 0 "+Y.Appearance.internal.getWidth(t)+" "+Y.Appearance.internal.getHeight(t)+" re\n            f\n",e.stream=r,e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Y.Appearance.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Y.Appearance.RadioButton.Circle.YesNormal,e.D[t]=Y.Appearance.RadioButton.Circle.YesPushDown,e},createMK:function(){return"<< /CA (l)>>"},YesNormal:function(t){var e=Y.createFormXObject(t),r="",n=Y.Appearance.internal.getWidth(t)<=Y.Appearance.internal.getHeight(t)?Y.Appearance.internal.getWidth(t)/4:Y.Appearance.internal.getHeight(t)/4;n*=.9;var i=Y.Appearance.internal.Bezier_C;return r+="q\n1 0 0 1 "+Y.Appearance.internal.getWidth(t)/2+" "+Y.Appearance.internal.getHeight(t)/2+" cm\n"+n+" 0 m\n"+n+" "+n*i+" "+n*i+" "+n+" 0 "+n+" c\n-"+n*i+" "+n+" -"+n+" "+n*i+" -"+n+" 0 c\n-"+n+" -"+n*i+" -"+n*i+" -"+n+" 0 -"+n+" c\n"+n*i+" -"+n+" "+n+" -"+n*i+" "+n+" 0 c\nf\nQ\n",e.stream=r,e},YesPushDown:function(t){var e=Y.createFormXObject(t),r="",n=Y.Appearance.internal.getWidth(t)<=Y.Appearance.internal.getHeight(t)?Y.Appearance.internal.getWidth(t)/4:Y.Appearance.internal.getHeight(t)/4,i=2*(n*=.9),o=i*Y.Appearance.internal.Bezier_C,s=n*Y.Appearance.internal.Bezier_C;return r+="0.749023 g\n            q\n           1 0 0 1 "+Y.Appearance.internal.getWidth(t)/2+" "+Y.Appearance.internal.getHeight(t)/2+" cm\n"+i+" 0 m\n"+i+" "+o+" "+o+" "+i+" 0 "+i+" c\n-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c\n-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c\n"+o+" -"+i+" "+i+" -"+o+" "+i+" 0 c\n            f\n            Q\n            0 g\n            q\n            1 0 0 1 "+Y.Appearance.internal.getWidth(t)/2+" "+Y.Appearance.internal.getHeight(t)/2+" cm\n"+n+" 0 m\n"+n+" "+s+" "+s+" "+n+" 0 "+n+" c\n-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c\n-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c\n"+s+" -"+n+" "+n+" -"+s+" "+n+" 0 c\n            f\n            Q\n",e.stream=r,e},OffPushDown:function(t){var e=Y.createFormXObject(t),r="",n=Y.Appearance.internal.getWidth(t)<=Y.Appearance.internal.getHeight(t)?Y.Appearance.internal.getWidth(t)/4:Y.Appearance.internal.getHeight(t)/4,i=2*(n*=.9),o=i*Y.Appearance.internal.Bezier_C;return r+="0.749023 g\n            q\n 1 0 0 1 "+Y.Appearance.internal.getWidth(t)/2+" "+Y.Appearance.internal.getHeight(t)/2+" cm\n"+i+" 0 m\n"+i+" "+o+" "+o+" "+i+" 0 "+i+" c\n-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c\n-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c\n"+o+" -"+i+" "+i+" -"+o+" "+i+" 0 c\n            f\n            Q\n",e.stream=r,e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Y.Appearance.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Y.Appearance.RadioButton.Cross.YesNormal,e.D[t]=Y.Appearance.RadioButton.Cross.YesPushDown,e},createMK:function(){return"<< /CA (8)>>"},YesNormal:function(t){var e=Y.createFormXObject(t),r="",n=Y.Appearance.internal.calculateCross(t);return r+="q\n            1 1 "+(Y.Appearance.internal.getWidth(t)-2)+" "+(Y.Appearance.internal.getHeight(t)-2)+" re\n            W\n            n\n            "+n.x1.x+" "+n.x1.y+" m\n            "+n.x2.x+" "+n.x2.y+" l\n            "+n.x4.x+" "+n.x4.y+" m\n            "+n.x3.x+" "+n.x3.y+" l\n            s\n            Q\n",e.stream=r,e},YesPushDown:function(t){var e=Y.createFormXObject(t),r=Y.Appearance.internal.calculateCross(t),n="";return n+="0.749023 g\n            0 0 "+Y.Appearance.internal.getWidth(t)+" "+Y.Appearance.internal.getHeight(t)+" re\n            f\n            q\n            1 1 "+(Y.Appearance.internal.getWidth(t)-2)+" "+(Y.Appearance.internal.getHeight(t)-2)+" re\n            W\n            n\n            "+r.x1.x+" "+r.x1.y+" m\n            "+r.x2.x+" "+r.x2.y+" l\n            "+r.x4.x+" "+r.x4.y+" m\n            "+r.x3.x+" "+r.x3.y+" l\n            s\n            Q\n",e.stream=n,e},OffPushDown:function(t){var e=Y.createFormXObject(t),r="";return r+="0.749023 g\n            0 0 "+Y.Appearance.internal.getWidth(t)+" "+Y.Appearance.internal.getHeight(t)+" re\n            f\n",e.stream=r,e}}},createDefaultAppearanceStream:function(t){return""+"/Helv 0 Tf 0 g"}},Y.Appearance.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Y.Appearance.internal.getWidth(t),r=Y.Appearance.internal.getHeight(t),n=r<e?r:e;return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Y.Appearance.internal.getWidth=function(t){return t.Rect[2]},Y.Appearance.internal.getHeight=function(t){return t.Rect[3]},Y.internal.inherit=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Y.internal.arrayToPdfArray=function(t){if(Array.isArray(t)){var e=" [";for(var r in t)e+=t[r].toString(),e+=r<t.length-1?" ":"";return e+"]"}},Y.internal.toPdfString=function(t){return 0!==(t=t||"").indexOf("(")&&(t="("+t),")"!=t.substring(t.length-1)&&(t+="("),t},Y.PDFObject=function(){var t;Object.defineProperty(this,"objId",{get:function(){return t||(this.internal?t=this.internal.newObjectDeferred():f.API.acroformPlugin.internal&&(t=f.API.acroformPlugin.internal.newObjectDeferred())),t},configurable:!1})},Y.PDFObject.prototype.toString=function(){return this.objId+" 0 R"},Y.PDFObject.prototype.getString=function(){var t=this.objId+" 0 obj\n<<";return t+=this.getContent()+">>\n",this.stream&&(t+="stream\n",t+=this.stream,t+="endstream\n"),t+"endobj\n"},Y.PDFObject.prototype.getContent=function(){return""+function(t){var e="",r=Object.keys(t).filter(function(t){return"content"!=t&&"appearanceStreamContent"!=t&&"_"!=t.substring(0,1)});for(var n in r){var i=r[n],o=t[i];o&&(Array.isArray(o)?e+="/"+i+" "+Y.internal.arrayToPdfArray(o)+"\n":o instanceof Y.PDFObject?e+="/"+i+" "+o.objId+" 0 R\n":e+="/"+i+" "+o+"\n")}return e}(this)},Y.FormXObject=function(){var e;Y.PDFObject.call(this),this.Type="/XObject",this.Subtype="/Form",this.FormType=1,this.BBox,this.Matrix,this.Resources="2 0 R",this.PieceInfo,Object.defineProperty(this,"Length",{enumerable:!0,get:function(){return void 0!==e?e.length:0}}),Object.defineProperty(this,"stream",{enumerable:!1,set:function(t){e=t},get:function(){return e||null}})},Y.internal.inherit(Y.FormXObject,Y.PDFObject),Y.AcroFormDictionary=function(){Y.PDFObject.call(this);var t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return 0<t.length?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!0,configurable:!0,get:function(){return t}}),this.DA},Y.internal.inherit(Y.AcroFormDictionary,Y.PDFObject),Y.Field=function(){var e;Y.PDFObject.call(this),Object.defineProperty(this,"Rect",{enumerable:!0,configurable:!1,get:function(){if(e)return e},set:function(t){e=t}});var r,n,i,o="";Object.defineProperty(this,"FT",{enumerable:!0,set:function(t){o=t},get:function(){return o}}),Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,set:function(t){r=t},get:function(){if(!r||r.length<1){if(this instanceof Y.ChildClass)return;return"(FieldObject"+Y.Field.FieldNum+++")"}return"("==r.substring(0,1)&&r.substring(r.length-1)?r:"("+r+")"}}),Object.defineProperty(this,"DA",{enumerable:!0,get:function(){if(n)return"("+n+")"},set:function(t){n=t}}),Object.defineProperty(this,"DV",{enumerable:!0,configurable:!0,get:function(){if(i)return i},set:function(t){i=t}}),Object.defineProperty(this,"Type",{enumerable:!0,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,get:function(){return this.hasAnnotation?"/Widget":null}}),this.BG,Object.defineProperty(this,"hasAnnotation",{enumerable:!1,get:function(){return!!(this.Rect||this.BC||this.BG)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(this,"page",{enumerable:!1,configurable:!0,writable:!0})},Y.Field.FieldNum=0,Y.internal.inherit(Y.Field,Y.PDFObject),Y.ChoiceField=function(){Y.Field.call(this),this.FT="/Ch",this.Opt=[],this.V="()",this.TI=0,this.combo=!1,Object.defineProperty(this,"edit",{enumerable:!0,set:function(t){1==t?(this._edit=!0,this.combo=!0):this._edit=!1},get:function(){return!!this._edit&&this._edit},configurable:!1}),this.hasAppearanceStream=!0,Object.defineProperty(this,"V",{get:function(){Y.internal.toPdfString()}})},Y.internal.inherit(Y.ChoiceField,Y.Field),window.ChoiceField=Y.ChoiceField,Y.ListBox=function(){Y.ChoiceField.call(this)},Y.internal.inherit(Y.ListBox,Y.ChoiceField),window.ListBox=Y.ListBox,Y.ComboBox=function(){Y.ListBox.call(this),this.combo=!0},Y.internal.inherit(Y.ComboBox,Y.ListBox),window.ComboBox=Y.ComboBox,Y.EditBox=function(){Y.ComboBox.call(this),this.edit=!0},Y.internal.inherit(Y.EditBox,Y.ComboBox),window.EditBox=Y.EditBox,Y.Button=function(){Y.Field.call(this),this.FT="/Btn"},Y.internal.inherit(Y.Button,Y.Field),window.Button=Y.Button,Y.PushButton=function(){Y.Button.call(this),this.pushbutton=!0},Y.internal.inherit(Y.PushButton,Y.Button),window.PushButton=Y.PushButton,Y.RadioButton=function(){Y.Button.call(this),this.radio=!0;var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!0,get:function(){if(0<t.length)return t}}),Object.defineProperty(this,"__Kids",{get:function(){return t}}),Object.defineProperty(this,"noToggleToOff",{enumerable:!1,get:function(){return e},set:function(t){e=t}})},Y.internal.inherit(Y.RadioButton,Y.Button),window.RadioButton=Y.RadioButton,Y.ChildClass=function(t,e){Y.Field.call(this),this.Parent=t,this._AppearanceType=Y.Appearance.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(e),this.F=Y.internal.setBitPosition(this.F,3,1),this.MK=this._AppearanceType.createMK(),this.AS="/Off",this._Name=e},Y.internal.inherit(Y.ChildClass,Y.Field),Y.RadioButton.prototype.setAppearance=function(t){if("createAppearanceStream"in t&&"createMK"in t)for(var e in this.__Kids){var r=this.__Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r._Name),r.MK=t.createMK()}},Y.RadioButton.prototype.createOption=function(t){var e=new Y.ChildClass(this,t);return this.__Kids.push(e),f.API.addField(e),e},Y.CheckBox=function(){Button.call(this),this.appearanceStreamContent=Y.Appearance.CheckBox.createAppearanceStream(),this.MK=Y.Appearance.CheckBox.createMK(),this.AS="/On",this.V="/On"},Y.internal.inherit(Y.CheckBox,Y.Button),window.CheckBox=Y.CheckBox,Y.TextField=function(){var e,r;Y.Field.call(this),this.DA=Y.Appearance.createDefaultAppearanceStream(),this.F=4,Object.defineProperty(this,"V",{get:function(){return e?"("+e+")":e},enumerable:!0,set:function(t){e=t}}),Object.defineProperty(this,"DV",{get:function(){return r?"("+r+")":r},enumerable:!0,set:function(t){r=t}});var n=!1;Object.defineProperty(this,"multiline",{enumerable:!1,get:function(){return n},set:function(t){n=t}});var i=!1;Object.defineProperty(this,"MaxLen",{enumerable:!0,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!1,get:function(){return this.V||this.DV}})},Y.internal.inherit(Y.TextField,Y.Field),window.TextField=Y.TextField,Y.PasswordField=function(){TextField.call(this),Object.defineProperty(this,"password",{value:!0,enumerable:!1,configurable:!1,writable:!1})},Y.internal.inherit(Y.PasswordField,Y.TextField),window.PasswordField=Y.PasswordField,Y.internal.calculateFontSpace=function(t,e,r){r=r||"helvetica";var n=Y.internal.calculateFontSpace.canvas||(Y.internal.calculateFontSpace.canvas=document.createElement("canvas"));(s=n.getContext("2d")).save();var i=e+" "+r;s.font=i;var o=s.measureText(t);s.fontcolor="black";var s=n.getContext("2d");return o.height=1.5*s.measureText("3").width,s.restore(),o},Y.internal.calculateX=function(t,e,i,r){r=r||12,i=i||"helvetica";var n={text:"",fontSize:""},o=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" "),s=r,a=Y.Appearance.internal.getHeight(t)||0;a=a<0?-a:a;var u=Y.Appearance.internal.getWidth(t)||0;u=u<0?-u:u,s++;t:for(;;){e="";s--;var h=Y.internal.calculateFontSpace("3",s+"px",i).height,l=t.multiline?a-s:(a-h)/2,c=-2,d=l+=2,f=0,p=0,m=0;if(0==s){s=12,e="(...) Tj\n",e+="% Width of Text: "+Y.internal.calculateFontSpace(e,"1px").width+", FieldWidth:"+u+"\n";break}m=Y.internal.calculateFontSpace(o[0]+" ",s+"px",i).width;var g="",v=0;for(var y in o){g=" "==(g+=o[y]+" ").substr(g.length-1)?g.substr(0,g.length-1):g;var b=parseInt(y);m=Y.internal.calculateFontSpace(g+" ",s+"px",i).width;var x=function(t,e,r){if(t+1<o.length){var n=e+" "+o[t+1];return Y.internal.calculateFontSpace(n,r+"px",i).width<=u-4}return!1}(b,g,s),w=y>=o.length-1;if(!x||w){if(x||w){if(w)p=b;else if(t.multiline&&a<(h+2)*(v+2)+2)continue t}else{if(!t.multiline)continue t;if(a<(h+2)*(v+2)+2)continue t;p=b}for(var _="",T=f;T<=p;T++)_+=o[T]+" ";switch(_=" "==_.substr(_.length-1)?_.substr(0,_.length-1):_,m=Y.internal.calculateFontSpace(_,s+"px",i).width,t.Q){case 2:c=u-m-2;break;case 1:c=(u-m)/2;break;case 0:default:c=2}e+=c+" "+d+" Td\n",e+="("+_+") Tj\n",e+=-c+" 0 Td\n",d=-(s+2),m=0,f=p+1,v++,g=""}else g+=" "}break}return n.text=e,n.fontSize=s,n},Y.internal.calculateAppearanceStream=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e="",r=t.V||t.DV,n=Y.internal.calculateX(t,r);e+="/Tx BMC\nq\n/F1 "+n.fontSize+" Tf\n1 0 0 1 0 0 Tm\n",e+="BT\n",e+=n.text,e+="ET\n",e+="Q\nEMC\n";var i=new Y.createFormXObject(t);return i.stream=e,i}},Y.internal.calculateCoordinates=function(t,e,r,n){var i={};if(this.internal){var o=function(t){return t*this.internal.scaleFactor};Array.isArray(t)?(t[0]=Y.scale(t[0]),t[1]=Y.scale(t[1]),t[2]=Y.scale(t[2]),t[3]=Y.scale(t[3]),i.lowerLeft_X=t[0]||0,i.lowerLeft_Y=o.call(this,this.internal.pageSize.height)-t[3]-t[1]||0,i.upperRight_X=t[0]+t[2]||0,i.upperRight_Y=o.call(this,this.internal.pageSize.height)-t[1]||0):(t=Y.scale(t),e=Y.scale(e),r=Y.scale(r),n=Y.scale(n),i.lowerLeft_X=t||0,i.lowerLeft_Y=this.internal.pageSize.height-e||0,i.upperRight_X=t+r||0,i.upperRight_Y=this.internal.pageSize.height-e+n||0)}else Array.isArray(t)?(i.lowerLeft_X=t[0]||0,i.lowerLeft_Y=t[1]||0,i.upperRight_X=t[0]+t[2]||0,i.upperRight_Y=t[1]+t[3]||0):(i.lowerLeft_X=t||0,i.lowerLeft_Y=e||0,i.upperRight_X=t+r||0,i.upperRight_Y=e+n||0);return[i.lowerLeft_X,i.lowerLeft_Y,i.upperRight_X,i.upperRight_Y]},Y.internal.calculateColor=function(t,e,r){var n=new Array(3);return n.r=0|t,n.g=0|e,n.b=0|r,n},Y.internal.getBitPosition=function(t,e){var r=1;return(t=t||0)|(r<<=e-1)},Y.internal.setBitPosition=function(t,e,r){t=t||0;var n=1;if(n<<=e-1,1==(r=r||1))t|=n;else t=t&~n;return t},f.API.addHTML=function(t,h,l,c,d){if("undefined"==typeof html2canvas&&"undefined"==typeof rasterizeHTML)throw new Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");"number"!=typeof h&&(c=h,d=l),"function"==typeof c&&(d=c,c=null);var e=this.internal,f=e.scaleFactor,p=e.pageSize.width,m=e.pageSize.height;if((c=c||{}).onrendered=function(n){h=parseInt(h)||0,l=parseInt(l)||0;var t=c.dim||{},e=t.h||0,i=t.w||Math.min(p,n.width/f)-h,o="JPEG";if(c.format&&(o=c.format),n.height>m&&c.pagesplit){var r=function(){for(var t=0;;){var e=document.createElement("canvas");e.width=Math.min(p*f,n.width),e.height=Math.min(m*f,n.height-t),e.getContext("2d").drawImage(n,0,t,n.width,e.height,0,0,e.width,e.height);var r=[e,h,t?0:l,e.width/f,e.height/f,o,null,"SLOW"];if(this.addImage.apply(this,r),(t+=e.height)>=n.height)break;this.addPage()}d(i,t,null,r)}.bind(this);if("CANVAS"===n.nodeName){var s=new Image;s.onload=r,s.src=n.toDataURL("image/png"),n=s}else r()}else{var a=Math.random().toString(35),u=[n,h,l,i,e,o,a,"SLOW"];this.addImage.apply(this,u),d(i,e,a,u)}}.bind(this),"undefined"!=typeof html2canvas&&!c.rstz)return html2canvas(t,c);if("undefined"!=typeof rasterizeHTML){var r="drawDocument";return"string"==typeof t&&(r=/^http/.test(t)?"drawURL":"drawHTML"),c.width=c.width||p*f,rasterizeHTML[r](t,void 0,c).then(function(t){c.onrendered(t.image)},function(t){d(null,t)})}return null},function(x){var w=["jpeg","jpg","png"],r=function t(e){var r=this.internal.newObject(),n=this.internal.write,i=this.internal.putStream;if(e.n=r,n("<</Type /XObject"),n("/Subtype /Image"),n("/Width "+e.w),n("/Height "+e.h),e.cs===this.color_spaces.INDEXED?n("/ColorSpace [/Indexed /DeviceRGB "+(e.pal.length/3-1)+" "+("smask"in e?r+2:r+1)+" 0 R]"):(n("/ColorSpace /"+e.cs),e.cs===this.color_spaces.DEVICE_CMYK&&n("/Decode [1 0 1 0 1 0 1 0]")),n("/BitsPerComponent "+e.bpc),"f"in e&&n("/Filter /"+e.f),"dp"in e&&n("/DecodeParms <<"+e.dp+">>"),"trns"in e&&e.trns.constructor==Array){for(var o="",s=0,a=e.trns.length;s<a;s++)o+=e.trns[s]+" "+e.trns[s]+" ";n("/Mask ["+o+"]")}if("smask"in e&&n("/SMask "+(r+1)+" 0 R"),n("/Length "+e.data.length+">>"),i(e.data),n("endobj"),"smask"in e){var u="/Predictor "+e.p+" /Colors 1 /BitsPerComponent "+e.bpc+" /Columns "+e.w,h={w:e.w,h:e.h,cs:"DeviceGray",bpc:e.bpc,dp:u,data:e.smask};"f"in e&&(h.f=e.f),t.call(this,h)}e.cs===this.color_spaces.INDEXED&&(this.internal.newObject(),n("<< /Length "+e.pal.length+">>"),i(this.arrayBufferToBinaryString(new Uint8Array(e.pal))),n("endobj"))},_=function(){var t=this.internal.collections.addImage_images;for(var e in t)r.call(this,t[e])},T=function(){var t,e=this.internal.collections.addImage_images,r=this.internal.write;for(var n in e)r("/I"+(t=e[n]).i,t.n,"0","R")},E=function(t){return"object"===(void 0===t?"undefined":ct(t))&&1===t.nodeType},S=function(t,e){var r;if(e)for(var n in e)if(t===e[n].alias){r=e[n];break}return r};x.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"},x.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"},x.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x.sHashCode=function(t){return Array.prototype.reduce&&t.split("").reduce(function(t,e){return(t=(t<<5)-t+e.charCodeAt(0))&t},0)},x.isString=function(t){return"string"==typeof t},x.extractInfoFromBase64DataURI=function(t){return/^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(t)},x.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array},x.isArrayBuffer=function(t){return!!this.supportsArrayBuffer()&&t instanceof ArrayBuffer},x.isArrayBufferView=function(t){return!!this.supportsArrayBuffer()&&"undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)},x.binaryStringToUint8Array=function(t){for(var e=t.length,r=new Uint8Array(e),n=0;n<e;n++)r[n]=t.charCodeAt(n);return r},x.arrayBufferToBinaryString=function(t){if("function"==typeof window.atob)return atob(this.arrayBufferToBase64(t));for(var e=this.isArrayBuffer(t)?t:new Uint8Array(t),r="",n=Math.round(e.byteLength/20480),i=0;i<n;i++)r+=String.fromCharCode.apply(null,e.slice(20480*i,20480*i+20480));return r},x.arrayBufferToBase64=function(t){for(var e,r,n="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=new Uint8Array(t),s=o.byteLength,a=s%3,u=s-a,h=0;h<u;h+=3)e=(258048&(r=o[h]<<16|o[h+1]<<8|o[h+2]))>>12,n+=i[(16515072&r)>>18]+i[e]+i[(4032&r)>>6]+i[63&r];return 1==a?(e=(3&(r=o[u]))<<4,n+=i[(252&r)>>2]+i[e]+"=="):2==a&&(e=(1008&(r=o[u]<<8|o[u+1]))>>4,n+=i[(64512&r)>>10]+i[e]+i[(15&r)<<2]+"="),n},x.createImageInfo=function(t,e,r,n,i,o,s,a,u,h,l,c,d){var f={alias:a,w:e,h:r,cs:n,bpc:i,i:s,data:t};return o&&(f.f=o),u&&(f.dp=u),h&&(f.trns=h),l&&(f.pal=l),c&&(f.smask=c),d&&(f.p=d),f},x.addImage=function(t,e,r,n,i,o,s,a,u){if("string"!=typeof e){var h=o;o=i,i=n,n=r,r=e,e=h}if("object"===(void 0===t?"undefined":ct(t))&&!E(t)&&"imageData"in t){var l=t;t=l.imageData,e=l.format||e,r=l.x||r||0,n=l.y||n||0,i=l.w||i,o=l.h||o,s=l.alias||s,a=l.compression||a,u=l.rotation||l.angle||u}if(isNaN(r)||isNaN(n))throw new Error("Invalid coordinates passed to jsPDF.addImage");var c,d,f,p,m,g,v,y=function(){var t=this.internal.collections.addImage_images;return t||(this.internal.collections.addImage_images=t={},this.internal.events.subscribe("putResources",_),this.internal.events.subscribe("putXobjectDict",T)),t}.call(this);if(!(c=S(t,y))&&(E(t)&&(t=function(t,e,r){if("IMG"===t.nodeName&&t.hasAttribute("src")){var n=""+t.getAttribute("src");if(!r&&0===n.indexOf("data:image/"))return n;!e&&/\.png(?:[?#].*)?$/i.test(n)&&(e="png")}if("CANVAS"===t.nodeName)var i=t;else{(i=document.createElement("canvas")).width=t.clientWidth||t.width,i.height=t.clientHeight||t.height;var o=i.getContext("2d");if(!o)throw"addImage requires canvas to be supported by browser.";if(r){var s,a,u,h,l,c,d,f,p=Math.PI/180;"object"===(void 0===r?"undefined":ct(r))&&(s=r.x,a=r.y,u=r.bg,r=r.angle),f=r*p,h=Math.abs(Math.cos(f)),l=Math.abs(Math.sin(f)),c=i.width,d=i.height,i.width=d*l+c*h,i.height=d*h+c*l,isNaN(s)&&(s=i.width/2),isNaN(a)&&(a=i.height/2),o.clearRect(0,0,i.width,i.height),o.fillStyle=u||"white",o.fillRect(0,0,i.width,i.height),o.save(),o.translate(s,a),o.rotate(f),o.drawImage(t,-c/2,-d/2),o.rotate(-f),o.translate(-s,-a),o.restore()}else o.drawImage(t,0,0,i.width,i.height)}return i.toDataURL("png"==(""+e).toLowerCase()?"image/png":"image/jpeg")}(t,e,u)),null==s&&(s="string"==typeof(v=t)&&x.sHashCode(v)),!(c=S(s,y)))){if(this.isString(t)){var b=this.extractInfoFromBase64DataURI(t);b?(e=b[2],t=atob(b[3])):137===t.charCodeAt(0)&&80===t.charCodeAt(1)&&78===t.charCodeAt(2)&&71===t.charCodeAt(3)&&(e="png")}if(e=(e||"JPEG").toLowerCase(),g=e,-1===w.indexOf(g))throw new Error("addImage currently only supports formats "+w+", not '"+e+"'");if("function"!=typeof x["process"+e.toUpperCase()])throw new Error("please ensure that the plugin for '"+e+"' support is added");if(this.supportsArrayBuffer()&&(t instanceof Uint8Array||(d=t,t=this.binaryStringToUint8Array(t))),!(c=this["process"+e.toUpperCase()](t,(m=0,(p=y)&&(m=Object.keys?Object.keys(p).length:function(t){var e=0;for(var r in t)t.hasOwnProperty(r)&&e++;return e}(p)),m),s,((f=a)&&"string"==typeof f&&(f=f.toUpperCase()),f in x.image_compression?f:x.image_compression.NONE),d)))throw new Error("An unkwown error occurred whilst processing the image")}return function(t,e,r,n,i,o,s){var a=function(t,e,r){return t||e||(e=t=-96),t<0&&(t=-1*r.w*72/t/this.internal.scaleFactor),e<0&&(e=-1*r.h*72/e/this.internal.scaleFactor),0===t&&(t=e*r.w/r.h),0===e&&(e=t*r.h/r.w),[t,e]}.call(this,r,n,i),u=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;r=a[0],n=a[1],s[o]=i,this.internal.write("q",u(r),"0 0",u(n),u(t),h(e+n),"cm /I"+i.i,"Do Q")}.call(this,r,n,i,o,c,c.i,y),this};var u=function(t,e){return t.subarray(e,e+5)};x.processJPEG=function(t,e,r,n,i){var o,s=this.color_spaces.DEVICE_RGB,a=this.decode.DCT_DECODE;return this.isString(t)?(o=function(t){var e;if(255===!t.charCodeAt(0)||216===!t.charCodeAt(1)||255===!t.charCodeAt(2)||224===!t.charCodeAt(3)||!t.charCodeAt(6)==="J".charCodeAt(0)||!t.charCodeAt(7)==="F".charCodeAt(0)||!t.charCodeAt(8)==="I".charCodeAt(0)||!t.charCodeAt(9)==="F".charCodeAt(0)||0===!t.charCodeAt(10))throw new Error("getJpegSize requires a binary string jpeg file");for(var r=256*t.charCodeAt(4)+t.charCodeAt(5),n=4,i=t.length;n<i;){if(n+=r,255!==t.charCodeAt(n))throw new Error("getJpegSize could not find the size of the image");if(192===t.charCodeAt(n+1)||193===t.charCodeAt(n+1)||194===t.charCodeAt(n+1)||195===t.charCodeAt(n+1)||196===t.charCodeAt(n+1)||197===t.charCodeAt(n+1)||198===t.charCodeAt(n+1)||199===t.charCodeAt(n+1))return e=256*t.charCodeAt(n+5)+t.charCodeAt(n+6),[256*t.charCodeAt(n+7)+t.charCodeAt(n+8),e,t.charCodeAt(n+9)];n+=2,r=256*t.charCodeAt(n)+t.charCodeAt(n+1)}}(t),this.createImageInfo(t,o[0],o[1],1==o[3]?this.color_spaces.DEVICE_GRAY:s,8,a,e,r)):(this.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.isArrayBufferView(t)?(o=function(t){if(65496!=(t[0]<<8|t[1]))throw new Error("Supplied data is not a JPEG");for(var e,r=t.length,n=(t[4]<<8)+t[5],i=4;i<r;){if(n=((e=u(t,i+=n))[2]<<8)+e[3],(192===e[1]||194===e[1])&&255===e[0]&&7<n)return{width:((e=u(t,i+5))[2]<<8)+e[3],height:(e[0]<<8)+e[1],numcomponents:e[4]};i+=2}throw new Error("getJpegSizeFromBytes could not find the size of the image")}(t),t=i||this.arrayBufferToBinaryString(t),this.createImageInfo(t,o.width,o.height,1==o.numcomponents?this.color_spaces.DEVICE_GRAY:s,8,a,e,r)):null)},x.processJPG=function(){return this.processJPEG.apply(this,arguments)}}(f.API),z=f.API,G={annotations:[],f2:function(t){return t.toFixed(2)},notEmpty:function(t){if(void 0!==t&&""!=t)return!0}},f.API.annotationPlugin=G,f.API.events.push(["addPage",function(t){this.annotationPlugin.annotations[t.pageNumber]=[]}]),z.events.push(["putPage",function(t){for(var e=this.annotationPlugin.annotations[t.pageNumber],r=!1,n=0;n<e.length&&!r;n++)switch((u=e[n]).type){case"link":if(G.notEmpty(u.options.url)||G.notEmpty(u.options.pageNumber)){r=!0;break}case"reference":case"text":case"freetext":r=!0}if(0!=r){this.internal.write("/Annots [");var i=this.annotationPlugin.f2,o=this.internal.scaleFactor,s=this.internal.pageSize.height,a=this.internal.getPageInfo(t.pageNumber);for(n=0;n<e.length;n++){var u=e[n];switch(u.type){case"reference":this.internal.write(" "+u.object.objId+" 0 R ");break;case"text":var h=this.internal.newAdditionalObject(),l=this.internal.newAdditionalObject(),c=u.title||"Note";g="<</Type /Annot /Subtype /Text "+(f="/Rect ["+i(u.bounds.x*o)+" "+i(s-(u.bounds.y+u.bounds.h)*o)+" "+i((u.bounds.x+u.bounds.w)*o)+" "+i((s-u.bounds.y)*o)+"] ")+"/Contents ("+u.contents+")",g+=" /Popup "+l.objId+" 0 R",g+=" /P "+a.objId+" 0 R",g+=" /T ("+c+") >>",h.content=g;var d=h.objId+" 0 R";g="<</Type /Annot /Subtype /Popup "+(f="/Rect ["+i((u.bounds.x+30)*o)+" "+i(s-(u.bounds.y+u.bounds.h)*o)+" "+i((u.bounds.x+u.bounds.w+30)*o)+" "+i((s-u.bounds.y)*o)+"] ")+" /Parent "+d,u.open&&(g+=" /Open true"),g+=" >>",l.content=g,this.internal.write(h.objId,"0 R",l.objId,"0 R");break;case"freetext":var f="/Rect ["+i(u.bounds.x*o)+" "+i((s-u.bounds.y)*o)+" "+i(u.bounds.x+u.bounds.w*o)+" "+i(s-(u.bounds.y+u.bounds.h)*o)+"] ",p=u.color||"#000000";g="<</Type /Annot /Subtype /FreeText "+f+"/Contents ("+u.contents+")",g+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+p+")",g+=" /Border [0 0 0]",g+=" >>",this.internal.write(g);break;case"link":if(u.options.name){var m=this.annotations._nameMap[u.options.name];u.options.pageNumber=m.page,u.options.top=m.y}else u.options.top||(u.options.top=0);f="/Rect ["+i(u.x*o)+" "+i((s-u.y)*o)+" "+i((u.x+u.w)*o)+" "+i((s-(u.y+u.h))*o)+"] ";var g="";if(u.options.url)g="<</Type /Annot /Subtype /Link "+f+"/Border [0 0 0] /A <</S /URI /URI ("+u.options.url+") >>";else if(u.options.pageNumber)switch(g="<</Type /Annot /Subtype /Link "+f+"/Border [0 0 0] /Dest ["+(t=this.internal.getPageInfo(u.options.pageNumber)).objId+" 0 R",u.options.magFactor=u.options.magFactor||"XYZ",u.options.magFactor){case"Fit":g+=" /Fit]";break;case"FitH":g+=" /FitH "+u.options.top+"]";break;case"FitV":u.options.left=u.options.left||0,g+=" /FitV "+u.options.left+"]";break;case"XYZ":default:var v=i((s-u.options.top)*o);u.options.left=u.options.left||0,void 0===u.options.zoom&&(u.options.zoom=0),g+=" /XYZ "+u.options.left+" "+v+" "+u.options.zoom+"]"}""!=g&&(g+=" >>",this.internal.write(g))}}this.internal.write("]")}}]),z.createAnnotation=function(t){switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push(t)}},z.link=function(t,e,r,n,i){this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push({x:t,y:e,w:r,h:n,options:i,type:"link"})},z.textWithLink=function(t,e,r,n){var i=this.getTextWidth(t),o=this.internal.getLineHeight()/this.internal.scaleFactor;return this.text(t,e,r),r+=.2*o,this.link(e,r-o,i,o,n),i},z.getTextWidth=function(t){var e=this.internal.getFontSize();return this.getStringUnitWidth(t)*e/this.internal.scaleFactor},z.getLineHeight=function(){return this.internal.getLineHeight()},f.API.autoPrint=function(){var t;return this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+t+" 0 R")}),this},(H=f.API).events.push(["initialized",function(){this.canvas.pdf=this}]),H.canvas={getContext:function(t){return(this.pdf.context2d._canvas=this).pdf.context2d},style:{}},Object.defineProperty(H.canvas,"width",{get:function(){return this._width},set:function(t){this._width=t,this.getContext("2d").pageWrapX=t+1}}),Object.defineProperty(H.canvas,"height",{get:function(){return this._height},set:function(t){this._height=t,this.getContext("2d").pageWrapY=t+1}}),D=f.API,j={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},U=1,q=function(t,e,r,n,i){j={x:t,y:e,w:r,h:n,ln:i}},W=function(){return j},X={left:0,top:0,bottom:0},D.setHeaderFunction=function(t){N=t},D.getTextDimensions=function(e){var t,r;L=this.internal.getFont().fontName,B=this.table_font_size||this.internal.getFontSize(),F=this.internal.getFont().fontStyle,(r=document.createElement("font")).id="jsPDFCell";try{r.style.fontStyle=F}catch(e){r.style.fontWeight=F}r.style.fontName=L,r.style.fontSize=B+"pt";try{r.textContent=e}catch(t){r.innerText=e}return document.body.appendChild(r),t={w:(r.offsetWidth+1)*(19.049976/25.4),h:(r.offsetHeight+1)*(19.049976/25.4)},document.body.removeChild(r),t},D.cellAddPage=function(){var t=this.margins||X;this.addPage(),q(t.left,t.top,void 0,void 0),U+=1},D.cellInitialize=function(){j={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},U=1},D.cell=function(t,e,r,n,i,o,s){var a=W(),u=!1;if(void 0!==a.ln)if(a.ln===o)t=a.x+a.w,e=a.y;else{var h=this.margins||X;a.y+a.h+n+13>=this.internal.pageSize.height-h.bottom&&(this.cellAddPage(),u=!0,this.printHeaders&&this.tableHeaderRow&&this.printHeaderRow(o,!0)),e=W().y+W().h,u&&(e=23)}if(void 0!==i[0])if(this.printingHeaderRow?this.rect(t,e,r,n,"FD"):this.rect(t,e,r,n),"right"===s){i instanceof Array||(i=[i]);for(var l=0;l<i.length;l++){var c=i[l],d=this.getStringUnitWidth(c)*this.internal.getFontSize();this.text(c,t+r-d-3,e+this.internal.getLineHeight()*(l+1))}}else this.text(i,t+3,e+this.internal.getLineHeight());return q(t,e,r,n,o),this},D.arrayMax=function(t,e){var r,n,i,o=t[0];for(r=0,n=t.length;r<n;r+=1)i=t[r],e?-1===e(o,i)&&(o=i):o<i&&(o=i);return o},D.table=function(t,e,r,n,i){if(!r)throw"No data for PDF table";var o,s,a,u,h,l,c,d,f,p,m=[],g=[],v={},y={},b=[],x=[],w=!1,_=!0,T=12,E=X;if(E.width=this.internal.pageSize.width,i&&(!0===i.autoSize&&(w=!0),!1===i.printHeaders&&(_=!1),i.fontSize&&(T=i.fontSize),i.css&&void 0!==i.css["font-size"]&&(T=16*i.css["font-size"]),i.margins&&(E=i.margins)),this.lnMod=0,j={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},U=1,this.printHeaders=_,this.margins=E,this.setFontSize(T),this.table_font_size=T,null==n)m=Object.keys(r[0]);else if(n[0]&&"string"!=typeof n[0])for(s=0,a=n.length;s<a;s+=1)o=n[s],m.push(o.name),g.push(o.prompt),y[o.name]=o.width*(19.049976/25.4);else m=n;if(w)for(p=function(t){return t[o]},s=0,a=m.length;s<a;s+=1){for(v[o=m[s]]=r.map(p),b.push(this.getTextDimensions(g[s]||o).w),c=0,u=(l=v[o]).length;c<u;c+=1)h=l[c],b.push(this.getTextDimensions(h).w);y[o]=D.arrayMax(b),b=[]}if(_){for(S=this.calculateLineHeight(m,y,g.length?g:m),s=0,a=m.length;s<a;s+=1)o=m[s],x.push([t,e,y[o],S,String(g.length?g[s]:o)]);this.setTableHeaderRow(x),this.printHeaderRow(1,!1)}for(s=0,a=r.length;s<a;s+=1){var S;for(d=r[s],S=this.calculateLineHeight(m,y,d),c=0,f=m.length;c<f;c+=1)o=m[c],this.cell(t,e,y[o],S,d[o],s+2,o.align)}return this.lastCellPos=j,this.table_x=t,this.table_y=e,this},D.calculateLineHeight=function(t,e,r){for(var n,i=0,o=0;o<t.length;o++){r[n=t[o]]=this.splitTextToSize(String(r[n]),e[n]-3);var s=this.internal.getLineHeight()*r[n].length+3;i<s&&(i=s)}return i},D.setTableHeaderRow=function(t){this.tableHeaderRow=t},D.printHeaderRow=function(t,e){if(!this.tableHeaderRow)throw"Property tableHeaderRow does not exist.";var r,n,i,o;if(this.printingHeaderRow=!0,void 0!==N){var s=N(this,U);q(s[0],s[1],s[2],s[3],-1)}this.setFontStyle("bold");var a=[];for(i=0,o=this.tableHeaderRow.length;i<o;i+=1)this.setFillColor(200,200,200),r=this.tableHeaderRow[i],e&&(this.margins.top=13,r[1]=this.margins&&this.margins.top||0,a.push(r)),n=[].concat(r),this.cell.apply(this,n.concat(t));0<a.length&&this.setTableHeaderRow(a),this.setFontStyle("normal"),this.printingHeaderRow=!1},function(t){function e(){this._isStrokeTransparent=!1,this._strokeOpacity=1,this.strokeStyle="#000000",this.fillStyle="#000000",this._isFillTransparent=!1,this._fillOpacity=1,this.font="12pt times",this.textBaseline="alphabetic",this.textAlign="start",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this._transform=[1,0,0,1,0,0],this.globalCompositeOperation="normal",this.globalAlpha=1,this._clip_path=[],this.ignoreClearRect=!1,this.copy=function(t){this._isStrokeTransparent=t._isStrokeTransparent,this._strokeOpacity=t._strokeOpacity,this.strokeStyle=t.strokeStyle,this._isFillTransparent=t._isFillTransparent,this._fillOpacity=t._fillOpacity,this.fillStyle=t.fillStyle,this.font=t.font,this.lineWidth=t.lineWidth,this.lineJoin=t.lineJoin,this.lineCap=t.lineCap,this.textBaseline=t.textBaseline,this.textAlign=t.textAlign,this._fontSize=t._fontSize,this._transform=t._transform.slice(0),this.globalCompositeOperation=t.globalCompositeOperation,this.globalAlpha=t.globalAlpha,this._clip_path=t._clip_path.slice(0),this.ignoreClearRect=t.ignoreClearRect}}t.events.push(["initialized",function(){((this.context2d.pdf=this).context2d.internal.pdf=this).context2d.ctx=new e,this.context2d.ctxStack=[],this.context2d.path=[]}]),t.context2d={pageWrapXEnabled:!1,pageWrapYEnabled:!1,pageWrapX:9999999,pageWrapY:9999999,ctx:new e,f2:function(t){return t.toFixed(2)},fillRect:function(t,e,r,n){if(!this._isFillTransparent()){t=this._wrapX(t),e=this._wrapY(e);var i=this._matrix_map_rect(this.ctx._transform,{x:t,y:e,w:r,h:n});this.pdf.rect(i.x,i.y,i.w,i.h,"f")}},strokeRect:function(t,e,r,n){if(!this._isStrokeTransparent()){t=this._wrapX(t),e=this._wrapY(e);var i=this._matrix_map_rect(this.ctx._transform,{x:t,y:e,w:r,h:n});this.pdf.rect(i.x,i.y,i.w,i.h,"s")}},clearRect:function(t,e,r,n){if(!this.ctx.ignoreClearRect){t=this._wrapX(t),e=this._wrapY(e);var i=this._matrix_map_rect(this.ctx._transform,{x:t,y:e,w:r,h:n});this.save(),this.setFillStyle("#ffffff"),this.pdf.rect(i.x,i.y,i.w,i.h,"f"),this.restore()}},save:function(){this.ctx._fontSize=this.pdf.internal.getFontSize();var t=new e;t.copy(this.ctx),this.ctxStack.push(this.ctx),this.ctx=t},restore:function(){this.ctx=this.ctxStack.pop(),this.setFillStyle(this.ctx.fillStyle),this.setStrokeStyle(this.ctx.strokeStyle),this.setFont(this.ctx.font),this.pdf.setFontSize(this.ctx._fontSize),this.setLineCap(this.ctx.lineCap),this.setLineWidth(this.ctx.lineWidth),this.setLineJoin(this.ctx.lineJoin)},rect:function(t,e,r,n){this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+n),this.lineTo(t,e+n),this.lineTo(t,e),this.closePath()},beginPath:function(){this.path=[]},closePath:function(){this.path.push({type:"close"})},_getRGBA:function(t){var e,r,n,i;if(!t)return{r:0,g:0,b:0,a:0,style:t};if(this.internal.rxTransparent.test(t))i=n=r=e=0;else{var o=this.internal.rxRgb.exec(t);null!=o?(e=parseInt(o[1]),r=parseInt(o[2]),n=parseInt(o[3]),i=1):null!=(o=this.internal.rxRgba.exec(t))?(e=parseInt(o[1]),r=parseInt(o[2]),n=parseInt(o[3]),i=parseFloat(o[4])):(i=1,"#"!=t.charAt(0)&&((t=Z.colorNameToHex(t))||(t="#000000")),4===t.length?(e=t.substring(1,2),e+=e,r=t.substring(2,3),r+=r,n=t.substring(3,4),n+=n):(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7)),e=parseInt(e,16),r=parseInt(r,16),n=parseInt(n,16))}return{r:e,g:r,b:n,a:i,style:t}},setFillStyle:function(t){var e=this._getRGBA(t);this.ctx.fillStyle=t,this.ctx._isFillTransparent=0===e.a,this.ctx._fillOpacity=e.a,this.pdf.setFillColor(e.r,e.g,e.b,{a:e.a}),this.pdf.setTextColor(e.r,e.g,e.b,{a:e.a})},setStrokeStyle:function(t){var e=this._getRGBA(t);this.ctx.strokeStyle=e.style,this.ctx._isStrokeTransparent=0===e.a,this.ctx._strokeOpacity=e.a,0===e.a?this.pdf.setDrawColor(255,255,255):(e.a,this.pdf.setDrawColor(e.r,e.g,e.b))},fillText:function(t,e,r,n){if(!this._isFillTransparent()){e=this._wrapX(e),r=this._wrapY(r);var i=this._matrix_map_point(this.ctx._transform,[e,r]);e=i[0],r=i[1];var o=57.2958*this._matrix_rotation(this.ctx._transform);if(0<this.ctx._clip_path.length){var s;(s=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var a=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._fill(null,!0),this.ctx._clip_path=this.path,this.path=a}var u=1;try{u=this._matrix_decompose(this._getTransform()).scale[0]}catch(t){}if(u<.01)this.pdf.text(t,e,this._getBaseline(r),null,o);else{var h=this.pdf.internal.getFontSize();this.pdf.setFontSize(h*u),this.pdf.text(t,e,this._getBaseline(r),null,o),this.pdf.setFontSize(h)}0<this.ctx._clip_path.length&&s.push("Q")}},strokeText:function(t,e,r,n){if(!this._isStrokeTransparent()){e=this._wrapX(e),r=this._wrapY(r);var i=this._matrix_map_point(this.ctx._transform,[e,r]);e=i[0],r=i[1];var o=57.2958*this._matrix_rotation(this.ctx._transform);if(0<this.ctx._clip_path.length){var s;(s=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var a=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._fill(null,!0),this.ctx._clip_path=this.path,this.path=a}var u=1;try{u=this._matrix_decompose(this._getTransform()).scale[0]}catch(t){}if(1===u)this.pdf.text(t,e,this._getBaseline(r),{stroke:!0},o);else{var h=this.pdf.internal.getFontSize();this.pdf.setFontSize(h*u),this.pdf.text(t,e,this._getBaseline(r),{stroke:!0},o),this.pdf.setFontSize(h)}0<this.ctx._clip_path.length&&s.push("Q")}},setFont:function(t){this.ctx.font=t;var e=/\s*(\w+)\s+(\w+)\s+(\w+)\s+([\d\.]+)(px|pt|em)\s+(.*)?/;if(null!=(l=e.exec(t))){var r=l[1],n=l[3],i=l[4],o=l[5],s=l[6];i="px"===o?Math.floor(parseFloat(i)):"em"===o?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)),this.pdf.setFontSize(i),"bold"===n||"700"===n?this.pdf.setFontStyle("bold"):"italic"===r?this.pdf.setFontStyle("italic"):this.pdf.setFontStyle("normal");var a,u,h=(d=s).toLowerCase().split(/\s*,\s*/);a=-1!=h.indexOf("arial")?"Arial":-1!=h.indexOf("verdana")?"Verdana":-1!=h.indexOf("helvetica")?"Helvetica":-1!=h.indexOf("sans-serif")?"sans-serif":-1!=h.indexOf("fixed")?"Fixed":-1!=h.indexOf("monospace")?"Monospace":-1!=h.indexOf("terminal")?"Terminal":-1!=h.indexOf("courier")?"Courier":-1!=h.indexOf("times")?"Times":-1!=h.indexOf("cursive")?"Cursive":-1!=h.indexOf("fantasy")?"Fantasy":(h.indexOf("serif"),"Serif"),u="bold"===n?"bold":"normal",this.pdf.setFont(a,u)}else{var l=(e=/\s*(\d+)(pt|px|em)\s+([\w "]+)\s*([\w "]+)?/).exec(t);if(null!=l){var c=l[1],d=l[3];(u=l[4])||(u="normal"),c="em"===o?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(c)),this.pdf.setFontSize(c),this.pdf.setFont(d,u)}}},setTextBaseline:function(t){this.ctx.textBaseline=t},getTextBaseline:function(){return this.ctx.textBaseline},setTextAlign:function(t){this.ctx.textAlign=t},getTextAlign:function(){return this.ctx.textAlign},setLineWidth:function(t){this.ctx.lineWidth=t,this.pdf.setLineWidth(t)},setLineCap:function(t){this.ctx.lineCap=t,this.pdf.setLineCap(t)},setLineJoin:function(t){this.ctx.lineJoin=t,this.pdf.setLineJoin(t)},moveTo:function(t,e){t=this._wrapX(t),e=this._wrapY(e);var r=this._matrix_map_point(this.ctx._transform,[t,e]),n={type:"mt",x:t=r[0],y:e=r[1]};this.path.push(n)},_wrapX:function(t){return this.pageWrapXEnabled?t%this.pageWrapX:t},_wrapY:function(t){return this.pageWrapYEnabled?(this._gotoPage(this._page(t)),(t-this.lastBreak)%this.pageWrapY):t},transform:function(t,e,r,n,i,o){this.ctx._transform=[t,e,r,n,i,o]},setTransform:function(t,e,r,n,i,o){this.ctx._transform=[t,e,r,n,i,o]},_getTransform:function(){return this.ctx._transform},lastBreak:0,pageBreaks:[],_page:function(t){if(this.pageWrapYEnabled){for(var e=this.lastBreak=0,r=0,n=0;n<this.pageBreaks.length;n++)if(t>=this.pageBreaks[n]){e++,0===this.lastBreak&&r++;var i=this.pageBreaks[n]-this.lastBreak;this.lastBreak=this.pageBreaks[n],r+=o=Math.floor(i/this.pageWrapY)}if(0===this.lastBreak){var o=Math.floor(t/this.pageWrapY)+1;r+=o}return r+e}return this.pdf.internal.getCurrentPageInfo().pageNumber},_gotoPage:function(t){},lineTo:function(t,e){t=this._wrapX(t),e=this._wrapY(e);var r=this._matrix_map_point(this.ctx._transform,[t,e]),n={type:"lt",x:t=r[0],y:e=r[1]};this.path.push(n)},bezierCurveTo:function(t,e,r,n,i,o){var s;t=this._wrapX(t),e=this._wrapY(e),r=this._wrapX(r),n=this._wrapY(n),i=this._wrapX(i),o=this._wrapY(o),i=(s=this._matrix_map_point(this.ctx._transform,[i,o]))[0],o=s[1];var a={type:"bct",x1:t=(s=this._matrix_map_point(this.ctx._transform,[t,e]))[0],y1:e=s[1],x2:r=(s=this._matrix_map_point(this.ctx._transform,[r,n]))[0],y2:n=s[1],x:i,y:o};this.path.push(a)},quadraticCurveTo:function(t,e,r,n){var i;t=this._wrapX(t),e=this._wrapY(e),r=this._wrapX(r),n=this._wrapY(n),r=(i=this._matrix_map_point(this.ctx._transform,[r,n]))[0],n=i[1];var o={type:"qct",x1:t=(i=this._matrix_map_point(this.ctx._transform,[t,e]))[0],y1:e=i[1],x:r,y:n};this.path.push(o)},arc:function(t,e,r,n,i,o){if(t=this._wrapX(t),e=this._wrapY(e),!this._matrix_is_identity(this.ctx._transform)){var s=this._matrix_map_point(this.ctx._transform,[t,e]);t=s[0],e=s[1];var a=this._matrix_map_point(this.ctx._transform,[0,0]),u=this._matrix_map_point(this.ctx._transform,[0,r]);r=Math.sqrt(Math.pow(u[0]-a[0],2)+Math.pow(u[1]-a[1],2))}var h={type:"arc",x:t,y:e,radius:r,startAngle:n,endAngle:i,anticlockwise:o};this.path.push(h)},drawImage:function(t,e,r,n,i,o,s,a,u){void 0!==o&&(e=o,r=s,n=a,i=u),e=this._wrapX(e),r=this._wrapY(r);var h,l=this._matrix_map_rect(this.ctx._transform,{x:e,y:r,w:n,h:i}),c=(this._matrix_map_rect(this.ctx._transform,{x:o,y:s,w:a,h:u}),/data:image\/(\w+).*/i.exec(t));h=null!=c?c[1]:"png",this.pdf.addImage(t,h,l.x,l.y,l.w,l.h)},_matrix_multiply:function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=r*t[0]+n*t[2],h=i*t[0]+o*t[2],l=s*t[0]+a*t[2]+t[4];return n=r*t[1]+n*t[3],o=i*t[1]+o*t[3],a=s*t[1]+a*t[3]+t[5],[r=u,n,i=h,o,s=l,a]},_matrix_rotation:function(t){return Math.atan2(t[2],t[0])},_matrix_decompose:function(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=Math.sqrt(e*e+r*r),s=(e/=o)*n+(r/=o)*i;n-=e*s,i-=r*s;var a=Math.sqrt(n*n+i*i);return s/=a,e*(i/=a)<r*(n/=a)&&(e=-e,r=-r,s=-s,o=-o),{scale:[o,0,0,a,0,0],translate:[1,0,0,1,t[4],t[5]],rotate:[e,r,-r,e,0,0],skew:[1,0,s,1,0,0]}},_matrix_map_point:function(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=e[0],h=e[1];return[u*r+h*i+s,u*n+h*o+a]},_matrix_map_point_obj:function(t,e){var r=this._matrix_map_point(t,[e.x,e.y]);return{x:r[0],y:r[1]}},_matrix_map_rect:function(t,e){var r=this._matrix_map_point(t,[e.x,e.y]),n=this._matrix_map_point(t,[e.x+e.w,e.y+e.h]);return{x:r[0],y:r[1],w:n[0]-r[0],h:n[1]-r[1]}},_matrix_is_identity:function(t){return 1==t[0]&&0==t[1]&&0==t[2]&&1==t[3]&&0==t[4]&&0==t[5]},rotate:function(t){var e=[Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0];this.ctx._transform=this._matrix_multiply(this.ctx._transform,e)},scale:function(t,e){var r=[t,0,0,e,0,0];this.ctx._transform=this._matrix_multiply(this.ctx._transform,r)},translate:function(t,e){var r=[1,0,0,1,t,e];this.ctx._transform=this._matrix_multiply(this.ctx._transform,r)},stroke:function(){if(0<this.ctx._clip_path.length){var t;(t=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var e=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._stroke(!0),this.ctx._clip_path=this.path,this.path=e,this._stroke(!1),t.push("Q")}else this._stroke(!1)},_stroke:function(t){if(t||!this._isStrokeTransparent()){for(var e=[],r=this.path,n=0;n<r.length;n++){var i=r[n];switch(i.type){case"mt":e.push({start:i,deltas:[],abs:[]});break;case"lt":c=[i.x-r[n-1].x,i.y-r[n-1].y],e[e.length-1].deltas.push(c),e[e.length-1].abs.push(i);break;case"bct":c=[i.x1-r[n-1].x,i.y1-r[n-1].y,i.x2-r[n-1].x,i.y2-r[n-1].y,i.x-r[n-1].x,i.y-r[n-1].y],e[e.length-1].deltas.push(c);break;case"qct":var o=r[n-1].x+2/3*(i.x1-r[n-1].x),s=r[n-1].y+2/3*(i.y1-r[n-1].y),a=i.x+2/3*(i.x1-i.x),u=i.y+2/3*(i.y1-i.y),h=i.x,l=i.y,c=[o-r[n-1].x,s-r[n-1].y,a-r[n-1].x,u-r[n-1].y,h-r[n-1].x,l-r[n-1].y];e[e.length-1].deltas.push(c);break;case"arc":0==e.length&&e.push({start:{x:0,y:0},deltas:[],abs:[]}),e[e.length-1].arc=!0,e[e.length-1].abs.push(i)}}for(n=0;n<e.length;n++){var d;if(d=n==e.length-1?"s":null,e[n].arc)for(var f=e[n].abs,p=0;p<f.length;p++){var m=f[p],g=360*m.startAngle/(2*Math.PI),v=360*m.endAngle/(2*Math.PI),y=m.x,b=m.y;this.internal.arc2(this,y,b,m.radius,g,v,m.anticlockwise,d,t)}else{y=e[n].start.x,b=e[n].start.y;t?(this.pdf.lines(e[n].deltas,y,b,null,null),this.pdf.clip_fixed()):this.pdf.lines(e[n].deltas,y,b,null,d)}}}},_isFillTransparent:function(){return this.ctx._isFillTransparent||0==this.globalAlpha},_isStrokeTransparent:function(){return this.ctx._isStrokeTransparent||0==this.globalAlpha},fill:function(t){if(0<this.ctx._clip_path.length){var e;(e=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var r=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._fill(t,!0),this.ctx._clip_path=this.path,this.path=r,this._fill(t,!1),e.push("Q")}else this._fill(t,!1)},_fill:function(t,e){if(!this._isFillTransparent()){var r,n="function"==typeof this.pdf.internal.newObject2;r=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage();var i=[],o=window.outIntercept;if(n)switch(this.ctx.globalCompositeOperation){case"normal":case"source-over":break;case"destination-in":case"destination-out":var s=this.pdf.internal.newStreamObject(),a=this.pdf.internal.newObject2();a.push("<</Type /ExtGState"),a.push("/SMask <</S /Alpha /G "+s.objId+" 0 R>>"),a.push(">>"),d="MASK"+a.objId,this.pdf.internal.addGraphicsState(d,a.objId);var u="/"+d+" gs";r.splice(0,0,"q"),r.splice(1,0,u),r.push("Q"),window.outIntercept=s;break;default:var h="/"+this.pdf.internal.blendModeMap[this.ctx.globalCompositeOperation.toUpperCase()];h&&this.pdf.internal.out(h+" gs")}var l=this.ctx.globalAlpha;if(this.ctx._fillOpacity<1&&(l=this.ctx._fillOpacity),n){var c=this.pdf.internal.newObject2();c.push("<</Type /ExtGState"),c.push("/CA "+l),c.push("/ca "+l),c.push(">>");var d="GS_O_"+c.objId;this.pdf.internal.addGraphicsState(d,c.objId),this.pdf.internal.out("/"+d+" gs")}for(var f=this.path,p=0;p<f.length;p++){var m=f[p];switch(m.type){case"mt":i.push({start:m,deltas:[],abs:[]});break;case"lt":_=[m.x-f[p-1].x,m.y-f[p-1].y],i[i.length-1].deltas.push(_),i[i.length-1].abs.push(m);break;case"bct":_=[m.x1-f[p-1].x,m.y1-f[p-1].y,m.x2-f[p-1].x,m.y2-f[p-1].y,m.x-f[p-1].x,m.y-f[p-1].y],i[i.length-1].deltas.push(_);break;case"qct":var g=f[p-1].x+2/3*(m.x1-f[p-1].x),v=f[p-1].y+2/3*(m.y1-f[p-1].y),y=m.x+2/3*(m.x1-m.x),b=m.y+2/3*(m.y1-m.y),x=m.x,w=m.y,_=[g-f[p-1].x,v-f[p-1].y,y-f[p-1].x,b-f[p-1].y,x-f[p-1].x,w-f[p-1].y];i[i.length-1].deltas.push(_);break;case"arc":0===i.length&&i.push({deltas:[],abs:[]}),i[i.length-1].arc=!0,i[i.length-1].abs.push(m);break;case"close":i.push({close:!0})}}for(p=0;p<i.length;p++){var T;if(p==i.length-1?(T="f","evenodd"===t&&(T+="*")):T=null,i[p].close)this.pdf.internal.out("h"),this.pdf.internal.out("f");else if(i[p].arc){i[p].start&&this.internal.move2(this,i[p].start.x,i[p].start.y);for(var E=i[p].abs,S=0;S<E.length;S++){var C=E[S];if(void 0!==C.startAngle){var O=360*C.startAngle/(2*Math.PI),P=360*C.endAngle/(2*Math.PI),A=C.x,M=C.y;if(0===S&&this.internal.move2(this,A,M),this.internal.arc2(this,A,M,C.radius,O,P,C.anticlockwise,null,e),S===E.length-1&&i[p].start){A=i[p].start.x,M=i[p].start.y;this.internal.line2(I,A,M)}}else this.internal.line2(I,C.x,C.y)}}else{A=i[p].start.x,M=i[p].start.y;e?(this.pdf.lines(i[p].deltas,A,M,null,null),this.pdf.clip_fixed()):this.pdf.lines(i[p].deltas,A,M,null,T)}}window.outIntercept=o}},pushMask:function(){if("function"==typeof this.pdf.internal.newObject2){var t=this.pdf.internal.newStreamObject(),e=this.pdf.internal.newObject2();e.push("<</Type /ExtGState"),e.push("/SMask <</S /Alpha /G "+t.objId+" 0 R>>"),e.push(">>");var r="MASK"+e.objId;this.pdf.internal.addGraphicsState(r,e.objId);var n="/"+r+" gs";this.pdf.internal.out(n)}},clip:function(){if(0<this.ctx._clip_path.length)for(var t=0;t<this.path.length;t++)this.ctx._clip_path.push(this.path[t]);else this.ctx._clip_path=this.path;this.path=[]},measureText:function(e){var r=this.pdf;return{getWidth:function(){var t=r.internal.getFontSize();return 1.3333*(r.getStringUnitWidth(e)*t/r.internal.scaleFactor)},get width(){return this.getWidth(e)}}},_getBaseline:function(t){var e=parseInt(this.pdf.internal.getFontSize()),r=.25*e;switch(this.ctx.textBaseline){case"bottom":return t-r;case"top":return t+e;case"hanging":return t+e-r;case"middle":return t+e/2-r;case"ideographic":return t;case"alphabetic":default:return t}}};var I=t.context2d;Object.defineProperty(I,"fillStyle",{set:function(t){this.setFillStyle(t)},get:function(){return this.ctx.fillStyle}}),Object.defineProperty(I,"strokeStyle",{set:function(t){this.setStrokeStyle(t)},get:function(){return this.ctx.strokeStyle}}),Object.defineProperty(I,"lineWidth",{set:function(t){this.setLineWidth(t)},get:function(){return this.ctx.lineWidth}}),Object.defineProperty(I,"lineCap",{set:function(t){this.setLineCap(t)},get:function(){return this.ctx.lineCap}}),Object.defineProperty(I,"lineJoin",{set:function(t){this.setLineJoin(t)},get:function(){return this.ctx.lineJoin}}),Object.defineProperty(I,"miterLimit",{set:function(t){this.ctx.miterLimit=t},get:function(){return this.ctx.miterLimit}}),Object.defineProperty(I,"textBaseline",{set:function(t){this.setTextBaseline(t)},get:function(){return this.getTextBaseline()}}),Object.defineProperty(I,"textAlign",{set:function(t){this.setTextAlign(t)},get:function(){return this.getTextAlign()}}),Object.defineProperty(I,"font",{set:function(t){this.setFont(t)},get:function(){return this.ctx.font}}),Object.defineProperty(I,"globalCompositeOperation",{set:function(t){this.ctx.globalCompositeOperation=t},get:function(){return this.ctx.globalCompositeOperation}}),Object.defineProperty(I,"globalAlpha",{set:function(t){this.ctx.globalAlpha=t},get:function(){return this.ctx.globalAlpha}}),Object.defineProperty(I,"ignoreClearRect",{set:function(t){this.ctx.ignoreClearRect=t},get:function(){return this.ctx.ignoreClearRect}}),I.internal={},I.internal.rxRgb=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,I.internal.rxRgba=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d\.]+)\s*\)/,I.internal.rxTransparent=/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/,I.internal.arc=function(t,e,r,n,i,o,s,a){for(var u=this.pdf.internal.scaleFactor,h=this.pdf.internal.pageSize.height,l=this.pdf.internal.f2,c=i*(Math.PI/180),d=o*(Math.PI/180),f=this.createArc(n,c,d,s),p=0;p<f.length;p++){var m=f[p];0===p?this.pdf.internal.out([l((m.x1+e)*u),l((h-(m.y1+r))*u),"m",l((m.x2+e)*u),l((h-(m.y2+r))*u),l((m.x3+e)*u),l((h-(m.y3+r))*u),l((m.x4+e)*u),l((h-(m.y4+r))*u),"c"].join(" ")):this.pdf.internal.out([l((m.x2+e)*u),l((h-(m.y2+r))*u),l((m.x3+e)*u),l((h-(m.y3+r))*u),l((m.x4+e)*u),l((h-(m.y4+r))*u),"c"].join(" ")),t._lastPoint={x:e,y:r}}null!==a&&this.pdf.internal.out(this.pdf.internal.getStyle(a))},I.internal.arc2=function(t,e,r,n,i,o,s,a,u){var h=e,l=r;u?(this.arc(t,h,l,n,i,o,s,null),this.pdf.clip_fixed()):this.arc(t,h,l,n,i,o,s,a)},I.internal.move2=function(t,e,r){var n=this.pdf.internal.scaleFactor,i=this.pdf.internal.pageSize.height,o=this.pdf.internal.f2;this.pdf.internal.out([o(e*n),o((i-r)*n),"m"].join(" ")),t._lastPoint={x:e,y:r}},I.internal.line2=function(t,e,r){var n=this.pdf.internal.scaleFactor,i=this.pdf.internal.pageSize.height,o=this.pdf.internal.f2,s={x:e,y:r};this.pdf.internal.out([o(s.x*n),o((i-s.y)*n),"l"].join(" ")),t._lastPoint=s},I.internal.createArc=function(t,e,r,n){var i=2*Math.PI,o=Math.PI/2,s=e;for((s<i||i<s)&&(s%=i),s<0&&(s=i+s);r<e;)e-=i;var a=Math.abs(r-e);a<i&&n&&(a=i-a);for(var u=[],h=n?-1:1,l=s;1e-5<a;){var c=l+h*Math.min(a,o);u.push(this.createSmallArc(t,l,c)),a-=Math.abs(c-l),l=c}return u},I.internal.getCurrentPage=function(){return this.pdf.internal.pages[this.pdf.internal.getCurrentPageInfo().pageNumber]},I.internal.createSmallArc=function(t,e,r){var n=(r-e)/2,i=t*Math.cos(n),o=t*Math.sin(n),s=i,a=-o,u=s*s+a*a,h=u+s*i+a*o,l=4/3*(Math.sqrt(2*u*h)-h)/(s*o-a*i),c=s-l*a,d=a+l*s,f=c,p=-d,m=n+e,g=Math.cos(m),v=Math.sin(m);return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:c*g-d*v,y2:c*v+d*g,x3:f*g-p*v,y3:f*v+p*g,x4:t*Math.cos(r),y4:t*Math.sin(r)}}}(f.API),function(t){var P,A,i,s,a,u,h,l,M,b,d,c,f,r,I,R,p,m,g,k;P=function(){function e(){}return function(t){return e.prototype=t,new e}}(),b=function(t){var e,r,n,i,o,s,a;for(r=0,n=t.length,e=void 0,s=i=!1;!i&&r!==n;)(e=t[r]=t[r].trimLeft())&&(i=!0),r++;for(r=n-1;n&&!s&&-1!==r;)(e=t[r]=t[r].trimRight())&&(s=!0),r--;for(o=/\s+$/g,a=!0,r=0;r!==n;)"\u2028"!=t[r]&&(e=t[r].replace(/\s+/g," "),a&&(e=e.trimLeft()),e&&(a=o.test(e)),t[r]=e),r++;return t},c=function(t){var e,r,n;for(e=void 0,r=(n=t.split(",")).shift();!e&&r;)e=i[r.trim().toLowerCase()],r=n.shift();return e},f=function(t){var e;return-1<(t="auto"===t?"0px":t).indexOf("em")&&!isNaN(Number(t.replace("em","")))&&(t=18.719*Number(t.replace("em",""))+"px"),-1<t.indexOf("pt")&&!isNaN(Number(t.replace("pt","")))&&(t=1.333*Number(t.replace("pt",""))+"px"),(e=r[t])?e:void 0!==(e={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[{css_line_height_string:t}])?r[t]=e/16:(e=parseFloat(t))?r[t]=e/16:3===(e=t.match(/([\d\.]+)(px)/)).length?r[t]=parseFloat(e[1])/16:r[t]=1},M=function(t){var e,r,n,i,o;return o=t,i=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(o,null):o.currentStyle?o.currentStyle:o.style,r=void 0,(e={})["font-family"]=c((n=function(t){return t=t.replace(/-\D/g,function(t){return t.charAt(1).toUpperCase()}),i[t]})("font-family"))||"times",e["font-style"]=s[n("font-style")]||"normal",e["text-align"]=a[n("text-align")]||"left","bold"===(r=u[n("font-weight")]||"normal")&&("normal"===e["font-style"]?e["font-style"]=r:e["font-style"]=r+e["font-style"]),e["font-size"]=f(n("font-size"))||1,e["line-height"]=f(n("line-height"))||1,e.display="inline"===n("display")?"inline":"block",r="block"===e.display,e["margin-top"]=r&&f(n("margin-top"))||0,e["margin-bottom"]=r&&f(n("margin-bottom"))||0,e["padding-top"]=r&&f(n("padding-top"))||0,e["padding-bottom"]=r&&f(n("padding-bottom"))||0,e["margin-left"]=r&&f(n("margin-left"))||0,e["margin-right"]=r&&f(n("margin-right"))||0,e["padding-left"]=r&&f(n("padding-left"))||0,e["padding-right"]=r&&f(n("padding-right"))||0,e["page-break-before"]=n("page-break-before")||"auto",e.float=h[n("cssFloat")]||"none",e.clear=l[n("clear")]||"none",e.color=n("color"),e},I=function(t,e,r){var n,i,o,s,a;if(o=!1,s=i=void 0,n=r["#"+t.id])if("function"==typeof n)o=n(t,e);else for(i=0,s=n.length;!o&&i!==s;)o=n[i](t,e),i++;if(n=r[t.nodeName],!o&&n)if("function"==typeof n)o=n(t,e);else for(i=0,s=n.length;!o&&i!==s;)o=n[i](t,e),i++;for(a=t.className?t.className.split(" "):[],i=0;i<a.length;i++)if(n=r["."+a[i]],!o&&n)if("function"==typeof n)o=n(t,e);else for(i=0,s=n.length;!o&&i!==s;)o=n[i](t,e),i++;return o},k=function(t,e){var r,n,i,o,s,a,u,h,l;for(r=[],n=[],i=0,l=t.rows[0].cells.length,u=t.clientWidth;i<l;)h=t.rows[0].cells[i],n[i]={name:h.textContent.toLowerCase().replace(/\s+/g,""),prompt:h.textContent.replace(/\r?\n/g,""),width:h.clientWidth/u*e.pdf.internal.pageSize.width},i++;for(i=1;i<t.rows.length;){for(a=t.rows[i],s={},o=0;o<a.cells.length;)s[n[o].name]=a.cells[o].textContent.replace(/\r?\n/g,""),o++;r.push(s),i++}return{rows:r,headers:n}};var D={SCRIPT:1,STYLE:1,NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},L=1;A=function(t,i,e){var r,n,o,s,a,u,h,l;for(n=t.childNodes,r=void 0,(a="block"===(o=M(t)).display)&&(i.setBlockBoundary(),i.setBlockStyle(o)),s=0,u=n.length;s<u;){if("object"===(void 0===(r=n[s])?"undefined":ct(r))){if(i.executeWatchFunctions(r),1===r.nodeType&&"HEADER"===r.nodeName){var c=r,d=i.pdf.margins_doc.top;i.pdf.internal.events.subscribe("addPage",function(t){i.y=d,A(c,i,e),i.pdf.margins_doc.top=i.y+10,i.y+=10},!1)}if(8===r.nodeType&&"#comment"===r.nodeName)~r.textContent.indexOf("ADD_PAGE")&&(i.pdf.addPage(),i.y=i.pdf.margins_doc.top);else if(1!==r.nodeType||D[r.nodeName])if(3===r.nodeType){var f=r.nodeValue;if(r.nodeValue&&"LI"===r.parentNode.nodeName)if("OL"===r.parentNode.parentNode.nodeName)f=L+++". "+f;else{var p=o["font-size"],m=(3-.75*p)*i.pdf.internal.scaleFactor,g=.75*p*i.pdf.internal.scaleFactor,v=1.74*p/i.pdf.internal.scaleFactor;l=function(t,e){this.pdf.circle(t+m,e+g,v,"FD")}}16&r.ownerDocument.body.compareDocumentPosition(r)&&i.addText(f,o)}else"string"==typeof r&&i.addText(r,o);else{var y;if("IMG"===r.nodeName){var b=r.getAttribute("src");y=R[i.pdf.sHashCode(b)||b]}if(y){i.pdf.internal.pageSize.height-i.pdf.margins_doc.bottom<i.y+r.height&&i.y>i.pdf.margins_doc.top&&(i.pdf.addPage(),i.y=i.pdf.margins_doc.top,i.executeWatchFunctions(r));var x=M(r),w=i.x,_=12/i.pdf.internal.scaleFactor,T=(x["margin-left"]+x["padding-left"])*_,E=(x["margin-right"]+x["padding-right"])*_,S=(x["margin-top"]+x["padding-top"])*_,C=(x["margin-bottom"]+x["padding-bottom"])*_;void 0!==x.float&&"right"===x.float?w+=i.settings.width-r.width-E:w+=T,i.pdf.addImage(y,w,i.y+S,r.width,r.height),y=void 0,"right"===x.float||"left"===x.float?(i.watchFunctions.push(function(t,e,r,n){return i.y>=e?(i.x+=t,i.settings.width+=r,!0):!!(n&&1===n.nodeType&&!D[n.nodeName]&&i.x+n.width>i.pdf.margins_doc.left+i.pdf.margins_doc.width)&&(i.x+=t,i.y=e,i.settings.width+=r,!0)}.bind(this,"left"===x.float?-r.width-T-E:0,i.y+r.height+S+C,r.width)),i.watchFunctions.push(function(t,e,r){return!(i.y<t&&e===i.pdf.internal.getNumberOfPages())||1===r.nodeType&&"both"===M(r).clear&&(i.y=t,!0)}.bind(this,i.y+r.height,i.pdf.internal.getNumberOfPages())),i.settings.width-=r.width+T+E,"left"===x.float&&(i.x+=r.width+T+E)):i.y+=r.height+S+C}else if("TABLE"===r.nodeName)h=k(r,i),i.y+=10,i.pdf.table(i.x,i.y,h.rows,h.headers,{autoSize:!1,printHeaders:e.printHeaders,margins:i.pdf.margins_doc,css:M(r)}),i.y=i.pdf.lastCellPos.y+i.pdf.lastCellPos.h+20;else if("OL"===r.nodeName||"UL"===r.nodeName)L=1,I(r,i,e)||A(r,i,e),i.y+=10;else if("LI"===r.nodeName){var O=i.x;i.x+=20/i.pdf.internal.scaleFactor,i.y+=3,I(r,i,e)||A(r,i,e),i.x=O}else"BR"===r.nodeName?(i.y+=o["font-size"]*i.pdf.internal.scaleFactor,i.addText("\u2028",P(o))):I(r,i,e)||A(r,i,e)}}s++}if(e.outY=i.y,a)return i.setBlockBoundary(l)},R={},p=function(t,o,e,r){function s(){o.pdf.internal.events.publish("imagesLoaded"),r(a)}for(var a,n=t.getElementsByTagName("img"),i=n.length,u=0;i--;)!function(e,r,n){if(e){var i=new Image;a=++u,i.crossOrigin="",i.onerror=i.onload=function(){if(i.complete&&(0===i.src.indexOf("data:image/")&&(i.width=r||i.width||0,i.height=n||i.height||0),i.width+i.height)){var t=o.pdf.sHashCode(e)||e;R[t]=R[t]||i}--u||s()},i.src=e}}(n[i].getAttribute("src"),n[i].width,n[i].height);return u||s()},m=function(t,o,s){var a=t.getElementsByTagName("footer");if(0<a.length){a=a[0];var e=o.pdf.internal.write,r=o.y;o.pdf.internal.write=function(){},A(a,o,s);var u=Math.ceil(o.y-r)+5;o.y=r,o.pdf.internal.write=e,o.pdf.margins_doc.bottom+=u;for(var n=function(t){var e=void 0!==t?t.pageNumber:1,r=o.y;o.y=o.pdf.internal.pageSize.height-o.pdf.margins_doc.bottom,o.pdf.margins_doc.bottom-=u;for(var n=a.getElementsByTagName("span"),i=0;i<n.length;++i)-1<(" "+n[i].className+" ").replace(/[\n\t]/g," ").indexOf(" pageCounter ")&&(n[i].innerHTML=e),-1<(" "+n[i].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")&&(n[i].innerHTML="###jsPDFVarTotalPages###");A(a,o,s),o.pdf.margins_doc.bottom+=u,o.y=r},i=a.getElementsByTagName("span"),h=0;h<i.length;++h)-1<(" "+i[h].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")&&o.pdf.internal.events.subscribe("htmlRenderingFinished",o.pdf.putTotalPages.bind(o.pdf,"###jsPDFVarTotalPages###"),!0);o.pdf.internal.events.subscribe("addPage",n,!1),n(),D.FOOTER=1}},g=function(t,e,r,n,i,o){if(!e)return!1;var s,a,u,h;"string"==typeof e||e.parentNode||(e=""+e.innerHTML),"string"==typeof e&&(s=e.replace(/<\/?script[^>]*?>/gi,""),h="jsPDFhtmlText"+Date.now().toString()+(1e3*Math.random()).toFixed(0),(u=document.createElement("div")).style.cssText="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;",u.innerHTML='<iframe style="height:1px;width:1px" name="'+h+'" />',document.body.appendChild(u),(a=window.frames[h]).document.open(),a.document.writeln(s),a.document.close(),e=a.document.body);var l,c=new d(t,r,n,i);return p.call(this,e,c,i.elementHandlers,function(t){m(e,c,i.elementHandlers),A(e,c,i.elementHandlers),c.pdf.internal.events.publish("htmlRenderingFinished"),l=c.dispose(),"function"==typeof o&&o(l)}),l||{x:c.x,y:c.y}},(d=function(t,e,r,n){return this.pdf=t,this.x=e,this.y=r,this.settings=n,this.watchFunctions=[],this.init(),this}).prototype.init=function(){return this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},d.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y,ready:!0}},d.prototype.executeWatchFunctions=function(t){var e=!1,r=[];if(0<this.watchFunctions.length){for(var n=0;n<this.watchFunctions.length;++n)!0===this.watchFunctions[n](t)?e=!0:r.push(this.watchFunctions[n]);this.watchFunctions=r}return e},d.prototype.splitFragmentsIntoLines=function(t,e){var r,n,i,o,s,a,u,h,l,c,d,f,p,m;for(c=this.pdf.internal.scaleFactor,o={},a=u=h=m=s=i=l=n=void 0,f=[d=[]],r=0,p=this.settings.width;t.length;)if(s=t.shift(),m=e.shift(),s)if((i=o[(n=m["font-family"])+(l=m["font-style"])])||(i=this.pdf.internal.getFont(n,l).metadata.Unicode,o[n+l]=i),h={widths:i.widths,kerning:i.kerning,fontSize:12*m["font-size"],textIndent:r},u=this.pdf.getStringUnitWidth(s,h)*h.fontSize/c,"\u2028"==s)d=[],f.push(d);else if(p<r+u){for(a=this.pdf.splitTextToSize(s,p,h),d.push([a.shift(),m]);a.length;)d=[[a.shift(),m]],f.push(d);r=this.pdf.getStringUnitWidth(d[0][0],h)*h.fontSize/c}else d.push([s,m]),r+=u;if(void 0!==m["text-align"]&&("center"===m["text-align"]||"right"===m["text-align"]||"justify"===m["text-align"]))for(var g=0;g<f.length;++g){var v=this.pdf.getStringUnitWidth(f[g][0][0],h)*h.fontSize/c;0<g&&(f[g][0][1]=P(f[g][0][1]));var y=p-v;if("right"===m["text-align"])f[g][0][1]["margin-left"]=y;else if("center"===m["text-align"])f[g][0][1]["margin-left"]=y/2;else if("justify"===m["text-align"]){var b=f[g][0][0].split(" ").length-1;f[g][0][1]["word-spacing"]=y/b,g===f.length-1&&(f[g][0][1]["word-spacing"]=0)}}return f},d.prototype.RenderTextFragment=function(t,e){var r,n;n=0,this.pdf.internal.pageSize.height-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()&&(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),e.color,"Td"),n=Math.max(n,e["line-height"],e["font-size"]),this.pdf.internal.write(0,(-12*n).toFixed(2),"Td")),r=this.pdf.internal.getFont(e["font-family"],e["font-style"]);var i=this.getPdfColor(e.color);i!==this.lastTextColor&&(this.pdf.internal.write(i),this.lastTextColor=i),void 0!==e["word-spacing"]&&0<e["word-spacing"]&&this.pdf.internal.write(e["word-spacing"].toFixed(2),"Tw"),this.pdf.internal.write("/"+r.id,(12*e["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(t)+") Tj"),void 0!==e["word-spacing"]&&this.pdf.internal.write(0,"Tw")},d.prototype.getPdfColor=function(t){var e,r,n,i=/rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+\s*)\)/.exec(t);if(null!=i?(e=parseInt(i[1]),r=parseInt(i[2]),n=parseInt(i[3])):("#"!=t.charAt(0)&&((t=Z.colorNameToHex(t))||(t="#000000")),e=t.substring(1,3),e=parseInt(e,16),r=t.substring(3,5),r=parseInt(r,16),n=t.substring(5,7),n=parseInt(n,16)),"string"==typeof e&&/^#[0-9A-Fa-f]{6}$/.test(e)){var o=parseInt(e.substr(1),16);e=o>>16&255,r=o>>8&255,n=255&o}var s=this.f3;return 0===e&&0===r&&0===n||void 0===r?s(e/255)+" g":[s(e/255),s(r/255),s(n/255),"rg"].join(" ")},d.prototype.f3=function(t){return t.toFixed(3)},d.prototype.renderParagraph=function(t){var e,r,n,i,o,s,a,u,h,l,c,d,f;if(n=b(this.paragraph.text),d=this.paragraph.style,e=this.paragraph.blockstyle,this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:e},n.join("").trim()){a=this.splitFragmentsIntoLines(n,d),u=s=void 0,r=12/this.pdf.internal.scaleFactor,this.priorMarginBottom=this.priorMarginBottom||0,c=(Math.max((e["margin-top"]||0)-this.priorMarginBottom,0)+(e["padding-top"]||0))*r,l=((e["margin-bottom"]||0)+(e["padding-bottom"]||0))*r,this.priorMarginBottom=e["margin-bottom"]||0,"always"===e["page-break-before"]&&(this.pdf.addPage(),this.y=0,c=((e["margin-top"]||0)+(e["padding-top"]||0))*r),h=this.pdf.internal.write,o=i=void 0,this.y+=c,h("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var p=0;a.length;){for(i=u=0,o=(s=a.shift()).length;i!==o;)s[i][0].trim()&&(u=Math.max(u,s[i][1]["line-height"],s[i][1]["font-size"]),f=7*s[i][1]["font-size"]),i++;var m=0,g=0;for(void 0!==s[0][1]["margin-left"]&&0<s[0][1]["margin-left"]&&(m=(g=this.pdf.internal.getCoordinateString(s[0][1]["margin-left"]))-p,p=g),h(m+Math.max(e["margin-left"]||0,0)*r,(-12*u).toFixed(2),"Td"),i=0,o=s.length;i!==o;)s[i][0]&&this.RenderTextFragment(s[i][0],s[i][1]),i++;if(this.y+=u*r,this.executeWatchFunctions(s[0][1])&&0<a.length){var v=[],y=[];a.forEach(function(t){for(var e=0,r=t.length;e!==r;)t[e][0]&&(v.push(t[e][0]+" "),y.push(t[e][1])),++e}),a=this.splitFragmentsIntoLines(b(v),y),h("ET","Q"),h("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")}}return t&&"function"==typeof t&&t.call(this,this.x-9,this.y-f/2),h("ET","Q"),this.y+=l}},d.prototype.setBlockBoundary=function(t){return this.renderParagraph(t)},d.prototype.setBlockStyle=function(t){return this.paragraph.blockstyle=t},d.prototype.addText=function(t,e){return this.paragraph.text.push(t),this.paragraph.style.push(e)},i={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",courier:"courier"},u={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},s={normal:"normal",italic:"italic",oblique:"italic"},a={left:"left",right:"right",center:"center",justify:"justify"},h={none:"none",right:"right",left:"left"},l={none:"none",both:"both"},r={normal:1},t.fromHTML=function(t,e,r,n,i,o){return this.margins_doc=o||{top:0,bottom:0},n||(n={}),n.elementHandlers||(n.elementHandlers={}),g(this,t,isNaN(e)?4:e,isNaN(r)?4:r,n,i)}}(f.API),f.API.addJS=function(t){return k=t,this.internal.events.subscribe("postPutResources",function(t){I=this.internal.newObject(),this.internal.write("<< /Names [(EmbeddedJS) "+(I+1)+" 0 R] >>","endobj"),R=this.internal.newObject(),this.internal.write("<< /S /JavaScript /JS (",k,") >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==I&&void 0!==R&&this.internal.write("/Names <</JavaScript "+I+" 0 R>>")}),this},(O=f.API).events.push(["postPutResources",function(){var t=this,e=/^(\d+) 0 obj$/;if(0<this.outline.root.children.length)for(var r=t.outline.render().split(/\r\n/),n=0;n<r.length;n++){var i=r[n],o=e.exec(i);if(null!=o){var s=o[1];t.internal.newObjectDeferredBegin(s)}t.internal.write(i)}if(this.outline.createNamedDestinations){var a=this.internal.pages.length,u=[];for(n=0;n<a;n++){var h=t.internal.newObject();u.push(h);var l=t.internal.getPageInfo(n+1);t.internal.write("<< /D["+l.objId+" 0 R /XYZ null null null]>> endobj")}var c=t.internal.newObject();for(t.internal.write("<< /Names [ "),n=0;n<u.length;n++)t.internal.write("(page_"+(n+1)+")"+u[n]+" 0 R");t.internal.write(" ] >>","endobj"),t.internal.newObject(),t.internal.write("<< /Dests "+c+" 0 R"),t.internal.write(">>","endobj")}}]),O.events.push(["putCatalog",function(){0<this.outline.root.children.length&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+namesOid+" 0 R"))}]),O.events.push(["initialized",function(){var o=this;o.outline={createNamedDestinations:!1,root:{children:[]}},o.outline.add=function(t,e,r){var n={title:e,options:r,children:[]};return null==t&&(t=this.root),t.children.push(n),n},o.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=o,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},o.outline.genIds_r=function(t){t.id=o.internal.newObjectDeferred();for(var e=0;e<t.children.length;e++)this.genIds_r(t.children[e])},o.outline.renderRoot=function(t){this.objStart(t),this.line("/Type /Outlines"),0<t.children.length&&(this.line("/First "+this.makeRef(t.children[0])),this.line("/Last "+this.makeRef(t.children[t.children.length-1]))),this.line("/Count "+this.count_r({count:0},t)),this.objEnd()},o.outline.renderItems=function(t){for(n=0;n<t.children.length;n++){i=t.children[n],this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(t)),0<n&&this.line("/Prev "+this.makeRef(t.children[n-1])),n<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[n+1])),0<i.children.length&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var e=this.count=this.count_r({count:0},i);if(0<e&&this.line("/Count "+e),i.options&&i.options.pageNumber){var r=o.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+r.objId+" 0 R /XYZ 0 "+this.ctx.pdf.internal.pageSize.height+" 0]")}this.objEnd()}for(var n=0;n<t.children.length;n++){var i=t.children[n];this.renderItems(i)}},o.outline.line=function(t){this.ctx.val+=t+"\r\n"},o.outline.makeRef=function(t){return t.id+" 0 R"},o.outline.makeString=function(t){return"("+o.internal.pdfEscape(t)+")"},o.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj\r\n<<\r\n"},o.outline.objEnd=function(t){this.ctx.val+=">> \r\nendobj\r\n"},o.outline.count_r=function(t,e){for(var r=0;r<e.children.length;r++)t.count++,this.count_r(t,e.children[r]);return t.count}}]),P=f.API,A=function(){var t="function"==typeof ft;if(!t)throw new Error("requires deflate.js for compression");return t},M=function(t,e,r,n){var i=5,o=y;switch(n){case P.image_compression.FAST:i=3,o=v;break;case P.image_compression.MEDIUM:i=6,o=b;break;case P.image_compression.SLOW:i=9,o=E}t=g(t,e,r,o);var s=new Uint8Array(p(i)),a=m(t),u=new ft(i),h=u.append(t),l=u.flush(),c=s.length+h.length+l.length,d=new Uint8Array(c+4);return d.set(s),d.set(h,s.length),d.set(l,s.length+h.length),d[c++]=a>>>24&255,d[c++]=a>>>16&255,d[c++]=a>>>8&255,d[c++]=255&a,P.arrayBufferToBinaryString(d)},p=function(t,e){var r=Math.LOG2E*Math.log(32768)-8<<4|8,n=r<<8;return n|=Math.min(3,(e-1&255)>>1)<<6,n|=0,[r,255&(n+=31-n%31)]},m=function(t,e){for(var r,n=1,i=0,o=t.length,s=0;0<o;){for(o-=r=e<o?e:o;i+=n+=t[s++],--r;);n%=65521,i%=65521}return(i<<16|n)>>>0},g=function(t,e,r,n){for(var i,o,s,a=t.length/e,u=new Uint8Array(t.length+a),h=S(),l=0;l<a;l++){if(s=l*e,i=t.subarray(s,s+e),n)u.set(n(i,r,o),s+l);else{for(var c=0,d=h.length,f=[];c<d;c++)f[c]=h[c](i,r,o);var p=C(f.concat());u.set(f[p],s+l)}o=i}return u},s=function(t,e,r){var n=Array.apply([],t);return n.unshift(0),n},v=function(t,e,r){var n,i=[],o=0,s=t.length;for(i[0]=1;o<s;o++)n=t[o-e]||0,i[o+1]=t[o]-n+256&255;return i},y=function(t,e,r){var n,i=[],o=0,s=t.length;for(i[0]=2;o<s;o++)n=r&&r[o]||0,i[o+1]=t[o]-n+256&255;return i},b=function(t,e,r){var n,i,o=[],s=0,a=t.length;for(o[0]=3;s<a;s++)n=t[s-e]||0,i=r&&r[s]||0,o[s+1]=t[s]+256-(n+i>>>1)&255;return o},E=function(t,e,r){var n,i,o,s,a=[],u=0,h=t.length;for(a[0]=4;u<h;u++)n=t[u-e]||0,i=r&&r[u]||0,o=r&&r[u-e]||0,s=c(n,i,o),a[u+1]=t[u]-s+256&255;return a},c=function(t,e,r){var n=t+e-r,i=Math.abs(n-t),o=Math.abs(n-e),s=Math.abs(n-r);return i<=o&&i<=s?t:o<=s?e:r},S=function(){return[s,v,y,b,E]},C=function(t){for(var e,r,n,i=0,o=t.length;i<o;)((e=d(t[i].slice(1)))<r||!r)&&(r=e,n=i),i++;return n},d=function(t){for(var e=0,r=t.length,n=0;e<r;)n+=Math.abs(t[e++]);return n},P.processPNG=function(t,e,r,n,i){var o,s,a,u,h,l,c=this.color_spaces.DEVICE_RGB,d=this.decode.FLATE_DECODE,f=8;if(this.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.isArrayBufferView(t)){if("function"!=typeof PNG||"function"!=typeof st)throw new Error("PNG support requires png.js and zlib.js");if(t=(o=new PNG(t)).imgData,f=o.bits,c=o.colorSpace,u=o.colors,-1!==[4,6].indexOf(o.colorType)){if(8===o.bits)for(var p,m=(C=32==o.pixelBitlength?new Uint32Array(o.decodePixels().buffer):16==o.pixelBitlength?new Uint16Array(o.decodePixels().buffer):new Uint8Array(o.decodePixels().buffer)).length,g=new Uint8Array(m*o.colors),v=new Uint8Array(m),y=o.pixelBitlength-o.bits,b=0,x=0;b<m;b++){for(w=C[b],p=0;p<y;)g[x++]=w>>>p&255,p+=o.bits;v[b]=w>>>p&255}if(16===o.bits){m=(C=new Uint32Array(o.decodePixels().buffer)).length,g=new Uint8Array(m*(32/o.pixelBitlength)*o.colors),v=new Uint8Array(m*(32/o.pixelBitlength));for(var w,_=1<o.colors,T=x=b=0;b<m;)w=C[b++],g[x++]=w>>>0&255,_&&(g[x++]=w>>>16&255,w=C[b++],g[x++]=w>>>0&255),v[T++]=w>>>16&255;f=8}n!==P.image_compression.NONE&&A()?(t=M(g,o.width*o.colors,o.colors,n),l=M(v,o.width,1,n)):(t=g,l=v,d=null)}if(3===o.colorType&&(c=this.color_spaces.INDEXED,h=o.palette,o.transparency.indexed)){var E=o.transparency.indexed,S=0;for(b=0,m=E.length;b<m;++b)S+=E[b];if((S/=255)==m-1&&-1!==E.indexOf(0))a=[E.indexOf(0)];else if(S!==m){var C=o.decodePixels();for(v=new Uint8Array(C.length),b=0,m=C.length;b<m;b++)v[b]=E[C[b]];l=M(v,o.width,1)}}var O=function(t){var e;switch(t){case P.image_compression.FAST:e=11;break;case P.image_compression.MEDIUM:e=13;break;case P.image_compression.SLOW:e=14;break;default:e=12}return e}(n);return s=d===this.decode.FLATE_DECODE?"/Predictor "+O+" /Colors "+u+" /BitsPerComponent "+f+" /Columns "+o.width:"/Colors "+u+" /BitsPerComponent "+f+" /Columns "+o.width,(this.isArrayBuffer(t)||this.isArrayBufferView(t))&&(t=this.arrayBufferToBinaryString(t)),(l&&this.isArrayBuffer(l)||this.isArrayBufferView(l))&&(l=this.arrayBufferToBinaryString(l)),this.createImageInfo(t,o.width,o.height,c,f,d,e,r,s,a,h,l,O)}throw new Error("Unsupported PNG image data, try using JPEG instead.")},f.API.autoPrint=function(){var t;return this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+t+" 0 R")}),this},n=f.API,x=n.getCharWidthsArray=function(t,e){e||(e={});var r,n,i,o=e.widths?e.widths:this.internal.getFont().metadata.Unicode.widths,s=o.fof?o.fof:1,a=e.kerning?e.kerning:this.internal.getFont().metadata.Unicode.kerning,u=a.fof?a.fof:1,h=0,l=o[0]||s,c=[];for(r=0,n=t.length;r<n;r++)i=t.charCodeAt(r),c.push((o[i]||l)/s+(a[i]&&a[i][h]||0)/u),h=i;return c},w=function(t){for(var e=t.length,r=0;e;)r+=t[--e];return r},_=n.getStringUnitWidth=function(t,e){return w(x.call(this,t,e))},T=function(t,e,r,n){for(var i=[],o=0,s=t.length,a=0;o!==s&&a+e[o]<r;)a+=e[o],o++;i.push(t.slice(0,o));var u=o;for(a=0;o!==s;)a+e[o]>n&&(i.push(t.slice(u,o)),a=0,u=o),a+=e[o],o++;return u!==o&&i.push(t.slice(u,o)),i},l=function(t,e,r){r||(r={});var n,i,o,s,a,u,h=[],l=[h],c=r.textIndent||0,d=0,f=0,p=t.split(" "),m=x(" ",r)[0];if(u=-1===r.lineIndent?p[0].length+2:r.lineIndent||0){var g=Array(u).join(" "),v=[];p.map(function(t){1<(t=t.split(/\s*\n/)).length?v=v.concat(t.map(function(t,e){return(e&&t.length?"\n":"")+t})):v.push(t[0])}),p=v,u=_(g,r)}for(o=0,s=p.length;o<s;o++){var y=0;if(n=p[o],u&&"\n"==n[0]&&(n=n.substr(1),y=1),i=x(n,r),e<c+d+(f=w(i))||y){if(e<f){for(a=T(n,i,e-(c+d),e),h.push(a.shift()),h=[a.pop()];a.length;)l.push([a.shift()]);f=w(i.slice(n.length-h[0].length))}else h=[n];l.push(h),c=f+u,d=m}else h.push(n),c+=d+f,d=m}if(u)b=function(t,e){return(e?g:"")+t.join(" ")};else var b=function(t){return t.join(" ")};return l.map(b)},n.splitTextToSize=function(t,e,r){r||(r={});var n,i=r.fontSize||this.internal.getFontSize(),o=function(t){var e={0:1},r={};if(t.widths&&t.kerning)return{widths:t.widths,kerning:t.kerning};var n=this.internal.getFont(t.fontName,t.fontStyle);return n.metadata.Unicode?{widths:n.metadata.Unicode.widths||e,kerning:n.metadata.Unicode.kerning||r}:{widths:e,kerning:r}}.call(this,r);n=Array.isArray(t)?t:t.split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=r.lineIndent;var a,u,h=[];for(a=0,u=n.length;a<u;a++)h=h.concat(l(n[a],s,o));return h},t=f.API,r={codePages:["WinAnsiEncoding"],WinAnsiEncoding:(e=function(t){for(var e={},r=0;r<"klmnopqrstuvwxyz".length;r++)e["klmnopqrstuvwxyz"[r]]="0123456789abcdef"[r];var n,i,o,s,a={},u=1,h=a,l=[],c="",d="",f=t.length-1;for(r=1;r!=f;)s=t[r],r+=1,"'"==s?n?(o=n.join(""),n=void 0):n=[]:n?n.push(s):"{"==s?(l.push([h,o]),h={},o=void 0):"}"==s?((i=l.pop())[0][i[1]]=h,o=void 0,h=i[0]):"-"==s?u=-1:void 0===o?e.hasOwnProperty(s)?(c+=e[s],o=parseInt(c,16)*u,u=1,c=""):c+=s:e.hasOwnProperty(s)?(d+=e[s],h[o]=parseInt(d,16)*u,u=1,o=void 0,d=""):d+=s;return a})("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},i={Unicode:{Courier:r,"Courier-Bold":r,"Courier-BoldOblique":r,"Courier-Oblique":r,Helvetica:r,"Helvetica-Bold":r,"Helvetica-BoldOblique":r,"Helvetica-Oblique":r,"Times-Roman":r,"Times-Bold":r,"Times-BoldItalic":r,"Times-Italic":r}},o={Unicode:{"Courier-Oblique":e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":e("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":e("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":e("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Helvetica:e("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":e("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),"Courier-Bold":e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":e("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":e("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":e("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}},t.events.push(["addFont",function(t){var e,r,n;(e=o.Unicode[t.PostScriptName])&&((r=t.metadata.Unicode?t.metadata.Unicode:t.metadata.Unicode={}).widths=e.widths,r.kerning=e.kerning),(n=i.Unicode[t.PostScriptName])&&((r=t.metadata.Unicode?t.metadata.Unicode:t.metadata.Unicode={}).encoding=n).codePages&&n.codePages.length&&(t.encoding=n.codePages[0])}]),f.API.addSVG=function(t,e,r,n,i){if(void 0===e||void 0===r)throw new Error("addSVG needs values for 'x' and 'y'");var o,s,a,u,h,l,c,d,f=(o=t,u=document,d=u.createElement("iframe"),h=".jsPDF_sillysvg_iframe {display:none;position:absolute;}",(c=(l=u).createElement("style")).type="text/css",c.styleSheet?c.styleSheet.cssText=h:c.appendChild(l.createTextNode(h)),l.getElementsByTagName("head")[0].appendChild(c),d.name="childframe",d.setAttribute("width",0),d.setAttribute("height",0),d.setAttribute("frameborder","0"),d.setAttribute("scrolling","no"),d.setAttribute("seamless","seamless"),d.setAttribute("class","jsPDF_sillysvg_iframe"),u.body.appendChild(d),(a=((s=d).contentWindow||s.contentDocument).document).write(o),a.close(),a.getElementsByTagName("svg")[0]),p=[1,1],m=parseFloat(f.getAttribute("width")),g=parseFloat(f.getAttribute("height"));m&&g&&(n&&i?p=[n/m,i/g]:n?p=[n/m,n/m]:i&&(p=[i/g,i/g]));var v,y,b,x,w=f.childNodes;for(v=0,y=w.length;v<y;v++)(b=w[v]).tagName&&"PATH"===b.tagName.toUpperCase()&&((x=function(t){for(var e=parseFloat(t[1]),r=parseFloat(t[2]),n=[],i=3,o=t.length;i<o;)"c"===t[i]?(n.push([parseFloat(t[i+1]),parseFloat(t[i+2]),parseFloat(t[i+3]),parseFloat(t[i+4]),parseFloat(t[i+5]),parseFloat(t[i+6])]),i+=7):"l"===t[i]?(n.push([parseFloat(t[i+1]),parseFloat(t[i+2])]),i+=3):i+=1;return[e,r,n]}(b.getAttribute("d").split(" ")))[0]=x[0]*p[0]+e,x[1]=x[1]*p[1]+r,this.lines.call(this,x[2],x[0],x[1],p));return this},f.API.putTotalPages=function(t){for(var e=new RegExp(t,"g"),r=1;r<=this.internal.getNumberOfPages();r++)for(var n=0;n<this.internal.pages[r].length;n++)this.internal.pages[r][n]=this.internal.pages[r][n].replace(e,this.internal.getNumberOfPages());return this},h=u=a="",f.API.addMetadata=function(t,e){return u=e||"http://jspdf.default.namespaceuri/",a=t,this.internal.events.subscribe("postPutResources",function(){if(a){var t='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+u+'"><jspdf:metadata>',e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(t)),n=unescape(encodeURIComponent(a)),i=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),o=unescape(encodeURIComponent("</x:xmpmeta>")),s=r.length+n.length+i.length+e.length+o.length;h=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+s+" >>"),this.internal.write("stream"),this.internal.write(e+r+n+i+o),this.internal.write("endstream"),this.internal.write("endobj")}else h=""}),this.internal.events.subscribe("putCatalog",function(){h&&this.internal.write("/Metadata "+h+" 0 R")}),this},function(t){if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return new Blob}catch(t){}var a=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var a=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},e=function(){this.data=[]},u=function(t,e,r){this.data=t,this.size=t.length,this.type=e,this.encoding=r},r=e.prototype,n=u.prototype,h=t.FileReaderSync,l=function(t){this.code=this[this.name=t]},i="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),o=i.length,s=t.URL||t.webkitURL||t,c=s.createObjectURL,d=s.revokeObjectURL,f=s,p=t.btoa,m=t.atob,g=t.ArrayBuffer,v=t.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(u.fake=n.fake=!0;o--;)l.prototype[i[o]]=o+1;return s.createObjectURL||(f=t.URL=function(t){var e,r=document.createElementNS("http://www.w3.org/1999/xhtml","a");return r.href=t,"origin"in r||("data:"===r.protocol.toLowerCase()?r.origin=null:(e=t.match(y),r.origin=e&&e[1])),r}),f.createObjectURL=function(t){var e,r=t.type;return null===r&&(r="application/octet-stream"),t instanceof u?(e="data:"+r,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):p?e+";base64,"+p(t.data):e+","+encodeURIComponent(t.data)):c?c.call(s,t):void 0},f.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&d&&d.call(s,t)},r.append=function(t){var e=this.data;if(v&&(t instanceof g||t instanceof v)){for(var r="",n=new v(t),i=0,o=n.length;i<o;i++)r+=String.fromCharCode(n[i]);e.push(r)}else if("Blob"===a(t)||"File"===a(t)){if(!h)throw new l("NOT_READABLE_ERR");var s=new h;e.push(s.readAsBinaryString(t))}else t instanceof u?"base64"===t.encoding&&m?e.push(m(t.data)):"URI"===t.encoding?e.push(decodeURIComponent(t.data)):"raw"===t.encoding&&e.push(t.data):("string"!=typeof t&&(t+=""),e.push(unescape(encodeURIComponent(t))))},r.getBlob=function(t){return arguments.length||(t=null),new u(this.data.join(""),t,"raw")},r.toString=function(){return"[object BlobBuilder]"},n.slice=function(t,e,r){var n=arguments.length;return n<3&&(r=null),new u(this.data.slice(t,1<n?e:this.data.length),r,this.encoding)},n.toString=function(){return"[object Blob]"},n.close=function(){this.size=0,delete this.data},e}(t);t.Blob=function(t,e){var r=e&&e.type||"",n=new a;if(t)for(var i=0,o=t.length;i<o;i++)Uint8Array&&t[i]instanceof Uint8Array?n.append(t[i].buffer):n.append(t[i]);var s=n.getBlob(r);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var e=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=e(new t.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content||void 0);var V,K,dt=dt||function(a){if(!(void 0===a||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var u=function(){return a.URL||a.webkitURL||a},h=a.document.createElementNS("http://www.w3.org/1999/xhtml","a"),l="download"in h,c=/constructor/i.test(a.HTMLElement)||a.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent),f=function(t){(a.setImmediate||a.setTimeout)(function(){throw t},0)},p=function(t){setTimeout(function(){"string"==typeof t?u().revokeObjectURL(t):t.remove()},4e4)},m=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},n=function(t,r,e){e||(t=m(t));var n,i=this,o="application/octet-stream"===t.type,s=function(){!function(t,e,r){for(var n=(e=[].concat(e)).length;n--;){var i=t["on"+e[n]];if("function"==typeof i)try{i.call(t,r||t)}catch(t){f(t)}}}(i,"writestart progress write writeend".split(" "))};if(i.readyState=i.INIT,l)return n=u().createObjectURL(t),void setTimeout(function(){var t,e;h.href=n,h.download=r,t=h,e=new MouseEvent("click"),t.dispatchEvent(e),s(),p(n),i.readyState=i.DONE});!function(){if((d||o&&c)&&a.FileReader){var e=new FileReader;return e.onloadend=function(){var t=d?e.result:e.result.replace(/^data:[^;]*;/,"data:attachment/file;");a.open(t,"_blank")||(a.location.href=t),t=void 0,i.readyState=i.DONE,s()},e.readAsDataURL(t),i.readyState=i.INIT}n||(n=u().createObjectURL(t)),o?a.location.href=n:a.open(n,"_blank")||(a.location.href=n),i.readyState=i.DONE,s(),p(n)}()},t=n.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,r){return e=e||t.name||"download",r||(t=m(t)),navigator.msSaveOrOpenBlob(t,e)}:(t.abort=function(){},t.readyState=t.INIT=0,t.WRITING=1,t.DONE=2,t.error=t.onwritestart=t.onprogress=t.onwrite=t.onabort=t.onerror=t.onwriteend=null,function(t,e,r){return new n(t,e||t.name||"download",r)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content);void 0!==pt&&pt.exports?pt.exports.saveAs=dt:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return dt}),V=f,K=function(){var t,e,r,n,i,o="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,s=null,a=function(){if(!o)return function(){return!1};try{var t={};"function"==typeof t.Buffer&&(s=t.Buffer)}catch(t){}return function(t){return t instanceof ArrayBuffer||null!==s&&t instanceof s}}(),u=null!==s?function(t){return new s(t,"utf8").toString("binary")}:function(t){return unescape(encodeURIComponent(t))},h=function(t,e){for(var r=65535&t,n=t>>>16,i=0,o=e.length;i<o;i++)n=(n+(r=(r+(255&e.charCodeAt(i)))%65521))%65521;return(n<<16|r)>>>0},l=function(t,e){for(var r=65535&t,n=t>>>16,i=0,o=e.length;i<o;i++)n=(n+(r=(r+e[i])%65521))%65521;return(n<<16|r)>>>0},c={},d=c.Adler32=(((i=(n=function(t){if(!(this instanceof n))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(t=null==t?1:+t))throw new Error("First arguments needs to be a finite number.");this.checksum=t>>>0}).prototype={}).constructor=n).from=((r=function(t){if(!(this instanceof n))throw new TypeError("Constructor cannot called be as a function.");if(null==t)throw new Error("First argument needs to be a string.");this.checksum=h(1,t.toString())}).prototype=i,r),n.fromUtf8=((e=function(t){if(!(this instanceof n))throw new TypeError("Constructor cannot called be as a function.");if(null==t)throw new Error("First argument needs to be a string.");var e=u(t.toString());this.checksum=h(1,e)}).prototype=i,e),o&&(n.fromBuffer=((t=function(t){if(!(this instanceof n))throw new TypeError("Constructor cannot called be as a function.");if(!a(t))throw new Error("First argument needs to be ArrayBuffer.");var e=new Uint8Array(t);return this.checksum=l(1,e)}).prototype=i,t)),i.update=function(t){if(null==t)throw new Error("First argument needs to be a string.");return t=t.toString(),this.checksum=h(this.checksum,t)},i.updateUtf8=function(t){if(null==t)throw new Error("First argument needs to be a string.");var e=u(t.toString());return this.checksum=h(this.checksum,e)},o&&(i.updateBuffer=function(t){if(!a(t))throw new Error("First argument needs to be ArrayBuffer.");var e=new Uint8Array(t);return this.checksum=l(this.checksum,e)}),i.clone=function(){return new d(this.checksum)},n);return c.from=function(t){if(null==t)throw new Error("First argument needs to be a string.");return h(1,t.toString())},c.fromUtf8=function(t){if(null==t)throw new Error("First argument needs to be a string.");var e=u(t.toString());return h(1,e)},o&&(c.fromBuffer=function(t){if(!a(t))throw new Error("First argument need to be ArrayBuffer.");var e=new Uint8Array(t);return l(1,e)}),c},"object"==typeof pt?pt.exports=K():"function"==typeof define?define(K):V.adler32cs=K();var J,Q,Z={_colorsTable:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},colorNameToHex:function(t){return t=t.toLowerCase(),void 0!==this._colorsTable[t]&&this._colorsTable[t]}},ft=function(t){function ct(){function u(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1}var f=this;f.build_tree=function(t){var e,r,n,i=f.dyn_tree,o=f.stat_desc.static_tree,s=f.stat_desc.elems,a=-1;for(t.heap_len=0,t.heap_max=m,e=0;e<s;e++)0!==i[2*e]?(t.heap[++t.heap_len]=a=e,t.depth[e]=0):i[2*e+1]=0;for(;t.heap_len<2;)i[2*(n=t.heap[++t.heap_len]=a<2?++a:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=o[2*n+1]);for(f.max_code=a,e=Math.floor(t.heap_len/2);1<=e;e--)t.pqdownheap(i,e);for(n=s;e=t.heap[1],t.heap[1]=t.heap[t.heap_len--],t.pqdownheap(i,1),r=t.heap[1],t.heap[--t.heap_max]=e,t.heap[--t.heap_max]=r,i[2*n]=i[2*e]+i[2*r],t.depth[n]=Math.max(t.depth[e],t.depth[r])+1,i[2*e+1]=i[2*r+1]=n,t.heap[1]=n++,t.pqdownheap(i,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t){var e,r,n,i,o,s,a=f.dyn_tree,u=f.stat_desc.static_tree,h=f.stat_desc.extra_bits,l=f.stat_desc.extra_base,c=f.stat_desc.max_length,d=0;for(i=0;i<=p;i++)t.bl_count[i]=0;for(a[2*t.heap[t.heap_max]+1]=0,e=t.heap_max+1;e<m;e++)(i=a[2*a[2*(r=t.heap[e])+1]+1]+1)>c&&(i=c,d++),a[2*r+1]=i,r>f.max_code||(t.bl_count[i]++,o=0,l<=r&&(o=h[r-l]),s=a[2*r],t.opt_len+=s*(i+o),u&&(t.static_len+=s*(u[2*r+1]+o)));if(0!==d){do{for(i=c-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[c]--,d-=2}while(0<d);for(i=c;0!==i;i--)for(r=t.bl_count[i];0!==r;)(n=t.heap[--e])>f.max_code||(a[2*n+1]!=i&&(t.opt_len+=(i-a[2*n+1])*a[2*n],a[2*n+1]=i),r--)}}(t),function(t,e,r){var n,i,o,s=[],a=0;for(n=1;n<=p;n++)s[n]=a=a+r[n-1]<<1;for(i=0;i<=e;i++)0!==(o=t[2*i+1])&&(t[2*i]=u(s[o]++,o))}(i,f.max_code,t.bl_count)}}function dt(t,e,r,n,i){var o=this;o.static_tree=t,o.extra_bits=e,o.extra_base=r,o.elems=n,o.max_length=i}function e(t,e,r,n,i){var o=this;o.good_length=t,o.max_lazy=e,o.nice_length=r,o.max_chain=n,o.func=i}function ft(t,e,r,n){var i=t[2*e],o=t[2*r];return i<o||i==o&&n[e]<=n[r]}function r(){function s(){var t;for(t=0;t<286;t++)Q[2*t]=0;for(t=0;t<30;t++)Z[2*t]=0;for(t=0;t<19;t++)$[2*t]=0;Q[512]=1,at.opt_len=at.static_len=0,rt=o=0}function a(t,e){var r,n,i=-1,o=t[1],s=0,a=7,u=4;for(0===o&&(a=138,u=3),t[2*(e+1)+1]=65535,r=0;r<=e;r++)n=o,o=t[2*(r+1)+1],++s<a&&n==o||(s<u?$[2*n]+=s:0!==n?(n!=i&&$[2*n]++,$[32]++):s<=10?$[34]++:$[36]++,i=n,(s=0)===o?(a=138,u=3):n==o?(a=6,u=3):(a=7,u=4))}function u(t){at.pending_buf[at.pending++]=t}function h(t){u(255&t),u(t>>>8&255)}function l(t,e){var r,n=e;16-n<st?(h(ot|=(r=t)<<st&65535),ot=r>>>16-st,st+=n-16):(ot|=t<<st&65535,st+=n)}function c(t,e){var r=2*t;l(65535&e[r],65535&e[r+1])}function d(t,e){var r,n,i=-1,o=t[1],s=0,a=7,u=4;for(0===o&&(a=138,u=3),r=0;r<=e;r++)if(n=o,o=t[2*(r+1)+1],!(++s<a&&n==o)){if(s<u)for(;c(n,$),0!=--s;);else 0!==n?(n!=i&&(c(n,$),s--),c(16,$),l(s-3,2)):s<=10?(c(17,$),l(s-3,3)):(c(18,$),l(s-11,7));i=n,(s=0)===o?(a=138,u=3):n==o?(a=6,u=3):(a=7,u=4)}}function f(){16==st?(h(ot),st=ot=0):8<=st&&(u(255&ot),ot>>>=8,st-=8)}function p(t,e){var r,n,i;if(at.pending_buf[nt+2*rt]=t>>>8&255,at.pending_buf[nt+2*rt+1]=255&t,at.pending_buf[tt+rt]=255&e,rt++,0===t?Q[2*e]++:(o++,t--,Q[2*(ct._length_code[e]+256+1)]++,Z[2*ct.d_code(t)]++),0==(8191&rt)&&2<Y){for(r=8*rt,n=q-F,i=0;i<30;i++)r+=Z[2*i]*(5+ct.extra_dbits[i]);if(r>>>=3,o<Math.floor(rt/2)&&r<Math.floor(n/2))return!0}return rt==et-1}function m(t,e){var r,n,i,o,s=0;if(0!==rt)for(;r=at.pending_buf[nt+2*s]<<8&65280|255&at.pending_buf[nt+2*s+1],n=255&at.pending_buf[tt+s],s++,0===r?c(n,t):(c((i=ct._length_code[n])+256+1,t),0!==(o=ct.extra_lbits[i])&&l(n-=ct.base_length[i],o),c(i=ct.d_code(--r),e),0!==(o=ct.extra_dbits[i])&&l(r-=ct.base_dist[i],o)),s<rt;);c(256,t),it=t[513]}function g(){8<st?h(ot):0<st&&u(255&ot),st=ot=0}function v(t,e,r){var n,i,o;l(0+(r?1:0),3),n=t,i=e,o=!0,g(),it=8,o&&(h(i),h(~i)),at.pending_buf.set(A.subarray(n,n+i),at.pending),at.pending+=i}function e(t,e,r){var n,i,o=0;0<Y?(ut.build_tree(at),ht.build_tree(at),o=function(){var t;for(a(Q,ut.max_code),a(Z,ht.max_code),lt.build_tree(at),t=18;3<=t&&0===$[2*ct.bl_order[t]+1];t--);return at.opt_len+=3*(t+1)+5+5+4,t}(),n=at.opt_len+3+7>>>3,(i=at.static_len+3+7>>>3)<=n&&(n=i)):n=i=e+5,e+4<=n&&-1!=t?v(t,e,r):i==n?(l(2+(r?1:0),3),m(dt.static_ltree,dt.static_dtree)):(l(4+(r?1:0),3),function(t,e,r){var n;for(l(t-257,5),l(e-1,5),l(r-4,4),n=0;n<r;n++)l($[2*ct.bl_order[n]+1],3);d(Q,t-1),d(Z,e-1)}(ut.max_code+1,ht.max_code+1,o+1),m(Q,Z)),s(),r&&g()}function y(t){e(0<=F?F:-1,q-F,t),F=q,_.flush_pending()}function b(){var t,e,r,n;do{if(0==(n=i-X-q)&&0===q&&0===X)n=C;else if(-1==n)n--;else if(C+C-gt<=q){for(A.set(A.subarray(C,C+C),0),W-=C,q-=C,F-=C,r=t=k;e=65535&I[--r],I[r]=C<=e?e-C:0,0!=--t;);for(r=t=C;e=65535&M[--r],M[r]=C<=e?e-C:0,0!=--t;);n+=C}if(0===_.avail_in)return;t=_.read_buf(A,q+X,n),3<=(X+=t)&&(R=((R=255&A[q])<<B^255&A[q+1])&L)}while(X<gt&&0!==_.avail_in)}function x(t){var e,r,n=z,i=q,o=H,s=C-gt<q?q-(C-gt):0,a=J,u=P,h=q+258,l=A[i+o-1],c=A[i+o];K<=H&&(n>>=2),X<a&&(a=X);do{if(A[(e=t)+o]==c&&A[e+o-1]==l&&A[e]==A[i]&&A[++e]==A[i+1]){i+=2,e++;do{}while(A[++i]==A[++e]&&A[++i]==A[++e]&&A[++i]==A[++e]&&A[++i]==A[++e]&&A[++i]==A[++e]&&A[++i]==A[++e]&&A[++i]==A[++e]&&A[++i]==A[++e]&&i<h);if(r=258-(h-i),i=h-258,o<r){if(W=t,a<=(o=r))break;l=A[i+o-1],c=A[i+o]}}}while((t=65535&M[t&u])>s&&0!=--n);return o<=X?o:X}function w(t){return t.total_in=t.total_out=0,t.msg=null,at.pending=0,at.pending_out=0,T=113,S=0,ut.dyn_tree=Q,ut.stat_desc=dt.static_l_desc,ht.dyn_tree=Z,ht.stat_desc=dt.static_d_desc,lt.dyn_tree=$,lt.stat_desc=dt.static_bl_desc,st=ot=0,it=8,s(),function(){var t;for(i=2*C,t=I[k-1]=0;t<k-1;t++)I[t]=0;G=pt[Y].max_lazy,K=pt[Y].good_length,J=pt[Y].nice_length,z=pt[Y].max_chain,N=H=2,R=U=X=F=q=0}(),0}var _,T,E,S,C,O,P,A,i,M,I,R,k,D,L,B,F,N,j,U,q,W,X,H,z,G,Y,V,K,J,Q,Z,$,tt,et,rt,nt,o,it,ot,st,at=this,ut=new ct,ht=new ct,lt=new ct;at.depth=[],at.bl_count=[],at.heap=[],Q=[],Z=[],$=[],at.pqdownheap=function(t,e){for(var r=at.heap,n=r[e],i=e<<1;i<=at.heap_len&&(i<at.heap_len&&ft(t,r[i+1],r[i],at.depth)&&i++,!ft(t,n,r[i],at.depth));)r[e]=r[i],e=i,i<<=1;r[e]=n},at.deflateInit=function(t,e,r,n,i,o){return n||(n=8),i||(i=8),o||(o=0),t.msg=null,-1==e&&(e=6),i<1||9<i||8!=n||r<9||15<r||e<0||9<e||o<0||2<o?-2:(t.dstate=at,P=(C=1<<(O=r))-1,L=(k=1<<(D=i+7))-1,B=Math.floor((D+3-1)/3),A=new Uint8Array(2*C),M=[],I=[],et=1<<i+6,at.pending_buf=new Uint8Array(4*et),E=4*et,nt=Math.floor(et/2),tt=3*et,Y=e,V=o,w(t))},at.deflateEnd=function(){return 42!=T&&113!=T&&666!=T?-2:(at.pending_buf=null,A=M=I=null,at.dstate=null,113==T?-3:0)},at.deflateParams=function(t,e,r){var n=0;return-1==e&&(e=6),e<0||9<e||r<0||2<r?-2:(pt[Y].func!=pt[e].func&&0!==t.total_in&&(n=t.deflate(1)),Y!=e&&(G=pt[Y=e].max_lazy,K=pt[Y].good_length,J=pt[Y].nice_length,z=pt[Y].max_chain),V=r,n)},at.deflateSetDictionary=function(t,e,r){var n,i=r,o=0;if(!e||42!=T)return-2;if(i<3)return 0;for(C-gt<i&&(o=r-(i=C-gt)),A.set(e.subarray(o,o+i),0),F=q=i,R=((R=255&A[0])<<B^255&A[1])&L,n=0;n<=i-3;n++)R=(R<<B^255&A[n+2])&L,M[n&P]=I[R],I[R]=n;return 0},at.deflate=function(t,e){var r,n,i,o,s,a;if(4<e||e<0)return-2;if(!t.next_out||!t.next_in&&0!==t.avail_in||666==T&&4!=e)return t.msg=mt[4],-2;if(0===t.avail_out)return t.msg=mt[7],-5;if(_=t,o=S,S=e,42==T&&(n=8+(O-8<<4)<<8,3<(i=(Y-1&255)>>1)&&(i=3),n|=i<<6,0!==q&&(n|=32),T=113,u((a=n+=31-n%31)>>8&255),u(255&a)),0!==at.pending){if(_.flush_pending(),0===_.avail_out)return S=-1,0}else if(0===_.avail_in&&e<=o&&4!=e)return _.msg=mt[7],-5;if(666==T&&0!==_.avail_in)return t.msg=mt[7],-5;if(0!==_.avail_in||0!==X||0!=e&&666!=T){switch(s=-1,pt[Y].func){case 0:s=function(t){var e,r=65535;for(E-5<r&&(r=E-5);;){if(X<=1){if(b(),0===X&&0==t)return 0;if(0===X)break}if(q+=X,e=F+r,((X=0)===q||e<=q)&&(X=q-e,q=e,y(!1),0===_.avail_out))return 0;if(C-gt<=q-F&&(y(!1),0===_.avail_out))return 0}return y(4==t),0===_.avail_out?4==t?2:0:4==t?3:1}(e);break;case 1:s=function(t){for(var e,r=0;;){if(X<gt){if(b(),X<gt&&0==t)return 0;if(0===X)break}if(3<=X&&(R=(R<<B^255&A[q+2])&L,r=65535&I[R],M[q&P]=I[R],I[R]=q),0!==r&&(q-r&65535)<=C-gt&&2!=V&&(N=x(r)),3<=N)if(e=p(q-W,N-3),X-=N,N<=G&&3<=X){for(N--;R=(R<<B^255&A[++q+2])&L,r=65535&I[R],M[q&P]=I[R],I[R]=q,0!=--N;);q++}else q+=N,N=0,R=((R=255&A[q])<<B^255&A[q+1])&L;else e=p(0,255&A[q]),X--,q++;if(e&&(y(!1),0===_.avail_out))return 0}return y(4==t),0===_.avail_out?4==t?2:0:4==t?3:1}(e);break;case 2:s=function(t){for(var e,r,n=0;;){if(X<gt){if(b(),X<gt&&0==t)return 0;if(0===X)break}if(3<=X&&(R=(R<<B^255&A[q+2])&L,n=65535&I[R],M[q&P]=I[R],I[R]=q),H=N,j=W,N=2,0!==n&&H<G&&(q-n&65535)<=C-gt&&(2!=V&&(N=x(n)),N<=5&&(1==V||3==N&&4096<q-W)&&(N=2)),3<=H&&N<=H){for(r=q+X-3,e=p(q-1-j,H-3),X-=H-1,H-=2;++q<=r&&(R=(R<<B^255&A[q+2])&L,n=65535&I[R],M[q&P]=I[R],I[R]=q),0!=--H;);if(U=0,N=2,q++,e&&(y(!1),0===_.avail_out))return 0}else if(0!==U){if((e=p(0,255&A[q-1]))&&y(!1),q++,X--,0===_.avail_out)return 0}else U=1,q++,X--}return 0!==U&&(e=p(0,255&A[q-1]),U=0),y(4==t),0===_.avail_out?4==t?2:0:4==t?3:1}(e)}if(2!=s&&3!=s||(T=666),0==s||2==s)return 0===_.avail_out&&(S=-1),0;if(1==s){if(1==e)l(2,3),c(256,dt.static_ltree),f(),1+it+10-st<9&&(l(2,3),c(256,dt.static_ltree),f()),it=7;else if(v(0,0,!1),3==e)for(r=0;r<k;r++)I[r]=0;if(_.flush_pending(),0===_.avail_out)return S=-1,0}}return 4!=e?0:1}}function n(){this.next_in_index=0,this.next_out_index=0,this.avail_in=0,this.total_in=0,this.avail_out=0,this.total_out=0}var p=15,m=573,i=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];ct._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],ct.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],ct.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],ct.d_code=function(t){return t<256?i[t]:i[256+(t>>>7)]},ct.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ct.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ct.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ct.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],dt.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],dt.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],dt.static_l_desc=new dt(dt.static_ltree,ct.extra_lbits,257,286,p),dt.static_d_desc=new dt(dt.static_dtree,ct.extra_dbits,0,30,p),dt.static_bl_desc=new dt(null,ct.extra_blbits,0,19,7);var pt=[new e(0,0,0,0,0),new e(4,4,8,4,1),new e(4,5,16,8,1),new e(4,6,32,32,1),new e(4,4,16,16,2),new e(8,16,32,32,2),new e(8,16,128,128,2),new e(8,32,128,256,2),new e(32,128,258,1024,2),new e(32,258,258,4096,2)],mt=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],gt=262;return n.prototype={deflateInit:function(t,e){return this.dstate=new r,e||(e=p),this.dstate.deflateInit(this,t,e)},deflate:function(t){return this.dstate?this.dstate.deflate(this,t):-2},deflateEnd:function(){if(!this.dstate)return-2;var t=this.dstate.deflateEnd();return this.dstate=null,t},deflateParams:function(t,e){return this.dstate?this.dstate.deflateParams(this,t,e):-2},deflateSetDictionary:function(t,e){return this.dstate?this.dstate.deflateSetDictionary(this,t,e):-2},read_buf:function(t,e,r){var n=this.avail_in;return r<n&&(n=r),0===n?0:(this.avail_in-=n,t.set(this.next_in.subarray(this.next_in_index,this.next_in_index+n),e),this.next_in_index+=n,this.total_in+=n,n)},flush_pending:function(){var t=this,e=t.dstate.pending;e>t.avail_out&&(e=t.avail_out),0!==e&&(t.next_out.set(t.dstate.pending_buf.subarray(t.dstate.pending_out,t.dstate.pending_out+e),t.next_out_index),t.next_out_index+=e,t.dstate.pending_out+=e,t.total_out+=e,t.avail_out-=e,t.dstate.pending-=e,0===t.dstate.pending&&(t.dstate.pending_out=0))}},function(t){var a=new n,u=new Uint8Array(512);void 0===t&&(t=-1),a.deflateInit(t),a.next_out=u,this.append=function(t,e){var r,n=[],i=0,o=0,s=0;if(t.length){a.next_in_index=0,a.next_in=t,a.avail_in=t.length;do{if(a.next_out_index=0,a.avail_out=512,0!=a.deflate(0))throw"deflating: "+a.msg;a.next_out_index&&(512==a.next_out_index?n.push(new Uint8Array(u)):n.push(new Uint8Array(u.subarray(0,a.next_out_index)))),s+=a.next_out_index,e&&0<a.next_in_index&&a.next_in_index!=i&&(e(a.next_in_index),i=a.next_in_index)}while(0<a.avail_in||0===a.avail_out);return r=new Uint8Array(s),n.forEach(function(t){r.set(t,o),o+=t.length}),r}},this.flush=function(){var t,e,r=[],n=0,i=0;do{if(a.next_out_index=0,a.avail_out=512,1!=(t=a.deflate(4))&&0!=t)throw"deflating: "+a.msg;0<512-a.avail_out&&r.push(new Uint8Array(u.subarray(0,a.next_out_index))),i+=a.next_out_index}while(0<a.avail_in||0===a.avail_out);return a.deflateEnd(),e=new Uint8Array(i),r.forEach(function(t){e.set(t,n),n+=t.length}),e}}}();!function(t){if("object"==typeof ht&&void 0!==pt)pt.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:void 0!==at?e=at:"undefined"!=typeof self&&(e=self),e.html2canvas=t()}}(function(){return function o(s,a,u){function h(e,t){if(!a[e]){if(!s[e]){var r="function"==typeof ut&&ut;if(!t&&r)return r(e,!0);if(l)return l(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=a[e]={exports:{}};s[e][0].call(i.exports,function(t){return h(s[e][1][t]||t)},i,i.exports,o,s,a,u)}return a[e].exports}for(var l="function"==typeof ut&&ut,t=0;t<u.length;t++)h(u[t]);return h}({1:[function(t,P,A){(function(O){!function(t){function v(t){throw RangeError(m[t])}function r(t,e){for(var r=t.length;r--;)t[r]=e(t[r]);return t}function e(t,e){return r(t.split(p),e).join(".")}function y(t){for(var e,r,n=[],i=0,o=t.length;i<o;)55296<=(e=t.charCodeAt(i++))&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function b(t){return r(t,function(t){var e="";return 65535<t&&(e+=C((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+C(t)}).join("")}function x(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,r){var n=0;for(t=r?S(t/c):t>>1,t+=S(t/e);g*E>>1<t;n+=T)t=S(t/g);return S(n+(g+1)*t/(t+l))}function n(t){var e,r,n,i,o,s,a,u,h,l,c,d=[],f=t.length,p=0,m=128,g=72;for((r=t.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)128<=t.charCodeAt(n)&&v("not-basic"),d.push(t.charCodeAt(n));for(i=0<r?r+1:0;i<f;){for(o=p,s=1,a=T;f<=i&&v("invalid-input"),((u=(c=t.charCodeAt(i++))-48<10?c-22:c-65<26?c-65:c-97<26?c-97:T)>=T||u>S((_-p)/s))&&v("overflow"),p+=u*s,!(u<(h=a<=g?1:g+E<=a?E:a-g));a+=T)s>S(_/(l=T-h))&&v("overflow"),s*=l;g=w(p-o,e=d.length+1,0==o),S(p/e)>_-m&&v("overflow"),m+=S(p/e),p%=e,d.splice(p++,0,m)}return b(d)}function i(t){var e,r,n,i,o,s,a,u,h,l,c,d,f,p,m,g=[];for(d=(t=y(t)).length,e=128,o=72,s=r=0;s<d;++s)(c=t[s])<128&&g.push(C(c));for(n=i=g.length,i&&g.push("-");n<d;){for(a=_,s=0;s<d;++s)(c=t[s])>=e&&c<a&&(a=c);for(a-e>S((_-r)/(f=n+1))&&v("overflow"),r+=(a-e)*f,e=a,s=0;s<d;++s)if((c=t[s])<e&&++r>_&&v("overflow"),c==e){for(u=r,h=T;!(u<(l=h<=o?1:o+E<=h?E:h-o));h+=T)m=u-l,p=T-l,g.push(C(x(l+m%p,0))),u=S(m/p);g.push(C(x(u,0))),o=w(r,f,n==i),r=0,++n}++r,++e}return g.join("")}var o="object"==typeof A&&A,s="object"==typeof P&&P&&P.exports==o&&P,a="object"==typeof O&&O;a.global!==a&&a.window!==a||(t=a);var u,h,_=2147483647,T=36,E=26,l=38,c=700,d=/^xn--/,f=/[^ -~]/,p=/\x2E|\u3002|\uFF0E|\uFF61/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=T-1,S=Math.floor,C=String.fromCharCode;if(u={version:"1.2.4",ucs2:{decode:y,encode:b},decode:n,encode:i,toASCII:function(t){return e(t,function(t){return f.test(t)?"xn--"+i(t):t})},toUnicode:function(t){return e(t,function(t){return d.test(t)?n(t.slice(4).toLowerCase()):t})}},o&&!o.nodeType)if(s)s.exports=u;else for(h in u)u.hasOwnProperty(h)&&(o[h]=u[h]);else t.punycode=u}(this)}).call(this,void 0!==at?at:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,r){function i(t,e){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),n=t.firstChild;n;)!0!==e&&1===n.nodeType&&"SCRIPT"===n.nodeName||r.appendChild(i(n,e)),n=n.nextSibling;return 1===t.nodeType&&(r._scrollTop=t.scrollTop,r._scrollLeft=t.scrollLeft,"CANVAS"===t.nodeName?function(t,e){try{e&&(e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t.getContext("2d").getImageData(0,0,t.width,t.height),0,0))}catch(e){o("Unable to copy canvas content from",t,e)}}(t,r):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value)),r}var o=t("./log");e.exports=function(o,t,e,r,s,a,u){var h=i(o.documentElement,s.javascriptEnabled),l=t.createElement("iframe");return l.className="html2canvas-container",l.style.visibility="hidden",l.style.position="fixed",l.style.left="-10000px",l.style.top="0px",l.style.border="0",l.width=e,l.height=r,l.scrolling="no",t.body.appendChild(l),new Promise(function(e){var t,r,n,i=l.contentWindow.document;l.contentWindow.onload=l.onload=function(){var t=setInterval(function(){0<i.body.childNodes.length&&(function t(e){if(1===e.nodeType){e.scrollTop=e._scrollTop,e.scrollLeft=e._scrollLeft;for(var r=e.firstChild;r;)t(r),r=r.nextSibling}}(i.documentElement),clearInterval(t),"view"===s.type&&(l.contentWindow.scrollTo(a,u),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||l.contentWindow.scrollY===u&&l.contentWindow.scrollX===a||(i.documentElement.style.top=-u+"px",i.documentElement.style.left=-a+"px",i.documentElement.style.position="absolute")),e(l))},50)},i.open(),i.write("<!DOCTYPE html><html></html>"),r=a,n=u,!(t=o).defaultView||r===t.defaultView.pageXOffset&&n===t.defaultView.pageYOffset||t.defaultView.scrollTo(r,n),i.replaceChild(i.adoptNode(h),i.documentElement),i.close()})}},{"./log":13}],3:[function(t,e,r){function n(t){this.r=0,this.g=0,this.b=0,this.a=null,this.fromArray(t)||this.namedColor(t)||this.rgb(t)||this.rgba(t)||this.hex6(t)||this.hex3(t)}n.prototype.darken=function(t){var e=1-t;return new n([Math.round(this.r*e),Math.round(this.g*e),Math.round(this.b*e),this.a])},n.prototype.isTransparent=function(){return 0===this.a},n.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},n.prototype.fromArray=function(t){return Array.isArray(t)&&(this.r=Math.min(t[0],255),this.g=Math.min(t[1],255),this.b=Math.min(t[2],255),3<t.length&&(this.a=t[3])),Array.isArray(t)};var i=/^#([a-f0-9]{3})$/i;n.prototype.hex3=function(t){var e;return null!==(e=t.match(i))&&(this.r=parseInt(e[1][0]+e[1][0],16),this.g=parseInt(e[1][1]+e[1][1],16),this.b=parseInt(e[1][2]+e[1][2],16)),null!==e};var o=/^#([a-f0-9]{6})$/i;n.prototype.hex6=function(t){var e=null;return null!==(e=t.match(o))&&(this.r=parseInt(e[1].substring(0,2),16),this.g=parseInt(e[1].substring(2,4),16),this.b=parseInt(e[1].substring(4,6),16)),null!==e};var s=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;n.prototype.rgb=function(t){var e;return null!==(e=t.match(s))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3])),null!==e};var a=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;n.prototype.rgba=function(t){var e;return null!==(e=t.match(a))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3]),this.a=Number(e[4])),null!==e},n.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},n.prototype.namedColor=function(t){t=t.toLowerCase();var e=u[t];if(e)this.r=e[0],this.g=e[1],this.b=e[2];else if("transparent"===t)return this.r=this.g=this.b=this.a=0,!0;return!!e},n.prototype.isColor=!0;var u={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};e.exports=n},{}],4:[function(t,e,r){function n(t,e){var r,n,i=E++;if((e=e||{}).logging&&(b.options.logging=!0,b.options.start=Date.now()),e.async=void 0===e.async||e.async,e.allowTaint=void 0!==e.allowTaint&&e.allowTaint,e.removeContainer=void 0===e.removeContainer||e.removeContainer,e.javascriptEnabled=void 0!==e.javascriptEnabled&&e.javascriptEnabled,e.imageTimeout=void 0===e.imageTimeout?1e4:e.imageTimeout,e.renderer="function"==typeof e.renderer?e.renderer:g,e.strict=!!e.strict,"string"==typeof t){if("string"!=typeof e.proxy)return Promise.reject("Proxy must be used when rendering url");var o=null!=e.width?e.width:window.innerWidth,s=null!=e.height?e.height:window.innerHeight;return w((r=t,n=document.createElement("a"),n.href=r,n.href=n.href,n),e.proxy,document,o,s,e).then(function(t){return f(t.contentWindow.document.documentElement,t,e,o,s)})}var a,u,h,l,c,d=(void 0===t?[document.documentElement]:t.length?t:[t])[0];return d.setAttribute(T+i,i),(a=d.ownerDocument,u=e,h=d.ownerDocument.defaultView.innerWidth,l=d.ownerDocument.defaultView.innerHeight,c=i,x(a,a,h,l,u,a.defaultView.pageXOffset,a.defaultView.pageYOffset).then(function(t){b("Document cloned");var e=T+c,r="["+e+"='"+c+"']";a.querySelector(r).removeAttribute(e);var n=t.contentWindow,i=n.document.querySelector(r);return("function"==typeof u.onclone?Promise.resolve(u.onclone(n.document)):Promise.resolve(!0)).then(function(){return f(i,t,u,h,l)})})).then(function(t){return"function"==typeof e.onrendered&&(b("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),e.onrendered(t)),t})}function f(r,n,i,t,e){var o,s,a=n.contentWindow,u=new m(a.document),h=new v(i,u),l=_(r),c="view"===i.type?t:(s=a.document,Math.max(Math.max(s.body.scrollWidth,s.documentElement.scrollWidth),Math.max(s.body.offsetWidth,s.documentElement.offsetWidth),Math.max(s.body.clientWidth,s.documentElement.clientWidth))),d="view"===i.type?e:(o=a.document,Math.max(Math.max(o.body.scrollHeight,o.documentElement.scrollHeight),Math.max(o.body.offsetHeight,o.documentElement.offsetHeight),Math.max(o.body.clientHeight,o.documentElement.clientHeight))),f=new i.renderer(c,d,h,i,document);return new y(r,f,u,h,i).ready.then(function(){var t,e;return b("Finished rendering"),t="view"===i.type?p(f.canvas,{width:f.canvas.width,height:f.canvas.height,top:0,left:0,x:0,y:0}):r===a.document.body||r===a.document.documentElement||null!=i.canvas?f.canvas:p(f.canvas,{width:null!=i.width?i.width:l.width,height:null!=i.height?i.height:l.height,top:l.top,left:l.left,x:0,y:0}),e=n,i.removeContainer&&(e.parentNode.removeChild(e),b("Cleaned up container")),t})}function p(t,e){var r=document.createElement("canvas"),n=Math.min(t.width-1,Math.max(0,e.left)),i=Math.min(t.width,Math.max(1,e.left+e.width)),o=Math.min(t.height-1,Math.max(0,e.top)),s=Math.min(t.height,Math.max(1,e.top+e.height));r.width=e.width,r.height=e.height;var a=i-n,u=s-o;return b("Cropping canvas at:","left:",e.left,"top:",e.top,"width:",a,"height:",u),b("Resulting crop with width",e.width,"and height",e.height,"with x",n,"and y",o),r.getContext("2d").drawImage(t,n,o,a,u,e.x,e.y,a,u),r}var m=t("./support"),g=t("./renderers/canvas"),v=t("./imageloader"),y=t("./nodeparser"),i=t("./nodecontainer"),b=t("./log"),o=t("./utils"),x=t("./clone"),w=t("./proxy").loadUrlDocument,_=o.getBounds,T="data-html2canvas-node",E=0;n.CanvasRenderer=g,n.NodeContainer=i,n.log=b,n.utils=o;var s="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:n;e.exports=s},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(t,e,r){var n=t("./log"),i=t("./utils").smallImage;e.exports=function t(e){if(this.src=e,n("DummyImageContainer for",e),!this.promise||!this.image){n("Initiating DummyImageContainer"),t.prototype.image=new Image;var r=this.image;t.prototype.promise=new Promise(function(t,e){r.onload=t,r.onerror=e,r.src=i(),!0===r.complete&&t(r)})}}},{"./log":13,"./utils":26}],6:[function(t,e,r){var a=t("./utils").smallImage;e.exports=function(t,e){var r,n,i=document.createElement("div"),o=document.createElement("img"),s=document.createElement("span");i.style.visibility="hidden",i.style.fontFamily=t,i.style.fontSize=e,i.style.margin=0,i.style.padding=0,document.body.appendChild(i),o.src=a(),o.width=1,o.height=1,o.style.margin=0,o.style.padding=0,o.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=e,s.style.margin=0,s.style.padding=0,s.appendChild(document.createTextNode("Hidden Text")),i.appendChild(s),i.appendChild(o),r=o.offsetTop-s.offsetTop+1,i.removeChild(s),i.appendChild(document.createTextNode("Hidden Text")),i.style.lineHeight="normal",o.style.verticalAlign="super",n=o.offsetTop-i.offsetTop+1,document.body.removeChild(i),this.baseline=r,this.lineWidth=1,this.middle=n}},{"./utils":26}],7:[function(t,e,r){function n(){this.data={}}var i=t("./font");n.prototype.getMetrics=function(t,e){return void 0===this.data[t+"-"+e]&&(this.data[t+"-"+e]=new i(t,e)),this.data[t+"-"+e]},e.exports=n},{"./font":6}],8:[function(o,t,e){function r(e,t,r){this.image=null,this.src=e;var n=this,i=s(e);this.promise=(t?new Promise(function(t){"about:blank"===e.contentWindow.document.URL||null==e.contentWindow.document.documentElement?e.contentWindow.onload=e.onload=function(){t(e)}:t(e)}):this.proxyLoad(r.proxy,i,r)).then(function(t){return o("./core")(t.contentWindow.document.documentElement,{type:"view",width:t.width,height:t.height,proxy:r.proxy,javascriptEnabled:r.javascriptEnabled,removeContainer:r.removeContainer,allowTaint:r.allowTaint,imageTimeout:r.imageTimeout/2})}).then(function(t){return n.image=t})}var s=o("./utils").getBounds,i=o("./proxy").loadUrlDocument;r.prototype.proxyLoad=function(t,e,r){var n=this.src;return i(n.src,t,n.ownerDocument,e.width,e.height,r)},t.exports=r},{"./core":4,"./proxy":16,"./utils":26}],9:[function(t,e,r){function n(t){this.src=t.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}n.TYPES={LINEAR:1,RADIAL:2},n.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,e.exports=n},{}],10:[function(t,e,r){e.exports=function(r,n){this.src=r,this.image=new Image;var i=this;this.tainted=null,this.promise=new Promise(function(t,e){i.image.onload=t,i.image.onerror=e,n&&(i.image.crossOrigin="anonymous"),i.image.src=r,!0===i.image.complete&&t(i.image)})}},{}],11:[function(t,e,r){function n(t,e){this.link=null,this.options=t,this.support=e,this.origin=this.getOrigin(window.location.href)}var o=t("./log"),i=t("./imagecontainer"),s=t("./dummyimagecontainer"),a=t("./proxyimagecontainer"),u=t("./framecontainer"),h=t("./svgcontainer"),l=t("./svgnodecontainer"),c=t("./lineargradientcontainer"),d=t("./webkitgradientcontainer"),f=t("./utils").bind;n.prototype.findImages=function(t){var e=[];return t.reduce(function(t,e){switch(e.node.nodeName){case"IMG":return t.concat([{args:[e.node.src],method:"url"}]);case"svg":case"IFRAME":return t.concat([{args:[e.node],method:e.node.nodeName}])}return t},[]).forEach(this.addImage(e,this.loadImage),this),e},n.prototype.findBackgroundImage=function(t,e){return e.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(t,this.loadImage),this),t},n.prototype.addImage=function(r,n){return function(e){e.args.forEach(function(t){this.imageExists(r,t)||(r.splice(0,0,n.call(this,e)),o("Added image #"+r.length,"string"==typeof t?t.substring(0,100):t))},this)}},n.prototype.hasImageBackground=function(t){return"none"!==t.method},n.prototype.loadImage=function(t){if("url"===t.method){var e=t.args[0];return!this.isSVG(e)||this.support.svg||this.options.allowTaint?e.match(/data:image\/.*;base64,/i)?new i(e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(e)||!0===this.options.allowTaint||this.isSVG(e)?new i(e,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new i(e,!0):this.options.proxy?new a(e,this.options.proxy):new s(e):new h(e)}return"linear-gradient"===t.method?new c(t):"gradient"===t.method?new d(t):"svg"===t.method?new l(t.args[0],this.support.svg):"IFRAME"===t.method?new u(t.args[0],this.isSameOrigin(t.args[0].src),this.options):new s(t)},n.prototype.isSVG=function(t){return"svg"===t.substring(t.length-3).toLowerCase()||h.prototype.isInline(t)},n.prototype.imageExists=function(t,e){return t.some(function(t){return t.src===e})},n.prototype.isSameOrigin=function(t){return this.getOrigin(t)===this.origin},n.prototype.getOrigin=function(t){var e=this.link||(this.link=document.createElement("a"));return e.href=t,e.href=e.href,e.protocol+e.hostname+e.port},n.prototype.getPromise=function(e){return this.timeout(e,this.options.imageTimeout).catch(function(){return new s(e.src).promise.then(function(t){e.image=t})})},n.prototype.get=function(e){var r=null;return this.images.some(function(t){return(r=t).src===e})?r:null},n.prototype.fetch=function(t){return this.images=t.reduce(f(this.findBackgroundImage,this),this.findImages(t)),this.images.forEach(function(e,r){e.promise.then(function(){o("Succesfully loaded image #"+(r+1),e)},function(t){o("Failed loading image #"+(r+1),e,t)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),o("Finished searching images"),this},n.prototype.timeout=function(r,n){var i,t=Promise.race([r.promise,new Promise(function(t,e){i=setTimeout(function(){o("Timed out loading image",r),e(r)},n)})]).then(function(t){return clearTimeout(i),t});return t.catch(function(){clearTimeout(i)}),t},e.exports=n},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(t,e,r){function n(t){i.apply(this,arguments),this.type=i.TYPES.LINEAR;var e=n.REGEXP_DIRECTION.test(t.args[0])||!i.REGEXP_COLORSTOP.test(t.args[0]);e?t.args[0].split(/\s+/).reverse().forEach(function(t,e){switch(t){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var r=this.y0,n=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=n,this.y1=r;break;case"center":break;default:var i=.01*parseFloat(t,10);if(isNaN(i))break;0===e?(this.y0=i,this.y1=1-this.y0):(this.x0=i,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=t.args.slice(e?1:0).map(function(t){var e=t.match(i.REGEXP_COLORSTOP),r=+e[2],n=0===r?"%":e[3];return{color:new o(e[1]),stop:"%"===n?r/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(r,n){null===r.stop&&this.colorStops.slice(n).some(function(t,e){return null!==t.stop&&(r.stop=(t.stop-this.colorStops[n-1].stop)/(e+1)+this.colorStops[n-1].stop,!0)},this)},this)}var i=t("./gradientcontainer"),o=t("./color");n.prototype=Object.create(i.prototype),n.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,e.exports=n},{"./color":3,"./gradientcontainer":9}],13:[function(t,e,r){var n=function(){n.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-n.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};n.options={logging:!1},e.exports=n},{}],14:[function(t,e,r){function n(t,e){this.node=t,this.parent=e,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function u(t){return-1!==t.toString().indexOf("%")}function i(t){return t.replace("px","")}function o(t){return parseFloat(t)}var s=t("./color"),a=t("./utils"),h=a.getBounds,l=a.parseBackgrounds,c=a.offsetBounds;n.prototype.cloneTo=function(t){t.visible=this.visible,t.borders=this.borders,t.bounds=this.bounds,t.clip=this.clip,t.backgroundClip=this.backgroundClip,t.computedStyles=this.computedStyles,t.styles=this.styles,t.backgroundImages=this.backgroundImages,t.opacity=this.opacity},n.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},n.prototype.assignStack=function(t){(this.stack=t).children.push(this)},n.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},n.prototype.css=function(t){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[t]||(this.styles[t]=this.computedStyles[t])},n.prototype.prefixedCss=function(e){var r=this.css(e);return void 0===r&&["webkit","moz","ms","o"].some(function(t){return void 0!==(r=this.css(t+e.substr(0,1).toUpperCase()+e.substr(1)))},this),void 0===r?null:r},n.prototype.computedStyle=function(t){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,t)},n.prototype.cssInt=function(t){var e=parseInt(this.css(t),10);return isNaN(e)?0:e},n.prototype.color=function(t){return this.colors[t]||(this.colors[t]=new s(this.css(t)))},n.prototype.cssFloat=function(t){var e=parseFloat(this.css(t));return isNaN(e)?0:e},n.prototype.fontWeight=function(){var t=this.css("fontWeight");switch(parseInt(t,10)){case 401:t="bold";break;case 400:t="normal"}return t},n.prototype.parseClip=function(){var t=this.css("clip").match(this.CLIP);return t?{top:parseInt(t[1],10),right:parseInt(t[2],10),bottom:parseInt(t[3],10),left:parseInt(t[4],10)}:null},n.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=l(this.css("backgroundImage")))},n.prototype.cssList=function(t,e){var r=(this.css(t)||"").split(",");return 1===(r=(r=r[e||0]||r[0]||"auto").trim().split(" ")).length&&(r=[r[0],u(r[0])?"auto":r[0]]),r},n.prototype.parseBackgroundSize=function(t,e,r){var n,i,o=this.cssList("backgroundSize",r);if(u(o[0]))n=t.width*parseFloat(o[0])/100;else{if(/contain|cover/.test(o[0])){var s=t.width/t.height,a=e.width/e.height;return s<a^"contain"===o[0]?{width:t.height*a,height:t.height}:{width:t.width,height:t.width/a}}n=parseInt(o[0],10)}return i="auto"===o[0]&&"auto"===o[1]?e.height:"auto"===o[1]?n/e.width*e.height:u(o[1])?t.height*parseFloat(o[1])/100:parseInt(o[1],10),"auto"===o[0]&&(n=i/e.height*e.width),{width:n,height:i}},n.prototype.parseBackgroundPosition=function(t,e,r,n){var i,o,s=this.cssList("backgroundPosition",r);return i=u(s[0])?(t.width-(n||e).width)*(parseFloat(s[0])/100):parseInt(s[0],10),o="auto"===s[1]?i/e.width*e.height:u(s[1])?(t.height-(n||e).height)*parseFloat(s[1])/100:parseInt(s[1],10),"auto"===s[0]&&(i=o/e.height*e.width),{left:i,top:o}},n.prototype.parseBackgroundRepeat=function(t){return this.cssList("backgroundRepeat",t)[0]},n.prototype.parseTextShadows=function(){var t=this.css("textShadow"),e=[];if(t&&"none"!==t)for(var r=t.match(this.TEXT_SHADOW_PROPERTY),n=0;r&&n<r.length;n++){var i=r[n].match(this.TEXT_SHADOW_VALUES);e.push({color:new s(i[0]),offsetX:i[1]?parseFloat(i[1].replace("px","")):0,offsetY:i[2]?parseFloat(i[2].replace("px","")):0,blur:i[3]?i[3].replace("px",""):0})}return e},n.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var t=this.parseBounds(),e=this.prefixedCss("transformOrigin").split(" ").map(i).map(o);e[0]+=t.left,e[1]+=t.top,this.transformData={origin:e,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},n.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var t=this.prefixedCss("transform"),e=t?function(t){if(t&&"matrix"===t[1])return t[2].split(",").map(function(t){return parseFloat(t.trim())});if(t&&"matrix3d"===t[1]){var e=t[2].split(",").map(function(t){return parseFloat(t.trim())});return[e[0],e[1],e[4],e[5],e[12],e[13]]}}(t.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=e||[1,0,0,1,0,0]}return this.transformMatrix},n.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?c(this.node):h(this.node))},n.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},n.prototype.getValue=function(){var t,e,r=this.node.value||"";return"SELECT"===this.node.tagName?(t=this.node,r=(e=t.options[t.selectedIndex||0])&&e.text||""):"password"===this.node.type&&(r=Array(r.length+1).join("")),0===r.length?this.node.placeholder||"":r},n.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,n.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,n.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,n.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,e.exports=n},{"./color":3,"./utils":26}],15:[function(t,e,r){function n(t,e,r,n,i){A("Starting NodeParser"),this.renderer=e,this.options=i,this.range=null,this.support=r,this.renderQueue=[],this.stack=new B(!0,1,t.ownerDocument,null);var o=new I(t,null);if(i.background&&e.rectangle(0,0,e.width,e.height,new L(i.background)),t===t.ownerDocument.documentElement){var s=new I(o.color("backgroundColor").isTransparent()?t.ownerDocument.body:t.ownerDocument.documentElement,null);e.rectangle(0,0,e.width,e.height,s.color("backgroundColor"))}o.visibile=o.isElementVisible(),this.createPseudoHideStyles(t.ownerDocument),this.disableAnimations(t.ownerDocument),this.nodes=P([o].concat(this.getChildren(o)).filter(function(t){return t.visible=t.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new D,A("Fetched nodes, total:",this.nodes.length),A("Calculate overflow clips"),this.calculateOverflowClips(),A("Start fetching images"),this.images=n.fetch(this.nodes.filter(T)),this.ready=this.images.ready.then(N(function(){return A("Images loaded, starting parsing"),A("Creating stacking contexts"),this.createStackingContexts(),A("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),A("Render queue created with "+this.renderQueue.length+" items"),new Promise(N(function(t){i.async?"function"==typeof i.async?i.async.call(this,this.renderQueue,t):0<this.renderQueue.length?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,t)):t():(this.renderQueue.forEach(this.paint,this),t())},this))},this))}function i(t){return t.parent&&t.parent.clip.length}function l(){}function u(s,a,u,h){return s.map(function(t,e){if(0<t.width){var r=a.left,n=a.top,i=a.width,o=a.height-s[2].width;switch(e){case 0:o=s[0].width,t.args=c({c1:[r,n],c2:[r+i,n],c3:[r+i-s[1].width,n+o],c4:[r+s[3].width,n+o]},h[0],h[1],u.topLeftOuter,u.topLeftInner,u.topRightOuter,u.topRightInner);break;case 1:r=a.left+a.width-s[1].width,i=s[1].width,t.args=c({c1:[r+i,n],c2:[r+i,n+o+s[2].width],c3:[r,n+o],c4:[r,n+s[0].width]},h[1],h[2],u.topRightOuter,u.topRightInner,u.bottomRightOuter,u.bottomRightInner);break;case 2:n=n+a.height-s[2].width,o=s[2].width,t.args=c({c1:[r+i,n+o],c2:[r,n+o],c3:[r+s[3].width,n],c4:[r+i-s[3].width,n]},h[2],h[3],u.bottomRightOuter,u.bottomRightInner,u.bottomLeftOuter,u.bottomLeftInner);break;case 3:i=s[3].width,t.args=c({c1:[r,n+o+s[2].width],c2:[r,n],c3:[r+i,n+s[0].width],c4:[r+i,n+o]},h[3],h[0],u.bottomLeftOuter,u.bottomLeftInner,u.topLeftOuter,u.topLeftInner)}}return t})}function b(t,e,r,n){var i=(Math.sqrt(2)-1)/3*4,o=r*i,s=n*i,a=t+r,u=e+n;return{topLeft:d({x:t,y:u},{x:t,y:u-s},{x:a-o,y:e},{x:a,y:e}),topRight:d({x:t,y:e},{x:t+o,y:e},{x:a,y:u-s},{x:a,y:u}),bottomRight:d({x:a,y:e},{x:a,y:e+s},{x:t+o,y:u},{x:t,y:u}),bottomLeft:d({x:a,y:u},{x:a-o,y:u},{x:t,y:e+s},{x:t,y:e})}}function h(t,e,r){var n=t.left,i=t.top,o=t.width,s=t.height,a=e[0][0]<o/2?e[0][0]:o/2,u=e[0][1]<s/2?e[0][1]:s/2,h=e[1][0]<o/2?e[1][0]:o/2,l=e[1][1]<s/2?e[1][1]:s/2,c=e[2][0]<o/2?e[2][0]:o/2,d=e[2][1]<s/2?e[2][1]:s/2,f=e[3][0]<o/2?e[3][0]:o/2,p=e[3][1]<s/2?e[3][1]:s/2,m=o-h,g=s-d,v=o-c,y=s-p;return{topLeftOuter:b(n,i,a,u).topLeft.subdivide(.5),topLeftInner:b(n+r[3].width,i+r[0].width,Math.max(0,a-r[3].width),Math.max(0,u-r[0].width)).topLeft.subdivide(.5),topRightOuter:b(n+m,i,h,l).topRight.subdivide(.5),topRightInner:b(n+Math.min(m,o+r[3].width),i+r[0].width,m>o+r[3].width?0:h-r[3].width,l-r[0].width).topRight.subdivide(.5),bottomRightOuter:b(n+v,i+g,c,d).bottomRight.subdivide(.5),bottomRightInner:b(n+Math.min(v,o-r[3].width),i+Math.min(g,s+r[0].width),Math.max(0,c-r[1].width),d-r[2].width).bottomRight.subdivide(.5),bottomLeftOuter:b(n,i+y,f,p).bottomLeft.subdivide(.5),bottomLeftInner:b(n+r[3].width,i+y,Math.max(0,f-r[3].width),p-r[2].width).bottomLeft.subdivide(.5)}}function d(a,u,h,l){var c=function(t,e,r){return{x:t.x+(e.x-t.x)*r,y:t.y+(e.y-t.y)*r}};return{start:a,startControl:u,endControl:h,end:l,subdivide:function(t){var e=c(a,u,t),r=c(u,h,t),n=c(h,l,t),i=c(e,r,t),o=c(r,n,t),s=c(i,o,t);return[d(a,e,i,s),d(s,o,n,l)]},curveTo:function(t){t.push(["bezierCurve",u.x,u.y,h.x,h.y,l.x,l.y])},curveToReversed:function(t){t.push(["bezierCurve",h.x,h.y,u.x,u.y,a.x,a.y])}}}function c(t,e,r,n,i,o,s){var a=[];return 0<e[0]||0<e[1]?(a.push(["line",n[1].start.x,n[1].start.y]),n[1].curveTo(a)):a.push(["line",t.c1[0],t.c1[1]]),0<r[0]||0<r[1]?(a.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(a),a.push(["line",s[0].end.x,s[0].end.y]),s[0].curveToReversed(a)):(a.push(["line",t.c2[0],t.c2[1]]),a.push(["line",t.c3[0],t.c3[1]])),0<e[0]||0<e[1]?(a.push(["line",i[1].end.x,i[1].end.y]),i[1].curveToReversed(a)):a.push(["line",t.c4[0],t.c4[1]]),a}function s(t,e,r,n,i,o,s){0<e[0]||0<e[1]?(t.push(["line",n[0].start.x,n[0].start.y]),n[0].curveTo(t),n[1].curveTo(t)):t.push(["line",o,s]),(0<r[0]||0<r[1])&&t.push(["line",i[0].start.x,i[0].start.y])}function f(t){return t.cssInt("zIndex")<0}function p(t){return 0<t.cssInt("zIndex")}function m(t){return 0===t.cssInt("zIndex")}function g(t){return-1!==["inline","inline-block","inline-table"].indexOf(t.css("display"))}function v(t){return t instanceof B}function y(t){return 0<t.node.data.trim().length}function o(t){return t.nodeType===Node.TEXT_NODE||t.nodeType===Node.ELEMENT_NODE}function x(t){return"static"!==t.css("position")}function w(t){return"none"!==t.css("float")}function _(t){var e=this;return function(){return!t.apply(e,arguments)}}function T(t){return t.node.nodeType===Node.ELEMENT_NODE}function a(t){return!0===t.isPseudoElement}function E(t){return t.node.nodeType===Node.TEXT_NODE}function S(t){return parseInt(t,10)}function C(t){return t.width}function O(t){return t.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(t.node.nodeName)}function P(t){return[].concat.apply([],t)}var A=t("./log"),M=t("punycode"),I=t("./nodecontainer"),R=t("./textcontainer"),k=t("./pseudoelementcontainer"),D=t("./fontmetrics"),L=t("./color"),B=t("./stackingcontext"),F=t("./utils"),N=F.bind,j=F.getBounds,U=F.parseBackgrounds,q=F.offsetBounds;n.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(t){if(T(t)){a(t)&&t.appendToDOM(),t.borders=this.parseBorders(t);var e="hidden"===t.css("overflow")?[t.borders.clip]:[],r=t.parseClip();r&&-1!==["absolute","fixed"].indexOf(t.css("position"))&&e.push([["rect",t.bounds.left+r.left,t.bounds.top+r.top,r.right-r.left,r.bottom-r.top]]),t.clip=i(t)?t.parent.clip.concat(e):e,t.backgroundClip="hidden"!==t.css("overflow")?t.clip.concat([t.borders.clip]):t.clip,a(t)&&t.cleanDOM()}else E(t)&&(t.clip=i(t)?t.parent.clip:[]);a(t)||(t.bounds=null)},this)},n.prototype.asyncRenderer=function(t,e,r){r=r||Date.now(),this.paint(t[this.renderIndex++]),t.length===this.renderIndex?e():r+20>Date.now()?this.asyncRenderer(t,e,r):setTimeout(N(function(){this.asyncRenderer(t,e)},this),0)},n.prototype.createPseudoHideStyles=function(t){this.createStyles(t,"."+k.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+k.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},n.prototype.disableAnimations=function(t){this.createStyles(t,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},n.prototype.createStyles=function(t,e){var r=t.createElement("style");r.innerHTML=e,t.body.appendChild(r)},n.prototype.getPseudoElements=function(t){var e=[[t]];if(t.node.nodeType===Node.ELEMENT_NODE){var r=this.getPseudoElement(t,":before"),n=this.getPseudoElement(t,":after");r&&e.push(r),n&&e.push(n)}return P(e)},n.prototype.getPseudoElement=function(t,e){var r,n,i=t.computedStyle(e);if(!i||!i.content||"none"===i.content||"-moz-alt-content"===i.content||"none"===i.display)return null;for(var o=(r=i.content,n=void 0,(n=r.substr(0,1))===r.substr(r.length-1)&&n.match(/'|"/)?r.substr(1,r.length-2):r),s="url"===o.substr(0,3),a=document.createElement(s?"img":"html2canvaspseudoelement"),u=new k(a,t,e),h=i.length-1;0<=h;h--){var l=i.item(h).replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")});a.style[l]=i[l]}if(a.className=k.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+k.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,s)return a.src=U(o)[0].args[0],[u];var c=document.createTextNode(o);return a.appendChild(c),[u,new R(c,u)]},n.prototype.getChildren=function(r){return P([].filter.call(r.node.childNodes,o).map(function(t){var e=[t.nodeType===Node.TEXT_NODE?new R(t,r):new I(t,r)].filter(O);return t.nodeType===Node.ELEMENT_NODE&&e.length&&"TEXTAREA"!==t.tagName?e[0].isElementVisible()?e.concat(this.getChildren(e[0])):[]:e},this))},n.prototype.newStackingContext=function(t,e){var r=new B(e,t.getOpacity(),t.node,t.parent);t.cloneTo(r),(e?r.getParentStack(this):r.parent.stack).contexts.push(r),t.stack=r},n.prototype.createStackingContexts=function(){this.nodes.forEach(function(t){var e;T(t)&&(this.isRootElement(t)||t.getOpacity()<1||"auto"!==(-1!==["absolute","relative","fixed"].indexOf((e=t).css("position"))?e.css("zIndex"):"auto")||this.isBodyWithTransparentRoot(t)||t.hasTransform())?this.newStackingContext(t,!0):T(t)&&(x(t)&&m(t)||-1!==["inline-block","inline-table"].indexOf(t.css("display"))||w(t))?this.newStackingContext(t,!1):t.assignStack(t.parent.stack)},this)},n.prototype.isBodyWithTransparentRoot=function(t){return"BODY"===t.node.nodeName&&t.parent.color("backgroundColor").isTransparent()},n.prototype.isRootElement=function(t){return null===t.parent},n.prototype.sortStackingContexts=function(t){var r;t.contexts.sort((r=t.contexts.slice(0),function(t,e){return t.cssInt("zIndex")+r.indexOf(t)/r.length-(e.cssInt("zIndex")+r.indexOf(e)/r.length)})),t.contexts.forEach(this.sortStackingContexts,this)},n.prototype.parseTextBounds=function(s){return function(t,e,r){if("none"!==s.parent.css("textDecoration").substr(0,4)||0!==t.trim().length){if(this.support.rangeBounds&&!s.parent.hasTransform()){var n=r.slice(0,e).join("").length;return this.getRangeBounds(s.node,n,t.length)}if(s.node&&"string"==typeof s.node.data){var i=s.node.splitText(t.length),o=this.getWrapperBounds(s.node,s.parent.hasTransform());return s.node=i,o}}else this.support.rangeBounds&&!s.parent.hasTransform()||(s.node=s.node.splitText(t.length));return{}}},n.prototype.getWrapperBounds=function(t,e){var r=t.ownerDocument.createElement("html2canvaswrapper"),n=t.parentNode,i=t.cloneNode(!0);r.appendChild(t.cloneNode(!0)),n.replaceChild(r,t);var o=e?q(r):j(r);return n.replaceChild(i,r),o},n.prototype.getRangeBounds=function(t,e,r){var n=this.range||(this.range=t.ownerDocument.createRange());return n.setStart(t,e),n.setEnd(t,e+r),n.getBoundingClientRect()},n.prototype.parse=function(t){var e=t.contexts.filter(f),r=t.children.filter(T),n=r.filter(_(w)),i=n.filter(_(x)).filter(_(g)),o=r.filter(_(x)).filter(w),s=n.filter(_(x)).filter(g),a=t.contexts.concat(n.filter(x)).filter(m),u=t.children.filter(E).filter(y),h=t.contexts.filter(p);e.concat(i).concat(o).concat(s).concat(a).concat(u).concat(h).forEach(function(t){this.renderQueue.push(t),v(t)&&(this.parse(t),this.renderQueue.push(new l))},this)},n.prototype.paint=function(t){try{t instanceof l?this.renderer.ctx.restore():E(t)?(a(t.parent)&&t.parent.appendToDOM(),this.paintText(t),a(t.parent)&&t.parent.cleanDOM()):this.paintNode(t)}catch(t){if(A(t),this.options.strict)throw t}},n.prototype.paintNode=function(t){v(t)&&(this.renderer.setOpacity(t.opacity),this.renderer.ctx.save(),t.hasTransform()&&this.renderer.setTransform(t.parseTransform())),"INPUT"===t.node.nodeName&&"checkbox"===t.node.type?this.paintCheckbox(t):"INPUT"===t.node.nodeName&&"radio"===t.node.type?this.paintRadio(t):this.paintElement(t)},n.prototype.paintElement=function(r){var n=r.parseBounds();this.renderer.clip(r.backgroundClip,function(){this.renderer.renderBackground(r,n,r.borders.borders.map(C))},this),this.renderer.clip(r.clip,function(){this.renderer.renderBorders(r.borders.borders)},this),this.renderer.clip(r.backgroundClip,function(){switch(r.node.nodeName){case"svg":case"IFRAME":var t=this.images.get(r.node);t?this.renderer.renderImage(r,n,r.borders,t):A("Error loading <"+r.node.nodeName+">",r.node);break;case"IMG":var e=this.images.get(r.node.src);e?this.renderer.renderImage(r,n,r.borders,e):A("Error loading <img>",r.node.src);break;case"CANVAS":this.renderer.renderImage(r,n,r.borders,{image:r.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(r)}},this)},n.prototype.paintCheckbox=function(t){var e=t.parseBounds(),r=Math.min(e.width,e.height),n={width:r-1,height:r-1,top:e.top,left:e.left},i=[3,3],o=[i,i,i,i],s=[1,1,1,1].map(function(t){return{color:new L("#A5A5A5"),width:t}}),a=h(n,o,s);this.renderer.clip(t.backgroundClip,function(){this.renderer.rectangle(n.left+1,n.top+1,n.width-2,n.height-2,new L("#DEDEDE")),this.renderer.renderBorders(u(s,n,a,o)),t.node.checked&&(this.renderer.font(new L("#424242"),"normal","normal","bold",r-3+"px","arial"),this.renderer.text("",n.left+r/6,n.top+r-1))},this)},n.prototype.paintRadio=function(t){var e=t.parseBounds(),r=Math.min(e.width,e.height)-2;this.renderer.clip(t.backgroundClip,function(){this.renderer.circleStroke(e.left+1,e.top+1,r,new L("#DEDEDE"),1,new L("#A5A5A5")),t.node.checked&&this.renderer.circle(Math.ceil(e.left+r/4)+1,Math.ceil(e.top+r/4)+1,Math.floor(r/2),new L("#424242"))},this)},n.prototype.paintFormValue=function(e){var t=e.getValue();if(0<t.length){var r=e.node.ownerDocument,n=r.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(t){try{n.style[t]=e.css(t)}catch(t){A("html2canvas: Parse: Exception caught in renderFormValue: "+t.message)}});var i=e.parseBounds();n.style.position="fixed",n.style.left=i.left+"px",n.style.top=i.top+"px",n.textContent=t,r.body.appendChild(n),this.paintText(new R(n.firstChild,e)),r.body.removeChild(n)}},n.prototype.paintText=function(r){r.applyTextTransform();var t,e=M.ucs2.decode(r.node.data),n=this.options.letterRendering&&!/^(normal|none|0px)$/.test(r.parent.css("letterSpacing"))||(t=r.node.data,/[^\u0000-\u00ff]/.test(t))?e.map(function(t){return M.ucs2.encode([t])}):function(t){for(var e,r=[],n=0,i=!1;t.length;)o=t[n],-1!==[32,13,10,9,45].indexOf(o)===i?((e=t.splice(0,n)).length&&r.push(M.ucs2.encode(e)),i=!i,n=0):n++,n>=t.length&&(e=t.splice(0,n)).length&&r.push(M.ucs2.encode(e));var o;return r}(e),i=r.parent.fontWeight(),o=r.parent.css("fontSize"),s=r.parent.css("fontFamily"),a=r.parent.parseTextShadows();this.renderer.font(r.parent.color("color"),r.parent.css("fontStyle"),r.parent.css("fontVariant"),i,o,s),a.length?this.renderer.fontShadow(a[0].color,a[0].offsetX,a[0].offsetY,a[0].blur):this.renderer.clearShadow(),this.renderer.clip(r.parent.clip,function(){n.map(this.parseTextBounds(r),this).forEach(function(t,e){t&&(this.renderer.text(n[e],t.left,t.bottom),this.renderTextDecoration(r.parent,t,this.fontMetrics.getMetrics(s,o)))},this)},this)},n.prototype.renderTextDecoration=function(t,e,r){switch(t.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(e.left,Math.round(e.top+r.baseline+r.lineWidth),e.width,1,t.color("color"));break;case"overline":this.renderer.rectangle(e.left,Math.round(e.top),e.width,1,t.color("color"));break;case"line-through":this.renderer.rectangle(e.left,Math.ceil(e.top+r.middle+r.lineWidth),e.width,1,t.color("color"))}};var W={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};n.prototype.parseBorders=function(o){var r,t=o.parseBounds(),e=(r=o,["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){var e=r.css("border"+t+"Radius").split(" ");return e.length<=1&&(e[1]=e[0]),e.map(S)})),n=["Top","Right","Bottom","Left"].map(function(t,e){var r=o.css("border"+t+"Style"),n=o.color("border"+t+"Color");"inset"===r&&n.isBlack()&&(n=new L([255,255,255,n.a]));var i=W[r]?W[r][e]:null;return{width:o.cssInt("border"+t+"Width"),color:i?n[i[0]](i[1]):n,args:null}}),i=h(t,e,n);return{clip:this.parseBackgroundClip(o,i,n,e,t),borders:u(n,t,i,e)}},n.prototype.parseBackgroundClip=function(t,e,r,n,i){var o=[];switch(t.css("backgroundClip")){case"content-box":case"padding-box":s(o,n[0],n[1],e.topLeftInner,e.topRightInner,i.left+r[3].width,i.top+r[0].width),s(o,n[1],n[2],e.topRightInner,e.bottomRightInner,i.left+i.width-r[1].width,i.top+r[0].width),s(o,n[2],n[3],e.bottomRightInner,e.bottomLeftInner,i.left+i.width-r[1].width,i.top+i.height-r[2].width),s(o,n[3],n[0],e.bottomLeftInner,e.topLeftInner,i.left+r[3].width,i.top+i.height-r[2].width);break;default:s(o,n[0],n[1],e.topLeftOuter,e.topRightOuter,i.left,i.top),s(o,n[1],n[2],e.topRightOuter,e.bottomRightOuter,i.left+i.width,i.top),s(o,n[2],n[3],e.bottomRightOuter,e.bottomLeftOuter,i.left+i.width,i.top+i.height),s(o,n[3],n[0],e.bottomLeftOuter,e.topLeftOuter,i.left,i.top+i.height)}return o},e.exports=n},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(t,e,r){function a(t,e,r){var n="withCredentials"in new XMLHttpRequest;if(!e)return Promise.reject("No proxy configured");var i=u(n),o=h(e,t,i);return n?l(o):s(r,o,i).then(function(t){return f(t.content)})}function s(i,o,s){return new Promise(function(e,r){var t=i.createElement("script"),n=function(){delete window.html2canvas.proxy[s],i.body.removeChild(t)};window.html2canvas.proxy[s]=function(t){n(),e(t)},t.src=o,t.onerror=function(t){n(),r(t)},i.body.appendChild(t)})}function u(t){return t?"":"html2canvas_"+Date.now()+"_"+ ++i+"_"+Math.round(1e5*Math.random())}function h(t,e,r){return t+"?url="+encodeURIComponent(e)+(r.length?"&callback=html2canvas.proxy."+r:"")}var l=t("./xhr"),n=t("./utils"),c=t("./log"),d=t("./clone"),f=n.decode64,i=0;r.Proxy=a,r.ProxyURL=function(t,e,r){var n="crossOrigin"in new Image,i=u(n),o=h(e,t,i);return n?Promise.resolve(o):s(r,o,i).then(function(t){return"data:"+t.type+";base64,"+t.content})},r.loadUrlDocument=function(t,e,r,n,i,o){return new a(t,e,window.document).then((s=t,function(e){var r,t=new DOMParser;try{r=t.parseFromString(e,"text/html")}catch(t){c("DOMParser not supported, falling back to createHTMLDocument"),r=document.implementation.createHTMLDocument("");try{r.open(),r.write(e),r.close()}catch(t){c("createHTMLDocument write not supported, falling back to document.body.innerHTML"),r.body.innerHTML=e}}var n=r.querySelector("base");if(!n||!n.href.host){var i=r.createElement("base");i.href=s,r.head.insertBefore(i,r.head.firstChild)}return r})).then(function(t){return d(t,r,n,i,o,0,0)});var s}},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(t,e,r){var o=t("./proxy").ProxyURL;e.exports=function(r,n){var t=document.createElement("a");t.href=r,r=t.href,this.src=r,this.image=new Image;var i=this;this.promise=new Promise(function(t,e){i.image.crossOrigin="Anonymous",i.image.onload=t,i.image.onerror=e,new o(r,n,document).then(function(t){i.image.src=t}).catch(e)})}},{"./proxy":16}],18:[function(t,e,r){function n(t,e,r){i.call(this,t,e),this.isPseudoElement=!0,this.before=":before"===r}var i=t("./nodecontainer");n.prototype.cloneTo=function(t){n.prototype.cloneTo.call(this,t),t.isPseudoElement=!0,t.before=this.before},(n.prototype=Object.create(i.prototype)).appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},n.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},n.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},n.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",n.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",e.exports=n},{"./nodecontainer":14}],19:[function(t,e,r){function n(t,e,r,n,i){this.width=t,this.height=e,this.images=r,this.options=n,this.document=i}var u=t("./log");n.prototype.renderImage=function(t,e,r,n){var i=t.cssInt("paddingLeft"),o=t.cssInt("paddingTop"),s=t.cssInt("paddingRight"),a=t.cssInt("paddingBottom"),u=r.borders,h=e.width-(u[1].width+u[3].width+i+s),l=e.height-(u[0].width+u[2].width+o+a);this.drawImage(n,0,0,n.image.width||h,n.image.height||l,e.left+i+u[3].width,e.top+o+u[0].width,h,l)},n.prototype.renderBackground=function(t,e,r){0<e.height&&0<e.width&&(this.renderBackgroundColor(t,e),this.renderBackgroundImage(t,e,r))},n.prototype.renderBackgroundColor=function(t,e){var r=t.color("backgroundColor");r.isTransparent()||this.rectangle(e.left,e.top,e.width,e.height,r)},n.prototype.renderBorders=function(t){t.forEach(this.renderBorder,this)},n.prototype.renderBorder=function(t){t.color.isTransparent()||null===t.args||this.drawShape(t.args,t.color)},n.prototype.renderBackgroundImage=function(o,s,a){o.parseBackgroundImages().reverse().forEach(function(t,e,r){switch(t.method){case"url":var n=this.images.get(t.args[0]);n?this.renderBackgroundRepeating(o,s,n,r.length-(e+1),a):u("Error loading background-image",t.args[0]);break;case"linear-gradient":case"gradient":var i=this.images.get(t.value);i?this.renderBackgroundGradient(i,s,a):u("Error loading background-image",t.args[0]);break;case"none":break;default:u("Unknown background-image type",t.args[0])}},this)},n.prototype.renderBackgroundRepeating=function(t,e,r,n,i){var o=t.parseBackgroundSize(e,r.image,n),s=t.parseBackgroundPosition(e,r.image,n,o);switch(t.parseBackgroundRepeat(n)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(r,s,o,e,e.left+i[3],e.top+s.top+i[0],99999,o.height,i);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(r,s,o,e,e.left+s.left+i[3],e.top+i[0],o.width,99999,i);break;case"no-repeat":this.backgroundRepeatShape(r,s,o,e,e.left+s.left+i[3],e.top+s.top+i[0],o.width,o.height,i);break;default:this.renderBackgroundRepeat(r,s,o,{top:e.top,left:e.left},i[3],i[0])}},e.exports=n},{"./log":13}],20:[function(t,e,r){function n(t,e){o.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=t,this.canvas.height=e),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},a("Initialized CanvasRenderer with size",t,"x",e)}function i(t){return 0<t.length}var o=t("../renderer"),s=t("../lineargradientcontainer"),a=t("../log");(n.prototype=Object.create(o.prototype)).setFillStyle=function(t){return this.ctx.fillStyle="object"==typeof t&&t.isColor?t.toString():t,this.ctx},n.prototype.rectangle=function(t,e,r,n,i){this.setFillStyle(i).fillRect(t,e,r,n)},n.prototype.circle=function(t,e,r,n){this.setFillStyle(n),this.ctx.beginPath(),this.ctx.arc(t+r/2,e+r/2,r/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},n.prototype.circleStroke=function(t,e,r,n,i,o){this.circle(t,e,r,n),this.ctx.strokeStyle=o.toString(),this.ctx.stroke()},n.prototype.drawShape=function(t,e){this.shape(t),this.setFillStyle(e).fill()},n.prototype.taints=function(e){if(null===e.tainted){this.taintCtx.drawImage(e.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),e.tainted=!1}catch(t){this.taintCtx=document.createElement("canvas").getContext("2d"),e.tainted=!0}}return e.tainted},n.prototype.drawImage=function(t,e,r,n,i,o,s,a,u){this.taints(t)&&!this.options.allowTaint||this.ctx.drawImage(t.image,e,r,n,i,o,s,a,u)},n.prototype.clip=function(t,e,r){this.ctx.save(),t.filter(i).forEach(function(t){this.shape(t).clip()},this),e.call(r),this.ctx.restore()},n.prototype.shape=function(t){return this.ctx.beginPath(),t.forEach(function(t,e){"rect"===t[0]?this.ctx.rect.apply(this.ctx,t.slice(1)):this.ctx[0===e?"moveTo":t[0]+"To"].apply(this.ctx,t.slice(1))},this),this.ctx.closePath(),this.ctx},n.prototype.font=function(t,e,r,n,i,o){this.setFillStyle(t).font=[e,r,n,i,o].join(" ").split(",")[0]},n.prototype.fontShadow=function(t,e,r,n){this.setVariable("shadowColor",t.toString()).setVariable("shadowOffsetY",e).setVariable("shadowOffsetX",r).setVariable("shadowBlur",n)},n.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},n.prototype.setOpacity=function(t){this.ctx.globalAlpha=t},n.prototype.setTransform=function(t){this.ctx.translate(t.origin[0],t.origin[1]),this.ctx.transform.apply(this.ctx,t.matrix),this.ctx.translate(-t.origin[0],-t.origin[1])},n.prototype.setVariable=function(t,e){return this.variables[t]!==e&&(this.variables[t]=this.ctx[t]=e),this},n.prototype.text=function(t,e,r){this.ctx.fillText(t,e,r)},n.prototype.backgroundRepeatShape=function(t,e,r,n,i,o,s,a,u){var h=[["line",Math.round(i),Math.round(o)],["line",Math.round(i+s),Math.round(o)],["line",Math.round(i+s),Math.round(a+o)],["line",Math.round(i),Math.round(a+o)]];this.clip([h],function(){this.renderBackgroundRepeat(t,e,r,n,u[3],u[0])},this)},n.prototype.renderBackgroundRepeat=function(t,e,r,n,i,o){var s=Math.round(n.left+e.left+i),a=Math.round(n.top+e.top+o);this.setFillStyle(this.ctx.createPattern(this.resizeImage(t,r),"repeat")),this.ctx.translate(s,a),this.ctx.fill(),this.ctx.translate(-s,-a)},n.prototype.renderBackgroundGradient=function(t,e){if(t instanceof s){var r=this.ctx.createLinearGradient(e.left+e.width*t.x0,e.top+e.height*t.y0,e.left+e.width*t.x1,e.top+e.height*t.y1);t.colorStops.forEach(function(t){r.addColorStop(t.stop,t.color.toString())}),this.rectangle(e.left,e.top,e.width,e.height,r)}},n.prototype.resizeImage=function(t,e){var r=t.image;if(r.width===e.width&&r.height===e.height)return r;var n=document.createElement("canvas");return n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(r,0,0,r.width,r.height,0,0,e.width,e.height),n},e.exports=n},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(t,e,r){function n(t,e,r,n){i.call(this,r,n),this.ownStacking=t,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*e}var i=t("./nodecontainer");(n.prototype=Object.create(i.prototype)).getParentStack=function(t){var e=this.parent?this.parent.stack:null;return e?e.ownStacking?e:e.getParentStack(t):t.stack},e.exports=n},{"./nodecontainer":14}],22:[function(t,e,r){function n(t){this.rangeBounds=this.testRangeBounds(t),this.cors=this.testCORS(),this.svg=this.testSVG()}n.prototype.testRangeBounds=function(t){var e,r,n=!1;return t.createRange&&(e=t.createRange()).getBoundingClientRect&&((r=t.createElement("boundtest")).style.height="123px",r.style.display="block",t.body.appendChild(r),e.selectNode(r),123===e.getBoundingClientRect().height&&(n=!0),t.body.removeChild(r)),n},n.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},n.prototype.testSVG=function(){var t=new Image,e=document.createElement("canvas"),r=e.getContext("2d");t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),e.toDataURL()}catch(t){return!1}return!0},e.exports=n},{}],23:[function(t,e,r){function n(t){this.src=t,this.image=null;var r=this;this.promise=this.hasFabric().then(function(){return r.isInline(t)?Promise.resolve(r.inlineFormatting(t)):i(t)}).then(function(e){return new Promise(function(t){window.html2canvas.svg.fabric.loadSVGFromString(e,r.createCanvas.call(r,t))})})}var i=t("./xhr"),o=t("./utils").decode64;n.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},n.prototype.inlineFormatting=function(t){return/^data:image\/svg\+xml;base64,/.test(t)?this.decode64(this.removeContentType(t)):this.removeContentType(t)},n.prototype.removeContentType=function(t){return t.replace(/^data:image\/svg\+xml(;base64)?,/,"")},n.prototype.isInline=function(t){return/^data:image\/svg\+xml/i.test(t)},n.prototype.createCanvas=function(n){var i=this;return function(t,e){var r=new window.html2canvas.svg.fabric.StaticCanvas("c");i.image=r.lowerCanvasEl,r.setWidth(e.width).setHeight(e.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(t,e)).renderAll(),n(r.lowerCanvasEl)}},n.prototype.decode64=function(t){return"function"==typeof window.atob?window.atob(t):o(t)},e.exports=n},{"./utils":26,"./xhr":28}],24:[function(t,e,r){function n(r,t){this.src=r,this.image=null;var n=this;this.promise=t?new Promise(function(t,e){n.image=new Image,n.image.onload=t,n.image.onerror=e,n.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(r),!0===n.image.complete&&t(n.image)}):this.hasFabric().then(function(){return new Promise(function(t){window.html2canvas.svg.fabric.parseSVGDocument(r,n.createCanvas.call(n,t))})})}var i=t("./svgcontainer");n.prototype=Object.create(i.prototype),e.exports=n},{"./svgcontainer":23}],25:[function(t,e,r){function n(t,e){o.call(this,t,e)}function i(t,e,r){if(0<t.length)return e+r.toUpperCase()}var o=t("./nodecontainer");(n.prototype=Object.create(o.prototype)).applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},n.prototype.transform=function(t){var e=this.node.data;switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,i);case"uppercase":return e.toUpperCase();default:return e}},e.exports=n},{"./nodecontainer":14}],26:[function(t,e,r){r.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},r.bind=function(t,e){return function(){return t.apply(e,arguments)}},r.decode64=function(t){var e,r,n,i,o,s,a,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=t.length,l="";for(e=0;e<h;e+=4)o=u.indexOf(t[e])<<2|(r=u.indexOf(t[e+1]))>>4,s=(15&r)<<4|(n=u.indexOf(t[e+2]))>>2,a=(3&n)<<6|(i=u.indexOf(t[e+3])),l+=64===n?String.fromCharCode(o):64===i||-1===i?String.fromCharCode(o,s):String.fromCharCode(o,s,a);return l},r.getBounds=function(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),r=null==t.offsetWidth?e.width:t.offsetWidth;return{top:e.top,bottom:e.bottom||e.top+e.height,right:e.left+r,left:e.left,width:r,height:null==t.offsetHeight?e.height:t.offsetHeight}}return{}},r.offsetBounds=function(t){var e=t.offsetParent?r.offsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,right:t.offsetLeft+e.left+t.offsetWidth,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},r.parseBackgrounds=function(t){var e,r,n,i,o,s,a,u=[],h=0,l=0,c=function(){e&&('"'===r.substr(0,1)&&(r=r.substr(1,r.length-2)),r&&a.push(r),"-"===e.substr(0,1)&&0<(i=e.indexOf("-",1)+1)&&(n=e.substr(0,i),e=e.substr(i)),u.push({prefix:n,method:e.toLowerCase(),value:o,args:a,image:null})),a=[],e=n=r=o=""};return a=[],e=n=r=o="",t.split("").forEach(function(t){if(!(0===h&&-1<" \r\n\t".indexOf(t))){switch(t){case'"':s?s===t&&(s=null):s=t;break;case"(":if(s)break;if(0===h)return h=1,void(o+=t);l++;break;case")":if(s)break;if(1===h){if(0===l)return h=0,o+=t,void c();l--}break;case",":if(s)break;if(0===h)return void c();if(1===h&&0===l&&!e.match(/^url$/i))return a.push(r),r="",void(o+=t)}o+=t,0===h?e+=t:r+=t}}),c(),u}},{}],27:[function(t,e,r){function n(t){i.apply(this,arguments),this.type="linear"===t.args[0]?i.TYPES.LINEAR:i.TYPES.RADIAL}var i=t("./gradientcontainer");n.prototype=Object.create(i.prototype),e.exports=n},{"./gradientcontainer":9}],28:[function(t,e,r){e.exports=function(n){return new Promise(function(t,e){var r=new XMLHttpRequest;r.open("GET",n),r.onload=function(){200===r.status?t(r.responseText):e(new Error(r.statusText))},r.onerror=function(){e(new Error("Network Error"))},r.send()})}},{}]},{},[4])(4)}),J="undefined"!=typeof window&&window||void 0,Q=function(){function i(t){var e,r,n,i,o,s,a,u,h,l,c,d,f,p;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},s=null;;){switch(e=this.readUInt32(),h=function(){var t,e;for(e=[],t=0;t<4;++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":s&&this.animation.frames.push(s),this.pos+=4,s={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},o=this.readUInt16(),i=this.readUInt16()||100,s.delay=1e3*o/i,s.disposeOp=this.data[this.pos++],s.blendOp=this.data[this.pos++],s.data=[];break;case"IDAT":case"fdAT":for("fdAT"===h&&(this.pos+=4,e-=4),t=(null!=s?s.data:void 0)||this.imgData,d=0;0<=e?d<e:e<d;0<=e?++d:--d)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(n=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>n)throw new Error("More transparent colors than palette size");if(0<(l=n-this.transparency.indexed.length))for(f=0;0<=l?f<l:l<f;0<=l?++f:--f)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":a=(c=this.read(e)).indexOf(0),u=String.fromCharCode.apply(String,c.slice(0,a)),this.text[u]=String.fromCharCode.apply(String,c.slice(a+1));break;case"IEND":return s&&this.animation.frames.push(s),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,r=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*r,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}var h,r,n;i.load=function(t,e,r){var n;return"function"==typeof e&&(r=e),(n=new XMLHttpRequest).open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){var t;return t=new i(new Uint8Array(n.response||n.mozResponseArrayBuffer)),"function"==typeof(null!=e?e.getContext:void 0)&&t.render(e),"function"==typeof r?r(t):void 0},n.send(null)},i.prototype.read=function(t){var e,r;for(r=[],e=0;0<=t?e<t:t<e;0<=t?++e:--e)r.push(this.data[this.pos++]);return r},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(t){var e,r,n,i,o,s,a,u,h,l,c,d,f,p,m,g,v,y,b,x,w,_,T;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);for(t=(t=new st(t)).getBytes(),g=(d=this.pixelBitlength/8)*this.width,f=new Uint8Array(g*this.height),s=t.length,r=p=m=0;p<s;){switch(t[p++]){case 0:for(i=b=0;b<g;i=b+=1)f[r++]=t[p++];break;case 1:for(i=x=0;x<g;i=x+=1)e=t[p++],o=i<d?0:f[r-d],f[r++]=(e+o)%256;break;case 2:for(i=w=0;w<g;i=w+=1)e=t[p++],n=(i-i%d)/d,v=m&&f[(m-1)*g+n*d+i%d],f[r++]=(v+e)%256;break;case 3:for(i=_=0;_<g;i=_+=1)e=t[p++],n=(i-i%d)/d,o=i<d?0:f[r-d],v=m&&f[(m-1)*g+n*d+i%d],f[r++]=(e+Math.floor((o+v)/2))%256;break;case 4:for(i=T=0;T<g;i=T+=1)e=t[p++],n=(i-i%d)/d,o=i<d?0:f[r-d],0===m?v=y=0:(v=f[(m-1)*g+n*d+i%d],y=n&&f[(m-1)*g+(n-1)*d+i%d]),a=o+v-y,u=Math.abs(a-o),l=Math.abs(a-v),c=Math.abs(a-y),h=u<=l&&u<=c?o:l<=c?v:y,f[r++]=(e+h)%256;break;default:throw new Error("Invalid filter algorithm: "+t[p-1])}m++}return f},i.prototype.decodePalette=function(){var t,e,r,n,i,o,s,a,u;for(r=this.palette,o=this.transparency.indexed||[],i=new Uint8Array((o.length||0)+r.length),e=s=t=n=0,a=r.length;s<a;e=s+=3)i[n++]=r[e],i[n++]=r[e+1],i[n++]=r[e+2],i[n++]=null!=(u=o[t++])?u:255;return i},i.prototype.copyToImageData=function(t,e){var r,n,i,o,s,a,u,h,l,c,d;if(n=this.colors,l=null,r=this.hasAlphaChannel,this.palette.length&&(l=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),n=4,r=!0),h=(i=t.data||t).length,s=l||e,o=a=0,1===n)for(;o<h;)u=l?4*e[o/4]:a,c=s[u++],i[o++]=c,i[o++]=c,i[o++]=c,i[o++]=r?s[u++]:255,a=u;else for(;o<h;)u=l?4*e[o/4]:a,i[o++]=s[u++],i[o++]=s[u++],i[o++]=s[u++],i[o++]=r?s[u++]:255,a=u},i.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};try{r=J.document.createElement("canvas"),n=r.getContext("2d")}catch(t){return-1}return h=function(t){var e;return n.width=t.width,n.height=t.height,n.clearRect(0,0,t.width,t.height),n.putImageData(t,0,0),(e=new Image).src=r.toDataURL(),e},i.prototype.decodeFrames=function(t){var e,r,n,i,o,s,a,u;if(this.animation){for(u=[],r=o=0,s=(a=this.animation.frames).length;o<s;r=++o)e=a[r],n=t.createImageData(e.width,e.height),i=this.decodePixels(new Uint8Array(e.data)),this.copyToImageData(n,i),e.imageData=n,u.push(e.image=h(n));return u}},i.prototype.renderFrame=function(t,e){var r,n,i;return r=(n=this.animation.frames)[e],i=n[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?t.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&t.putImageData(i.imageData,i.xOffset,i.yOffset),0===r.blendOp&&t.clearRect(r.xOffset,r.yOffset,r.width,r.height),t.drawImage(r.image,r.xOffset,r.yOffset)},i.prototype.animate=function(r){var n,i,o,s,a,t,u=this;return i=0,t=this.animation,s=t.numFrames,o=t.frames,a=t.numPlays,(n=function(){var t,e;if(t=i++%s,e=o[t],u.renderFrame(r,t),1<s&&i/s<a)return u.animation._timeout=setTimeout(n,e.delay)})()},i.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},i.prototype.render=function(t){var e,r;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(r=e.createImageData(this.width,this.height),this.copyToImageData(r,this.decodePixels()),e.putImageData(r,0,0))},i}(),J.PNG=Q;var $,tt,et,rt,nt,it,ot=function(){function t(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return t.prototype={ensureBuffer:function(t){var e=this.buffer,r=e?e.byteLength:0;if(t<r)return e;for(var n=512;n<t;)n<<=1;for(var i=new Uint8Array(n),o=0;o<r;++o)i[o]=e[o];return this.buffer=i},getByte:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(t){var e=this.pos;if(t){for(this.ensureBuffer(e+t),n=e+t;!this.eof&&this.bufferLength<n;)this.readBlock();var r=this.bufferLength;r<n&&(n=r)}else{for(;!this.eof;)this.readBlock();var n=this.bufferLength}return this.pos=n,this.buffer.subarray(e,n)},lookChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(t,e,r){for(var n=t+e;this.bufferLength<=n&&!this.eof;)this.readBlock();return new Stream(this.buffer,t,e,r)},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=0}},t}(),st=function(){function A(t){throw new Error(t)}function t(t){var e=0,r=t[e++],n=t[e++];-1!=r&&-1!=n||A("Invalid header in flate stream"),8!=(15&r)&&A("Unknown compression method in flate stream"),((r<<8)+n)%31!=0&&A("Bad FCHECK in flate stream"),32&n&&A("FDICT bit set in flate stream"),this.bytes=t,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,ot.call(this)}if("undefined"!=typeof Uint32Array){var M=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),I=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),R=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),k=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],D=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return(t.prototype=Object.create(ot.prototype)).getBits=function(t){for(var e,r=this.codeSize,n=this.codeBuf,i=this.bytes,o=this.bytesPos;r<t;)void 0===(e=i[o++])&&A("Bad encoding in flate stream"),n|=e<<r,r+=8;return e=n&(1<<t)-1,this.codeBuf=n>>t,this.codeSize=r-=t,this.bytesPos=o,e},t.prototype.getCode=function(t){for(var e=t[0],r=t[1],n=this.codeSize,i=this.codeBuf,o=this.bytes,s=this.bytesPos;n<r;){var a;void 0===(a=o[s++])&&A("Bad encoding in flate stream"),i|=a<<n,n+=8}var u=e[i&(1<<r)-1],h=u>>16,l=65535&u;return(0==n||n<h||0==h)&&A("Bad encoding in flate stream"),this.codeBuf=i>>h,this.codeSize=n-h,this.bytesPos=s,l},t.prototype.generateHuffmanTable=function(t){for(var e=t.length,r=0,n=0;n<e;++n)t[n]>r&&(r=t[n]);for(var i=1<<r,o=new Uint32Array(i),s=1,a=0,u=2;s<=r;++s,a<<=1,u<<=1)for(var h=0;h<e;++h)if(t[h]==s){var l=0,c=a;for(n=0;n<s;++n)l=l<<1|1&c,c>>=1;for(n=l;n<i;n+=u)o[n]=s<<16|h;++a}return[o,r]},t.prototype.readBlock=function(){function t(t,e,r,n,i){for(var o=t.getBits(r)+n;0<o--;)e[u++]=i}var e=this.getBits(3);if(1&e&&(this.eof=!0),0!=(e>>=1)){var r,n;if(1==e)r=k,n=D;else if(2==e){for(var i=this.getBits(5)+257,o=this.getBits(5)+1,s=this.getBits(4)+4,a=Array(M.length),u=0;u<s;)a[M[u++]]=this.getBits(3);for(var h=this.generateHuffmanTable(a),l=0,c=(u=0,i+o),d=new Array(c);u<c;){var f=this.getCode(h);16==f?t(this,d,2,3,l):17==f?t(this,d,3,3,l=0):18==f?t(this,d,7,11,l=0):d[u++]=l=f}r=this.generateHuffmanTable(d.slice(0,i)),n=this.generateHuffmanTable(d.slice(i,c))}else A("Unknown block type in flate stream");for(var p=(C=this.buffer)?C.length:0,m=this.bufferLength;;){var g=this.getCode(r);if(g<256)p<=m+1&&(p=(C=this.ensureBuffer(m+1)).length),C[m++]=g;else{if(256==g)return void(this.bufferLength=m);var v=(g=I[g-=257])>>16;0<v&&(v=this.getBits(v)),l=(65535&g)+v,g=this.getCode(n),0<(v=(g=R[g])>>16)&&(v=this.getBits(v));var y=(65535&g)+v;p<=m+l&&(p=(C=this.ensureBuffer(m+l)).length);for(var b=0;b<l;++b,++m)C[m]=C[m-y]}}}else{var x,w=this.bytes,_=this.bytesPos;void 0===(x=w[_++])&&A("Bad block header in flate stream");var T=x;void 0===(x=w[_++])&&A("Bad block header in flate stream"),T|=x<<8,void 0===(x=w[_++])&&A("Bad block header in flate stream");var E=x;void 0===(x=w[_++])&&A("Bad block header in flate stream"),(E|=x<<8)!=(65535&~T)&&A("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var S=this.bufferLength,C=this.ensureBuffer(S+T),O=S+T;this.bufferLength=O;for(var P=S;P<O;++P){if(void 0===(x=w[_++])){this.eof=!0;break}C[P]=x}this.bytesPos=_}},t}}();return $="undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0,it="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",void 0===$.btoa&&($.btoa=function(t){var e,r,n,i,o,s=0,a=0,u="",h=[];if(!t)return t;for(;e=(o=t.charCodeAt(s++)<<16|t.charCodeAt(s++)<<8|t.charCodeAt(s++))>>18&63,r=o>>12&63,n=o>>6&63,i=63&o,h[a++]=it.charAt(e)+it.charAt(r)+it.charAt(n)+it.charAt(i),s<t.length;);u=h.join("");var l=t.length%3;return(l?u.slice(0,l-3):u)+"===".slice(l||3)}),void 0===$.atob&&($.atob=function(t){var e,r,n,i,o,s,a=0,u=0,h=[];if(!t)return t;for(t+="";e=(s=it.indexOf(t.charAt(a++))<<18|it.indexOf(t.charAt(a++))<<12|(i=it.indexOf(t.charAt(a++)))<<6|(o=it.indexOf(t.charAt(a++))))>>16&255,r=s>>8&255,n=255&s,h[u++]=64==i?String.fromCharCode(e):64==o?String.fromCharCode(e,r):String.fromCharCode(e,r,n),a<t.length;);return h.join("")}),Array.prototype.map||(Array.prototype.map=function(t){if(null==this||"function"!=typeof t)throw new TypeError;for(var e=Object(this),r=e.length>>>0,n=new Array(r),i=1<arguments.length?arguments[1]:void 0,o=0;o<r;o++)o in e&&(n[o]=t.call(i,e[o],o,e));return n}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){if(null==this||"function"!=typeof t)throw new TypeError;for(var r=Object(this),n=r.length>>>0,i=0;i<n;i++)i in r&&t.call(e,r[i],i,r)}),Object.keys||(Object.keys=(tt=Object.prototype.hasOwnProperty,et=!{toString:null}.propertyIsEnumerable("toString"),nt=(rt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(t){if("object"!=typeof t&&("function"!=typeof t||null===t))throw new TypeError;var e,r,n=[];for(e in t)tt.call(t,e)&&n.push(e);if(et)for(r=0;r<nt;r++)tt.call(t,rt[r])&&n.push(rt[r]);return n})),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")}),f},"object"==typeof ht&&void 0!==pt?pt.exports=e():"function"==typeof define&&define.amd?define(e):t.jspdf=e()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){return t._head?(t._tail._next=e)._prev=t._tail:t._head=e,(t._tail=e)._owner=t,e}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),s=function(){function n(t,e,r){void 0===e&&(e=!1),i(this,n),this._fn=t,this._once=e,this._thisArg=r,this._next=this._prev=this._owner=null}return o(n,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),n}(),a=function(){function t(){i(this,t),this._head=this._tail=void 0}return o(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var r=[];e;)r.push(e),e=e._next;return r}},{key:"has",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return n(this,new s(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return n(this,new s(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=s,r.default=a,e.exports=r.default},{}],26:[function(t,e,r){"use strict";var u=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,n,i=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),o=1;o<arguments.length;o++){for(var s in r=Object(arguments[o]))h.call(r,s)&&(i[s]=r[s]);if(u){n=u(r);for(var a=0;a<n.length;a++)l.call(r,n[a])&&(i[n[a]]=r[n[a]])}}return i}},{}],27:[function(t,e,r){"use strict";e.exports=function(t,e){e=e||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[e.strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(t,e,r){e&&(i[n.q.name][e]=r)}),i}},{}],28:[function(t,e,h){(function(i){function o(t,e){for(var r=0,n=t.length-1;0<=n;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function s(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(t){return e.exec(t).slice(1)};h.resolve=function(){for(var t="",e=!1,r=arguments.length-1;-1<=r&&!e;r--){var n=0<=r?arguments[r]:i.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(t=n+"/"+t,e="/"===n.charAt(0))}return(e?"/":"")+(t=o(s(t.split("/"),function(t){return!!t}),!e).join("/"))||"."},h.normalize=function(t){var e=h.isAbsolute(t),r="/"===n(t,-1);return(t=o(s(t.split("/"),function(t){return!!t}),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t},h.isAbsolute=function(t){return"/"===t.charAt(0)},h.join=function(){var t=Array.prototype.slice.call(arguments,0);return h.normalize(s(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},h.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;0<=r&&""===t[r];r--);return r<e?[]:t.slice(e,r-e+1)}t=h.resolve(t).substr(1),e=h.resolve(e).substr(1);for(var n=r(t.split("/")),i=r(e.split("/")),o=Math.min(n.length,i.length),s=o,a=0;a<o;a++)if(n[a]!==i[a]){s=a;break}var u=[];for(a=s;a<n.length;a++)u.push("..");return(u=u.concat(i.slice(s))).join("/")},h.sep="/",h.delimiter=":",h.dirname=function(t){var e=a(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},h.basename=function(t,e){var r=a(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},h.extname=function(t){return a(t)[3]};var n="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,t("_process"))},{_process:196}],29:[function(t,e,r){var i=new ArrayBuffer(0),o=function(t,e,r,n){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=n||t.STATIC_DRAW,this.data=i,r&&this.upload(r),this._updateID=0};o.prototype.upload=function(t,e,r){r||this.bind();var n=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?n.bufferSubData(this.type,e,t):n.bufferData(this.type,t,this.drawType),this.data=t},o.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},o.createVertexBuffer=function(t,e,r){return new o(t,t.ARRAY_BUFFER,e,r)},o.createIndexBuffer=function(t,e,r){return new o(t,t.ELEMENT_ARRAY_BUFFER,e,r)},o.create=function(t,e,r,n){return new o(t,e,r,n)},o.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=o},{}],30:[function(t,e,r){var s=t("./GLTexture"),a=function(t,e,r){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=r||100};a.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new s(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},a.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},a.prototype.clear=function(t,e,r,n){this.bind();var i=this.gl;i.clearColor(t,e,r,n),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)},a.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},a.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},a.prototype.resize=function(t,e){var r=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t,e))},a.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},a.createRGBA=function(t,e,r,n){var i=s.fromData(t,null,e,r);i.enableNearestScaling(),i.enableWrapClamp();var o=new a(t,e,r);return o.enableTexture(i),o.unbind(),o},a.createFloat32=function(t,e,r,n){var i=new s.fromData(t,n,e,r);i.enableNearestScaling(),i.enableWrapClamp();var o=new a(t,e,r);return o.enableTexture(i),o.unbind(),o},e.exports=a},{"./GLTexture":32}],31:[function(t,e,r){var o=t("./shader/compileProgram"),s=t("./shader/extractAttributes"),a=t("./shader/extractUniforms"),u=t("./shader/setPrecision"),h=t("./shader/generateUniformAccessObject"),n=function(t,e,r,n,i){this.gl=t,n&&(e=u(e,n),r=u(r,n)),this.program=o(t,e,r,i),this.attributes=s(t,this.program),this.uniformData=a(t,this.program),this.uniforms=h(t,this.uniformData)};n.prototype.bind=function(){return this.gl.useProgram(this.program),this},n.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},e.exports=n},{"./shader/compileProgram":37,"./shader/extractAttributes":39,"./shader/extractUniforms":40,"./shader/generateUniformAccessObject":41,"./shader/setPrecision":45}],32:[function(t,e,r){var o=function(t,e,r,n,i){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=r||-1,this.format=n||t.RGBA,this.type=i||t.UNSIGNED_BYTE},i=!(o.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var r=t.videoWidth||t.width,n=t.videoHeight||t.height;n!==this.height||r!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=r,this.height=n});o.prototype.uploadData=function(t,e,r){this.bind();var n=this.gl;if(t instanceof Float32Array){if(!i){if(!n.getExtension("OES_texture_float"))throw new Error("floating point textures not available");i=!0}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||r!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,e,r,0,this.format,this.type,t||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e,r,this.format,this.type,t||null),this.width=e,this.height=r},o.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},o.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},o.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},o.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},o.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},o.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},o.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},o.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},o.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},o.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},o.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},o.fromSource=function(t,e,r){var n=new o(t);return n.premultiplyAlpha=r||!1,n.upload(e),n},o.fromData=function(t,e,r,n){var i=new o(t);return i.uploadData(e,r,n),i},e.exports=o},{}],33:[function(t,e,r){function n(t,e){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var i=t("./setVertexAttribArrays");n.prototype.constructor=n,(e.exports=n).FORCE_NATIVE=!1,n.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var t=this.gl,e=null,r=0;r<this.attributes.length;r++){var n=this.attributes[r];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),t.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return i(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},n.prototype.addAttribute=function(t,e,r,n,i,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:r||this.gl.FLOAT,normalized:n||!1,stride:i||0,start:o||0}),this.dirty=!0,this},n.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(t,e,r){var n=this.gl;return this.indexBuffer?n.drawElements(t,e||this.indexBuffer.data.length,n.UNSIGNED_SHORT,2*(r||0)):n.drawArrays(t,r,e||this.getSize()),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},n.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},{"./setVertexAttribArrays":36}],34:[function(t,e,r){e.exports=function(t,e){var r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!r)throw new Error("This browser does not support webGL. Try using the canvas renderer");return r}},{}],35:[function(t,e,r){var n={createContext:t("./createContext"),setVertexAttribArrays:t("./setVertexAttribArrays"),GLBuffer:t("./GLBuffer"),GLFramebuffer:t("./GLFramebuffer"),GLShader:t("./GLShader"),GLTexture:t("./GLTexture"),VertexArrayObject:t("./VertexArrayObject"),shader:t("./shader")};void 0!==e&&e.exports&&(e.exports=n),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=n)},{"./GLBuffer":29,"./GLFramebuffer":30,"./GLShader":31,"./GLTexture":32,"./VertexArrayObject":33,"./createContext":34,"./setVertexAttribArrays":36,"./shader":42}],36:[function(t,e,r){e.exports=function(t,e,r){var n;if(r){var i=r.tempAttribState,o=r.attribState;for(n=0;n<i.length;n++)i[n]=!1;for(n=0;n<e.length;n++)i[e[n].attribute.location]=!0;for(n=0;n<o.length;n++)o[n]!==i[n]&&(o[n]=i[n],r.attribState[n]?t.enableVertexAttribArray(n):t.disableVertexAttribArray(n))}else for(n=0;n<e.length;n++){var s=e[n];t.enableVertexAttribArray(s.attribute.location)}}},{}],37:[function(t,e,r){var u=function(t,e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:null};e.exports=function(t,e,r,n){var i=u(t,t.VERTEX_SHADER,e),o=u(t,t.FRAGMENT_SHADER,r),s=t.createProgram();if(t.attachShader(s,i),t.attachShader(s,o),n)for(var a in n)t.bindAttribLocation(s,n[a],a);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(t.getProgramInfoLog(s),t.deleteProgram(s),s=null),t.deleteShader(i),t.deleteShader(o),s}},{}],38:[function(t,e,r){var n=function(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e};e.exports=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return n(2*e);case"bvec3":return n(3*e);case"bvec4":return n(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},{}],39:[function(t,e,r){var a=t("./mapType"),u=t("./mapSize"),h=function(t,e,r,n){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,r||0,n||0)};e.exports=function(t,e){for(var r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var o=t.getActiveAttrib(e,i),s=a(t,o.type);r[o.name]={type:s,size:u(s),location:t.getAttribLocation(e,o.name),pointer:h}}return r}},{"./mapSize":43,"./mapType":44}],40:[function(t,e,r){var u=t("./mapType"),h=t("./defaultValue");e.exports=function(t,e){for(var r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<n;i++){var o=t.getActiveUniform(e,i),s=o.name.replace(/\[.*?\]/,""),a=u(t,o.type);r[s]={type:a,size:o.size,location:t.getUniformLocation(e,s),value:h(a,o.size)}}return r}},{"./defaultValue":38,"./mapType":44}],41:[function(t,e,r){function l(r,n){return function(t){this.data[r].value=t;var e=this.data[r].location;1===n.size?i[n.type](this.gl,e,t):o[n.type](this.gl,e,t)}}function c(t,e){for(var r=e,n=0;n<t.length-1;n++){var i=r[t[n]]||{data:{}};r[t[n]]=i,r=i}return r}var d=function(t){return function(){return this.data[t].value}},i={float:function(t,e,r){t.uniform1f(e,r)},vec2:function(t,e,r){t.uniform2f(e,r[0],r[1])},vec3:function(t,e,r){t.uniform3f(e,r[0],r[1],r[2])},vec4:function(t,e,r){t.uniform4f(e,r[0],r[1],r[2],r[3])},int:function(t,e,r){t.uniform1i(e,r)},ivec2:function(t,e,r){t.uniform2i(e,r[0],r[1])},ivec3:function(t,e,r){t.uniform3i(e,r[0],r[1],r[2])},ivec4:function(t,e,r){t.uniform4i(e,r[0],r[1],r[2],r[3])},bool:function(t,e,r){t.uniform1i(e,r)},bvec2:function(t,e,r){t.uniform2i(e,r[0],r[1])},bvec3:function(t,e,r){t.uniform3i(e,r[0],r[1],r[2])},bvec4:function(t,e,r){t.uniform4i(e,r[0],r[1],r[2],r[3])},mat2:function(t,e,r){t.uniformMatrix2fv(e,!1,r)},mat3:function(t,e,r){t.uniformMatrix3fv(e,!1,r)},mat4:function(t,e,r){t.uniformMatrix4fv(e,!1,r)},sampler2D:function(t,e,r){t.uniform1i(e,r)}},o={float:function(t,e,r){t.uniform1fv(e,r)},vec2:function(t,e,r){t.uniform2fv(e,r)},vec3:function(t,e,r){t.uniform3fv(e,r)},vec4:function(t,e,r){t.uniform4fv(e,r)},int:function(t,e,r){t.uniform1iv(e,r)},ivec2:function(t,e,r){t.uniform2iv(e,r)},ivec3:function(t,e,r){t.uniform3iv(e,r)},ivec4:function(t,e,r){t.uniform4iv(e,r)},bool:function(t,e,r){t.uniform1iv(e,r)},bvec2:function(t,e,r){t.uniform2iv(e,r)},bvec3:function(t,e,r){t.uniform3iv(e,r)},bvec4:function(t,e,r){t.uniform4iv(e,r)},sampler2D:function(t,e,r){t.uniform1iv(e,r)}};e.exports=function(t,e){var r={data:{}};r.gl=t;for(var n=Object.keys(e),i=0;i<n.length;i++){var o=n[i],s=o.split("."),a=s[s.length-1],u=c(s,r),h=e[o];u.data[a]=h,u.gl=t,Object.defineProperty(u,a,{get:d(a),set:l(a,h)})}return r}},{}],42:[function(t,e,r){e.exports={compileProgram:t("./compileProgram"),defaultValue:t("./defaultValue"),extractAttributes:t("./extractAttributes"),extractUniforms:t("./extractUniforms"),generateUniformAccessObject:t("./generateUniformAccessObject"),setPrecision:t("./setPrecision"),mapSize:t("./mapSize"),mapType:t("./mapType")}},{"./compileProgram":37,"./defaultValue":38,"./extractAttributes":39,"./extractUniforms":40,"./generateUniformAccessObject":41,"./mapSize":43,"./mapType":44,"./setPrecision":45}],43:[function(t,e,r){var n={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=function(t){return n[t]}},{}],44:[function(t,e,r){var o=null,s={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=function(t,e){if(!o){var r=Object.keys(s);o={};for(var n=0;n<r.length;++n){var i=r[n];o[t[i]]=s[i]}}return o[e]}},{}],45:[function(t,e,r){e.exports=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t}},{}],46:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),i=n(t("ismobilejs")),o=n(t("./accessibleTarget"));u.utils.mixins.delayMixin(u.DisplayObject.prototype,o.default);var s=function(){function r(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,r),!i.default.tablet&&!i.default.phone||navigator.isCocoonJS||this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return r.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},r.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},r.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},r.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,r=e.length-1;0<=r;r--)this.updateAccessibleObjects(e[r])}},r.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,r=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var i=0;i<this.children.length;i++){var o=this.children[i];if(o.renderId!==this.renderId)o._accessibleActive=!1,u.utils.removeItems(this.children,i,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,i--,0===this.children.length&&this.deactivate();else{n=o._accessibleDiv;var s=o.hitArea,a=o.worldTransform;o.hitArea?(n.style.left=(a.tx+s.x*a.a)*e+"px",n.style.top=(a.ty+s.y*a.d)*r+"px",n.style.width=s.width*a.a*e+"px",n.style.height=s.height*a.d*r+"px"):(s=o.getBounds(),this.capHitArea(s),n.style.left=s.x*e+"px",n.style.top=s.y*r+"px",n.style.width=s.width*e+"px",n.style.height=s.height*r+"px")}}this.renderId++}},r.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},r.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleTitle||t.accessibleHint||(e.title="displayObject "+this.tabIndex),t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,(t._accessibleDiv=e).displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},r.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},r.prototype._onFocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},r.prototype._onFocusOut=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},r.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},r.prototype._onMouseMove=function(){this.deactivate()},r.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},r}();r.default=s,u.WebGLRenderer.registerPlugin("accessibility",s),u.CanvasRenderer.registerPlugin("accessibility",s)},{"../core":71,"./accessibleTarget":47,ismobilejs:23}],47:[function(t,e,r){"use strict";r.__esModule=!0,r.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],48:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./accessibleTarget");Object.defineProperty(r,"accessibleTarget",{enumerable:!0,get:function(){return n(i).default}});var o=t("./AccessibilityManager");Object.defineProperty(r,"AccessibilityManager",{enumerable:!0,get:function(){return n(o).default}})},{"./AccessibilityManager":46,"./accessibleTarget":47}],49:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),s=t("./autoDetectRenderer"),a=n(t("./display/Container")),u=t("./ticker"),h=n(t("./settings")),l=t("./const"),o=function(){function o(t,e,r,n,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,o),"number"==typeof t&&(t=Object.assign({width:t,height:e||h.default.RENDER_OPTIONS.height,forceCanvas:!!n,sharedTicker:!!i},r)),this._options=t=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},t),this.renderer=(0,s.autoDetectRenderer)(t),this.stage=new a.default,this._ticker=null,this.ticker=t.sharedTicker?u.shared:new u.Ticker,t.autoStart&&this.start()}return o.prototype.render=function(){this.renderer.render(this.stage)},o.prototype.stop=function(){this._ticker.stop()},o.prototype.start=function(){this._ticker.start()},o.prototype.destroy=function(t){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}this.stage.destroy(),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},i(o,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,l.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),o}();r.default=o},{"./autoDetectRenderer":51,"./const":52,"./display/Container":54,"./settings":107,"./ticker":127}],50:[function(t,e,r){"use strict";function a(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var r=t.slice(0);return r.unshift("precision "+e+" float;"),r}}else if("precision"!==t.trim().substring(0,9))return"precision "+e+" float;\n"+t;return t}r.__esModule=!0;var n,i=t("pixi-gl-core"),o=t("./settings"),u=(n=o)&&n.__esModule?n:{default:n},s=function(o){function s(t,e,r,n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this,t,a(e,i||u.default.PRECISION_VERTEX),a(r,i||u.default.PRECISION_FRAGMENT),void 0,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,o),s}(i.GLShader);r.default=s},{"./settings":107,"pixi-gl-core":35}],51:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.autoDetectRenderer=function(t,e,r,n){var i=t&&t.forceCanvas;return void 0!==n&&(i=n),!i&&o.isWebGLSupported()?new a.default(t,e,r):new s.default(t,e,r)};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("./utils")),s=n(t("./renderers/canvas/CanvasRenderer")),a=n(t("./renderers/webgl/WebGLRenderer"))},{"./renderers/canvas/CanvasRenderer":83,"./renderers/webgl/WebGLRenderer":90,"./utils":131}],52:[function(t,e,r){"use strict";r.__esModule=!0;r.VERSION="4.7.3",r.PI_2=2*Math.PI,r.RAD_TO_DEG=180/Math.PI,r.DEG_TO_RAD=Math.PI/180,r.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},r.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},r.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},r.SCALE_MODES={LINEAR:0,NEAREST:1},r.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},r.GC_MODES={AUTO:0,MANUAL:1},r.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,r.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,r.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,r.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},r.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},r.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},r.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},r.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],53:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../math"),i=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?n.Rectangle.EMPTY:((t=t||new n.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,r=this.minY,n=this.maxX,i=this.maxY,o=t[0],s=t[1];e=o<e?o:e,r=s<r?s:r,n=n<o?o:n,i=i<s?s:i,e=(o=t[2])<e?o:e,r=(s=t[3])<r?s:r,n=n<o?o:n,i=i<s?s:i,e=(o=t[4])<e?o:e,r=(s=t[5])<r?s:r,n=n<o?o:n,i=i<s?s:i,e=(o=t[6])<e?o:e,r=(s=t[7])<r?s:r,n=n<o?o:n,i=i<s?s:i,this.minX=e,this.minY=r,this.maxX=n,this.maxY=i},t.prototype.addFrame=function(t,e,r,n,i){var o=t.worldTransform,s=o.a,a=o.b,u=o.c,h=o.d,l=o.tx,c=o.ty,d=this.minX,f=this.minY,p=this.maxX,m=this.maxY,g=s*e+u*r+l,v=a*e+h*r+c;d=g<d?g:d,f=v<f?v:f,p=p<g?g:p,m=m<v?v:m,d=(g=s*n+u*r+l)<d?g:d,f=(v=a*n+h*r+c)<f?v:f,p=p<g?g:p,m=m<v?v:m,d=(g=s*e+u*i+l)<d?g:d,f=(v=a*e+h*i+c)<f?v:f,p=p<g?g:p,m=m<v?v:m,d=(g=s*n+u*i+l)<d?g:d,f=(v=a*n+h*i+c)<f?v:f,p=p<g?g:p,m=m<v?v:m,this.minX=d,this.minY=f,this.maxX=p,this.maxY=m},t.prototype.addVertices=function(t,e,r,n){for(var i=t.worldTransform,o=i.a,s=i.b,a=i.c,u=i.d,h=i.tx,l=i.ty,c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,m=r;m<n;m+=2){var g=e[m],v=e[m+1],y=o*g+a*v+h,b=u*v+s*g+l;c=y<c?y:c,d=b<d?b:d,f=f<y?y:f,p=p<b?b:p}this.minX=c,this.minY=d,this.maxX=f,this.maxY=p},t.prototype.addBounds=function(t){var e=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>i?t.maxY:i},t.prototype.addBoundsMask=function(t,e){var r=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=i&&n<=o){var s=this.minX,a=this.minY,u=this.maxX,h=this.maxY;this.minX=r<s?r:s,this.minY=n<a?n:a,this.maxX=u<i?i:u,this.maxY=h<o?o:h}},t.prototype.addBoundsArea=function(t,e){var r=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=i&&n<=o){var s=this.minX,a=this.minY,u=this.maxX,h=this.maxY;this.minX=r<s?r:s,this.minY=n<a?n:a,this.maxX=u<i?i:u,this.maxY=h<o?o:h}},t}();r.default=i},{"../math":76}],54:[function(t,e,r){"use strict";r.__esModule=!0;var n,o=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),s=t("../utils"),i=t("./DisplayObject"),a=function(i){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this));return t.children=[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(1<e)for(var r=0;r<e;r++)this.addChild(arguments[r]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t,this.onChildrenChange(r<n?r:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);(0,s.removeItems)(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(1<e)for(var r=0;r<e;r++)this.removeChild(arguments[r]);else{var n=this.children.indexOf(t);if(-1===n)return null;t.parent=null,t.transform._parentID=-1,(0,s.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,s.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],r=t,n="number"==typeof e?e:this.children.length,i=n-r,o=void 0;if(0<i&&i<=n){o=this.children.splice(r,i);for(var s=0;s<o.length;++s)o[s].parent=null,o[s].transform&&(o[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<o.length;++a)o[a].emit("removed",this);return o}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var n=this._enabledFilters.length=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}r&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var i=0,o=this.children.length;i<o;i++)this.children[i].renderWebGL(t);t.flush(),r&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(t){i.prototype.destroy.call(this);var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var n=0;n<r.length;++n)r[n].destroy(t)},o(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),e}(((n=i)&&n.__esModule?n:{default:n}).default);(r.default=a).prototype.containerUpdateTransform=a.prototype.updateTransform},{"../utils":131,"./DisplayObject":55}],55:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),o=n(t("eventemitter3")),s=t("../const"),a=n(t("../settings")),u=n(t("./TransformStatic")),h=n(t("./Transform")),l=n(t("./Bounds")),c=t("../math"),d=function(r){function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,r.call(this)),e=a.default.TRANSFORM_MODE===s.TRANSFORM_MODE.STATIC?u.default:h.default;return t.tempDisplayObjectParent=null,t.transform=new e,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t.filterArea=null,t._filters=null,t._enabledFilters=null,t._bounds=new l.default,t._boundsID=0,t._lastBoundsID=-1,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r),n.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},n.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},n.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new c.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},n.prototype.getLocalBounds=function(t){var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new c.Rectangle),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=r,this.transform=e,n},n.prototype.toGlobal=function(t,e){return 2<arguments.length&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},n.prototype.toLocal=function(t,e,r,n){return e&&(t=e.toGlobal(t,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},n.prototype.renderWebGL=function(t){},n.prototype.renderCanvas=function(t){},n.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},n.prototype.setTransform=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,s=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,a=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,u=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=u,this},n.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},i(n,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new n),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),n}(o.default);(r.default=d).prototype.displayObjectUpdateTransform=d.prototype.updateTransform},{"../const":52,"../math":76,"../settings":107,"./Bounds":53,"./Transform":56,"./TransformStatic":58,eventemitter3:21}],56:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),o=t("../math"),s=t("./TransformBase"),a=function(e){function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,e.call(this));return t.position=new o.Point(0,0),t.scale=new o.Point(1,1),t.skew=new o.ObservablePoint(t.updateSkew,t,0,0),t.pivot=new o.Point(0,0),t._rotation=0,t._cx=1,t._sx=0,t._cy=0,t._sy=1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,e),r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},r.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},r.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._worldID++},r.prototype.setFromMatrix=function(t){t.decompose(this)},i(r,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),r}(((n=s)&&n.__esModule?n:{default:n}).default);r.default=a},{"../math":76,"./TransformBase":57}],57:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("../math"),i=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.worldTransform=new n.Matrix,this.localTransform=new n.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,r=this.worldTransform,n=this.localTransform;r.a=n.a*e.a+n.b*e.c,r.b=n.a*e.b+n.b*e.d,r.c=n.c*e.a+n.d*e.c,r.d=n.c*e.b+n.d*e.d,r.tx=n.tx*e.a+n.ty*e.c+e.tx,r.ty=n.tx*e.b+n.ty*e.d+e.ty,this._worldID++},t}();(r.default=i).prototype.updateWorldTransform=i.prototype.updateTransform,i.IDENTITY=new i},{"../math":76}],58:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),o=t("../math"),s=t("./TransformBase"),a=function(e){function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,e.call(this));return t.position=new o.ObservablePoint(t.onChange,t,0,0),t.scale=new o.ObservablePoint(t.onChange,t,1,1),t.pivot=new o.ObservablePoint(t.onChange,t,0,0),t.skew=new o.ObservablePoint(t.updateSkew,t,0,0),t._rotation=0,t._cx=1,t._sx=0,t._cy=0,t._sy=1,t._localID=0,t._currentLocalID=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,e),r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},i(r,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),r}(((n=s)&&n.__esModule?n:{default:n}).default);r.default=a},{"../math":76,"./TransformBase":57}],59:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=n(t("../display/Container")),o=n(t("../textures/RenderTexture")),s=n(t("../textures/Texture")),a=n(t("./GraphicsData")),u=n(t("../sprites/Sprite")),h=t("../math"),l=t("../utils"),E=t("../const"),c=n(t("../display/Bounds")),d=n(t("./utils/bezierCurveTo")),f=n(t("../renderers/canvas/CanvasRenderer")),p=void 0,m=new h.Matrix,g=new h.Point,v=new Float32Array(4),y=new Float32Array(4),b=function(i){function r(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this));return e.fillAlpha=1,e.lineWidth=0,e.nativeLines=t,e.lineColor=0,e.graphicsData=[],e.tint=16777215,e._prevTint=16777215,e.blendMode=E.BLEND_MODES.NORMAL,e.currentPath=null,e._webGL={},e.isMask=!1,e.boundsPadding=0,e._localBounds=new c.default,e.dirty=0,e.fastRectDirty=-1,e.clearDirty=0,e.boundsDirty=-1,e.cachedSpriteDirty=!1,e._spriteRect=null,e._fastRect=!1,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,i),r.prototype.clone=function(){var t=new r;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var e=0;e<this.graphicsData.length;++e)t.graphicsData.push(this.graphicsData[e].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},r.prototype.lineStyle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=r,this.currentPath)if(this.currentPath.shape.points.length){var n=new h.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},r.prototype.moveTo=function(t,e){var r=new h.Polygon([t,e]);return r.closed=!1,this.drawShape(r),this},r.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty++,this},r.prototype.quadraticCurveTo=function(t,e,r,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i=this.currentPath.shape.points,o=0,s=0;0===i.length&&this.moveTo(0,0);for(var a=i[i.length-2],u=i[i.length-1],h=1;h<=20;++h){var l=h/20;o=a+(t-a)*l,s=u+(e-u)*l,i.push(o+(t+(r-t)*l-o)*l,s+(e+(n-e)*l-s)*l)}return this.dirty++,this},r.prototype.bezierCurveTo=function(t,e,r,n,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,a=s[s.length-2],u=s[s.length-1];return s.length-=2,(0,d.default)(a,u,t,e,r,n,i,o,s),this.dirty++,this},r.prototype.arcTo=function(t,e,r,n,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1]-e,u=s-t,h=n-e,l=r-t,c=Math.abs(a*l-u*h);if(c<1e-8||0===i)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var d=a*a+u*u,f=h*h+l*l,p=a*h+u*l,m=i*Math.sqrt(d)/c,g=i*Math.sqrt(f)/c,v=m*p/d,y=g*p/f,b=m*l+g*u,x=m*h+g*a,w=u*(g+v),_=a*(g+v),T=l*(m+y),E=h*(m+y),S=Math.atan2(_-x,w-b),C=Math.atan2(E-x,T-b);this.arc(b+t,x+e,i,S,C,l*a<u*h)}return this.dirty++,this},r.prototype.arc=function(t,e,r,n,i){var o=5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(n===i)return this;!o&&i<=n?i+=E.PI_2:o&&n<=i&&(n+=E.PI_2);var s=i-n,a=40*Math.ceil(Math.abs(s)/E.PI_2);if(0===s)return this;var u=t+Math.cos(n)*r,h=e+Math.sin(n)*r,l=this.currentPath?this.currentPath.shape.points:null;l?l[l.length-2]===u&&l[l.length-1]===h||l.push(u,h):(this.moveTo(u,h),l=this.currentPath.shape.points);for(var c=s/(2*a),d=2*c,f=Math.cos(c),p=Math.sin(c),m=a-1,g=m%1/m,v=0;v<=m;++v){var y=c+n+d*(v+g*v),b=Math.cos(y),x=-Math.sin(y);l.push((f*b+p*x)*r+t,(f*-x+p*b)*r+e)}return this.dirty++,this},r.prototype.beginFill=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},r.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},r.prototype.drawRect=function(t,e,r,n){return this.drawShape(new h.Rectangle(t,e,r,n)),this},r.prototype.drawRoundedRect=function(t,e,r,n,i){return this.drawShape(new h.RoundedRectangle(t,e,r,n,i)),this},r.prototype.drawCircle=function(t,e,r){return this.drawShape(new h.Circle(t,e,r)),this},r.prototype.drawEllipse=function(t,e,r,n){return this.drawShape(new h.Ellipse(t,e,r,n)),this},r.prototype.drawPolygon=function(t){var e=t,r=!0;if(e instanceof h.Polygon&&(r=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var i=new h.Polygon(e);return i.closed=r,this.drawShape(i),this},r.prototype.drawStar=function(t,e,r,n,i){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;i=i||n/2;for(var s=-1*Math.PI/2+o,a=2*r,u=E.PI_2/a,h=[],l=0;l<a;l++){var c=l%2?i:n,d=l*u+s;h.push(t+c*Math.cos(d),e+c*Math.sin(d))}return this.drawPolygon(h)},r.prototype.clear=function(){return(this.lineWidth||this.filling||0<this.graphicsData.length)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},r.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===E.SHAPES.RECT&&!this.graphicsData[0].lineWidth},r.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},r.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new u.default(new s.default(s.default.WHITE)));var r=this._spriteRect;if(16777215===this.tint)r.tint=this.graphicsData[0].fillColor;else{var n=v,i=y;(0,l.hex2rgb)(this.graphicsData[0].fillColor,n),(0,l.hex2rgb)(this.tint,i),n[0]*=i[0],n[1]*=i[1],n[2]*=i[2],r.tint=(0,l.rgb2hex)(n)}r.alpha=this.graphicsData[0].fillAlpha,r.worldAlpha=this.worldAlpha*r.alpha,r.blendMode=this.blendMode,r._texture._frame.width=e.width,r._texture._frame.height=e.height,r.transform.worldTransform=this.transform.worldTransform,r.anchor.set(-e.x/e.width,-e.y/e.height),r._onAnchorUpdate(),r._renderWebGL(t)},r.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},r.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,g);for(var e=this.graphicsData,r=0;r<e.length;++r){var n=e[r];if(n.fill&&n.shape&&n.shape.contains(g.x,g.y)){if(n.holes)for(var i=0;i<n.holes.length;i++){if(n.holes[i].contains(g.x,g.y))return!1}return!0}}return!1},r.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,r=1/0,n=-1/0;if(this.graphicsData.length)for(var i=0,o=0,s=0,a=0,u=0,h=0;h<this.graphicsData.length;h++){var l=this.graphicsData[h],c=l.type,d=l.lineWidth;if(i=l.shape,c===E.SHAPES.RECT||c===E.SHAPES.RREC)o=i.x-d/2,s=i.y-d/2,t=o<t?o:t,e=e<o+(a=i.width+d)?o+a:e,r=s<r?s:r,n=n<s+(u=i.height+d)?s+u:n;else if(c===E.SHAPES.CIRC)o=i.x,s=i.y,t=o-(a=i.radius+d/2)<t?o-a:t,e=e<o+a?o+a:e,r=s-(u=i.radius+d/2)<r?s-u:r,n=n<s+u?s+u:n;else if(c===E.SHAPES.ELIP)o=i.x,s=i.y,t=o-(a=i.width+d/2)<t?o-a:t,e=e<o+a?o+a:e,r=s-(u=i.height+d/2)<r?s-u:r,n=n<s+u?s+u:n;else for(var f=i.points,p=0,m=0,g=0,v=0,y=0,b=0,x=0,w=0,_=0;_+2<f.length;_+=2)o=f[_],s=f[_+1],p=f[_+2],m=f[_+3],g=Math.abs(p-o),v=Math.abs(m-s),u=d,(a=Math.sqrt(g*g+v*v))<1e-9||(t=(x=(p+o)/2)-(y=(u/a*v+g)/2)<t?x-y:t,e=e<x+y?x+y:e,r=(w=(m+s)/2)-(b=(u/a*g+v)/2)<r?w-b:r,n=n<w+b?w+b:n)}else n=r=e=t=0;var T=this.boundsPadding;this._localBounds.minX=t-T,this._localBounds.maxX=e+T,this._localBounds.minY=r-T,this._localBounds.maxY=n+T},r.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new a.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t);return this.graphicsData.push(e),e.type===E.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty++,e},r.prototype.generateCanvasTexture=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=this.getLocalBounds(),n=o.default.create(r.width,r.height,t,e);p||(p=new f.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(m),m.invert(),m.tx-=r.x,m.ty-=r.y,p.render(this,n,!0,m);var i=s.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,t,"graphics");return i.baseTexture.resolution=e,i.baseTexture.update(),i},r.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},r.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},r.prototype.destroy=function(t){i.prototype.destroy.call(this,t);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();for(var r in this._webgl)for(var n=0;n<this._webgl[r].data.length;++n)this._webgl[r].data[n].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},r}(i.default);(r.default=b)._SPRITE_TEXTURE=null},{"../const":52,"../display/Bounds":53,"../display/Container":54,"../math":76,"../renderers/canvas/CanvasRenderer":83,"../sprites/Sprite":108,"../textures/RenderTexture":119,"../textures/Texture":121,"../utils":131,"./GraphicsData":60,"./utils/bezierCurveTo":62}],60:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function u(t,e,r,n,i,o,s,a){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,u),this.lineWidth=t,this.nativeLines=s,this.lineColor=e,this.lineAlpha=r,this._lineTint=e,this.fillColor=n,this.fillAlpha=i,this._fillTint=n,this.fill=o,this.holes=[],this.shape=a,this.type=a.type}return u.prototype.clone=function(){return new u(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},u.prototype.addHole=function(t){this.holes.push(t)},u.prototype.destroy=function(){this.shape=null,this.holes=null},u}();r.default=n},{}],61:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=t("../../renderers/canvas/CanvasRenderer"),o=(n=i)&&n.__esModule?n:{default:n},P=t("../../const"),s=function(){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),this.renderer=t}return e.prototype.render=function(t){var e=this.renderer,r=e.context,n=t.worldAlpha,i=t.transform.worldTransform,o=e.resolution;this._prevTint!==this.tint&&(this.dirty=!0),r.setTransform(i.a*o,i.b*o,i.c*o,i.d*o,i.tx*o,i.ty*o),t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1),e.setBlendMode(t.blendMode);for(var s=0;s<t.graphicsData.length;s++){var a=t.graphicsData[s],u=a.shape,h=a._fillTint,l=a._lineTint;if(r.lineWidth=a.lineWidth,a.type===P.SHAPES.POLY){r.beginPath(),this.renderPolygon(u.points,u.closed,r);for(var c=0;c<a.holes.length;c++)this.renderPolygon(a.holes[c].points,!0,r);a.fill&&(r.globalAlpha=a.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),a.lineWidth&&(r.globalAlpha=a.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.stroke())}else if(a.type===P.SHAPES.RECT)(a.fillColor||0===a.fillColor)&&(r.globalAlpha=a.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fillRect(u.x,u.y,u.width,u.height)),a.lineWidth&&(r.globalAlpha=a.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.strokeRect(u.x,u.y,u.width,u.height));else if(a.type===P.SHAPES.CIRC)r.beginPath(),r.arc(u.x,u.y,u.radius,0,2*Math.PI),r.closePath(),a.fill&&(r.globalAlpha=a.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),a.lineWidth&&(r.globalAlpha=a.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.stroke());else if(a.type===P.SHAPES.ELIP){var d=2*u.width,f=2*u.height,p=u.x-d/2,m=u.y-f/2;r.beginPath();var g=d/2*.5522848,v=f/2*.5522848,y=p+d,b=m+f,x=p+d/2,w=m+f/2;r.moveTo(p,w),r.bezierCurveTo(p,w-v,x-g,m,x,m),r.bezierCurveTo(x+g,m,y,w-v,y,w),r.bezierCurveTo(y,w+v,x+g,b,x,b),r.bezierCurveTo(x-g,b,p,w+v,p,w),r.closePath(),a.fill&&(r.globalAlpha=a.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),a.lineWidth&&(r.globalAlpha=a.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.stroke())}else if(a.type===P.SHAPES.RREC){var _=u.x,T=u.y,E=u.width,S=u.height,C=u.radius,O=Math.min(E,S)/2|0;C=O<C?O:C,r.beginPath(),r.moveTo(_,T+C),r.lineTo(_,T+S-C),r.quadraticCurveTo(_,T+S,_+C,T+S),r.lineTo(_+E-C,T+S),r.quadraticCurveTo(_+E,T+S,_+E,T+S-C),r.lineTo(_+E,T+C),r.quadraticCurveTo(_+E,T,_+E-C,T),r.lineTo(_+C,T),r.quadraticCurveTo(_,T,_,T+C),r.closePath(),(a.fillColor||0===a.fillColor)&&(r.globalAlpha=a.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),a.lineWidth&&(r.globalAlpha=a.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.stroke())}}},e.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,r=(t.tint>>8&255)/255,n=(255&t.tint)/255,i=0;i<t.graphicsData.length;++i){var o=t.graphicsData[i],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*n*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*n*255}},e.prototype.renderPolygon=function(t,e,r){r.moveTo(t[0],t[1]);for(var n=1;n<t.length/2;++n)r.lineTo(t[2*n],t[2*n+1]);e&&r.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();r.default=s,o.default.registerPlugin("graphics",s)},{"../../const":52,"../../renderers/canvas/CanvasRenderer":83}],62:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e,r,n,i,o,s,a){var u=8<arguments.length&&void 0!==arguments[8]?arguments[8]:[],h=0,l=0,c=0,d=0,f=0;u.push(t,e);for(var p=1,m=0;p<=20;++p)c=(l=(h=1-(m=p/20))*h)*h,f=(d=m*m)*m,u.push(c*t+3*l*m*r+3*h*d*i+f*s,c*e+3*l*m*n+3*h*d*o+f*a);return u}},{}],63:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var h=t("../../utils"),l=t("../../const"),i=n(t("../../renderers/webgl/utils/ObjectRenderer")),o=n(t("../../renderers/webgl/WebGLRenderer")),s=n(t("./WebGLGraphicsData")),a=n(t("./shaders/PrimitiveShader")),c=n(t("./utils/buildPoly")),d=n(t("./utils/buildRectangle")),f=n(t("./utils/buildRoundedRectangle")),p=n(t("./utils/buildCircle")),u=function(r){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,r.call(this,t));return e.graphicsDataPool=[],e.primitiveShader=null,e.gl=t.gl,e.CONTEXT_UID=0,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r),n.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new a.default(this.gl)},n.prototype.destroy=function(){i.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},n.prototype.render=function(t){var e=this.renderer,r=e.gl,n=void 0,i=t._webGL[this.CONTEXT_UID];i&&t.dirty===i.dirty||(this.updateGraphics(t),i=t._webGL[this.CONTEXT_UID]);var o=this.primitiveShader;e.bindShader(o),e.state.setBlendMode(t.blendMode);for(var s=0,a=i.data.length;s<a;s++){var u=(n=i.data[s]).shader;e.bindShader(u),u.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),u.uniforms.tint=(0,h.hex2rgb)(t.tint),u.uniforms.alpha=t.worldAlpha,e.bindVao(n.vao),n.nativeLines?r.drawArrays(r.LINES,0,n.points.length/6):n.vao.draw(r.TRIANGLE_STRIP,n.indices.length)}},n.prototype.updateGraphics=function(t){var e=this.renderer.gl,r=t._webGL[this.CONTEXT_UID];if(r||(r=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),r.dirty=t.dirty,t.clearDirty!==r.clearDirty){r.clearDirty=t.clearDirty;for(var n=0;n<r.data.length;n++)this.graphicsDataPool.push(r.data[n]);r.data.length=0,r.lastIndex=0}for(var i=void 0,o=void 0,s=r.lastIndex;s<t.graphicsData.length;s++){var a=t.graphicsData[s];i=this.getWebGLData(r,0),a.nativeLines&&a.lineWidth&&(o=this.getWebGLData(r,0,!0),r.lastIndex++),a.type===l.SHAPES.POLY&&(0,c.default)(a,i,o),a.type===l.SHAPES.RECT?(0,d.default)(a,i,o):a.type===l.SHAPES.CIRC||a.type===l.SHAPES.ELIP?(0,p.default)(a,i,o):a.type===l.SHAPES.RREC&&(0,f.default)(a,i,o),r.lastIndex++}this.renderer.bindVao(null);for(var u=0;u<r.data.length;u++)(i=r.data[u]).dirty&&i.upload()},n.prototype.getWebGLData=function(t,e,r){var n=t.data[t.data.length-1];return(!n||n.nativeLines!==r||32e4<n.points.length)&&((n=this.graphicsDataPool.pop()||new s.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=r,n.reset(e),t.data.push(n)),n.dirty=!0,n},n}(i.default);r.default=u,o.default.registerPlugin("graphics",u)},{"../../const":52,"../../renderers/webgl/WebGLRenderer":90,"../../renderers/webgl/utils/ObjectRenderer":100,"../../utils":131,"./WebGLGraphicsData":64,"./shaders/PrimitiveShader":65,"./utils/buildCircle":66,"./utils/buildPoly":68,"./utils/buildRectangle":69,"./utils/buildRoundedRectangle":70}],64:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=t("pixi-gl-core"),o=(n=i)&&n.__esModule?n:{default:n},s=function(){function n(t,e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=o.default.GLBuffer.createVertexBuffer(t),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(t),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=e,this.vao=new o.default.VertexArrayObject(t,r).addIndex(this.indexBuffer).addAttribute(this.buffer,e.attributes.aVertexPosition,t.FLOAT,!1,24,0).addAttribute(this.buffer,e.attributes.aColor,t.FLOAT,!1,24,8)}return n.prototype.reset=function(){this.points.length=0,this.indices.length=0},n.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},n.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},n}();r.default=s},{"pixi-gl-core":35}],65:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=t("../../../Shader"),o=function(e){function r(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,e.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,e),r}(((n=i)&&n.__esModule?n:{default:n}).default);r.default=o},{"../../../Shader":50}],66:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e,r){var n=t.shape,i=n.x,o=n.y,s=void 0,a=void 0;if(t.type===_.SHAPES.CIRC?(s=n.radius,a=n.radius):(s=n.width,a=n.height),0!==s&&0!==a){var u=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height)),h=2*Math.PI/u;if(t.fill){var l=(0,T.hex2rgb)(t.fillColor),c=t.fillAlpha,d=l[0]*c,f=l[1]*c,p=l[2]*c,m=e.points,g=e.indices,v=m.length/6;g.push(v);for(var y=0;y<u+1;y++)m.push(i,o,d,f,p,c),m.push(i+Math.sin(h*y)*s,o+Math.cos(h*y)*a,d,f,p,c),g.push(v++,v++);g.push(v-1)}if(t.lineWidth){var b=t.points;t.points=[];for(var x=0;x<u+1;x++)t.points.push(i+Math.sin(h*x)*s,o+Math.cos(h*x)*a);(0,w.default)(t,e,r),t.points=b}}};var n,i=t("./buildLine"),w=(n=i)&&n.__esModule?n:{default:n},_=t("../../../const"),T=t("../../../utils")},{"../../../const":52,"../../../utils":131,"./buildLine":67}],67:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e,r){t.nativeLines?function(t,e){var r=0,n=t.points;if(0!==n.length){var i=e.points,o=n.length/2,s=(0,X.hex2rgb)(t.lineColor),a=t.lineAlpha,u=s[0]*a,h=s[1]*a,l=s[2]*a;for(r=1;r<o;r++){var c=n[2*(r-1)],d=n[2*(r-1)+1],f=n[2*r],p=n[2*r+1];i.push(c,d),i.push(u,h,l,a),i.push(f,p),i.push(u,h,l,a)}}}(t,r):function(t,e){var r=t.points;if(0!==r.length){var n=new W.Point(r[0],r[1]),i=new W.Point(r[r.length-2],r[r.length-1]);if(n.x===i.x&&n.y===i.y){(r=r.slice()).pop(),r.pop();var o=(i=new W.Point(r[r.length-2],r[r.length-1])).x+.5*(n.x-i.x),s=i.y+.5*(n.y-i.y);r.unshift(o,s),r.push(o,s)}var a=e.points,u=e.indices,h=r.length/2,l=r.length,c=a.length/6,d=t.lineWidth/2,f=(0,X.hex2rgb)(t.lineColor),p=t.lineAlpha,m=f[0]*p,g=f[1]*p,v=f[2]*p,y=r[0],b=r[1],x=r[2],w=r[3],_=0,T=0,E=-(b-w),S=y-x,C=0,O=0,P=0,A=0,M=Math.sqrt(E*E+S*S);E/=M,S/=M,E*=d,S*=d,a.push(y-E,b-S,m,g,v,p),a.push(y+E,b+S,m,g,v,p);for(var I=1;I<h-1;++I){y=r[2*(I-1)],b=r[2*(I-1)+1],x=r[2*I],w=r[2*I+1],_=r[2*(I+1)],T=r[2*(I+1)+1],E=-(b-w),S=y-x,E/=M=Math.sqrt(E*E+S*S),S/=M,E*=d,S*=d,C=-(w-T),O=x-_,C/=M=Math.sqrt(C*C+O*O),O/=M;var R=-S+b-(-S+w),k=-E+x-(-E+y),D=(-E+y)*(-S+w)-(-E+x)*(-S+b),L=-(O*=d)+T-(-O+w),B=-(C*=d)+x-(-C+_),F=(-C+_)*(-O+w)-(-C+x)*(-O+T),N=R*B-L*k;if(Math.abs(N)<.1)N+=10.1,a.push(x-E,w-S,m,g,v,p),a.push(x+E,w+S,m,g,v,p);else{var j=(k*F-B*D)/N,U=(L*D-R*F)/N;196*d*d<(j-x)*(j-x)+(U-w)*(U-w)?(P=E-C,A=S-O,P/=M=Math.sqrt(P*P+A*A),A/=M,P*=d,A*=d,a.push(x-P,w-A),a.push(m,g,v,p),a.push(x+P,w+A),a.push(m,g,v,p),a.push(x-P,w-A),a.push(m,g,v,p),l++):(a.push(j,U),a.push(m,g,v,p),a.push(x-(j-x),w-(U-w)),a.push(m,g,v,p))}}y=r[2*(h-2)],b=r[2*(h-2)+1],x=r[2*(h-1)],E=-(b-(w=r[2*(h-1)+1])),S=y-x,E/=M=Math.sqrt(E*E+S*S),S/=M,E*=d,S*=d,a.push(x-E,w-S),a.push(m,g,v,p),a.push(x+E,w+S),a.push(m,g,v,p),u.push(c);for(var q=0;q<l;++q)u.push(c++);u.push(c-1)}}(t,e)};var W=t("../../../math"),X=t("../../../utils")},{"../../../math":76,"../../../utils":131}],68:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.default=function(t,e,r){t.points=t.shape.points.slice();var n=t.points;if(t.fill&&6<=n.length){for(var i=[],o=t.holes,s=0;s<o.length;s++){var a=o[s];i.push(n.length/2),n=n.concat(a.points)}var u=e.points,h=e.indices,l=n.length/2,c=(0,w.hex2rgb)(t.fillColor),d=t.fillAlpha,f=c[0]*d,p=c[1]*d,m=c[2]*d,g=(0,_.default)(n,i,2);if(!g)return;for(var v=u.length/6,y=0;y<g.length;y+=3)h.push(g[y]+v),h.push(g[y]+v),h.push(g[y+1]+v),h.push(g[y+2]+v),h.push(g[y+2]+v);for(var b=0;b<l;b++)u.push(n[2*b],n[2*b+1],f,p,m,d)}0<t.lineWidth&&(0,x.default)(t,e,r)};var x=n(t("./buildLine")),w=t("../../../utils"),_=n(t("earcut"))},{"../../../utils":131,"./buildLine":67,earcut:20}],69:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e,r){var n=t.shape,i=n.x,o=n.y,s=n.width,a=n.height;if(t.fill){var u=(0,y.hex2rgb)(t.fillColor),h=t.fillAlpha,l=u[0]*h,c=u[1]*h,d=u[2]*h,f=e.points,p=e.indices,m=f.length/6;f.push(i,o),f.push(l,c,d,h),f.push(i+s,o),f.push(l,c,d,h),f.push(i,o+a),f.push(l,c,d,h),f.push(i+s,o+a),f.push(l,c,d,h),p.push(m,m,m+1,m+2,m+3,m+3)}if(t.lineWidth){var g=t.points;t.points=[i,o,i+s,o,i+s,o+a,i,o+a,i,o],(0,v.default)(t,e,r),t.points=g}};var n,i=t("./buildLine"),v=(n=i)&&n.__esModule?n:{default:n},y=t("../../../utils")},{"../../../utils":131,"./buildLine":67}],70:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function m(t,e,r){return t+(e-t)*r}function E(t,e,r,n,i,o){for(var s=6<arguments.length&&void 0!==arguments[6]?arguments[6]:[],a=0,u=0,h=0,l=0,c=0,d=0,f=0,p=0;f<=20;++f)a=m(t,r,p=f/20),u=m(e,n,p),h=m(r,i,p),l=m(n,o,p),c=m(a,h,p),d=m(u,l,p),s.push(c,d);return s}r.__esModule=!0,r.default=function(t,e,r){var n=t.shape,i=n.x,o=n.y,s=n.width,a=n.height,u=n.radius,h=[];if(h.push(i,o+u),E(i,o+a-u,i,o+a,i+u,o+a,h),E(i+s-u,o+a,i+s,o+a,i+s,o+a-u,h),E(i+s,o+u,i+s,o,i+s-u,o,h),E(i+u,o,i,o,i,o+u+1e-10,h),t.fill){for(var l=(0,O.hex2rgb)(t.fillColor),c=t.fillAlpha,d=l[0]*c,f=l[1]*c,p=l[2]*c,m=e.points,g=e.indices,v=m.length/6,y=(0,S.default)(h,null,2),b=0,x=y.length;b<x;b+=3)g.push(y[b]+v),g.push(y[b]+v),g.push(y[b+1]+v),g.push(y[b+2]+v),g.push(y[b+2]+v);for(var w=0,_=h.length;w<_;w++)m.push(h[w],h[++w],d,f,p,c)}if(t.lineWidth){var T=t.points;t.points=h,(0,C.default)(t,e,r),t.points=T}};var S=n(t("earcut")),C=n(t("./buildLine")),O=t("../../../utils")},{"../../../utils":131,"./buildLine":67,earcut:20}],71:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.autoDetectRenderer=r.Application=r.Filter=r.SpriteMaskFilter=r.Quad=r.RenderTarget=r.ObjectRenderer=r.WebGLManager=r.Shader=r.CanvasRenderTarget=r.TextureUvs=r.VideoBaseTexture=r.BaseRenderTexture=r.RenderTexture=r.BaseTexture=r.TextureMatrix=r.Texture=r.Spritesheet=r.CanvasGraphicsRenderer=r.GraphicsRenderer=r.GraphicsData=r.Graphics=r.TextMetrics=r.TextStyle=r.Text=r.SpriteRenderer=r.CanvasTinter=r.CanvasSpriteRenderer=r.Sprite=r.TransformBase=r.TransformStatic=r.Transform=r.Container=r.DisplayObject=r.Bounds=r.glCore=r.WebGLRenderer=r.CanvasRenderer=r.ticker=r.utils=r.settings=void 0;var o=t("./const");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return o[t]}})});var s=t("./math");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return s[t]}})});var a=t("pixi-gl-core");Object.defineProperty(r,"glCore",{enumerable:!0,get:function(){return i(a).default}});var u=t("./display/Bounds");Object.defineProperty(r,"Bounds",{enumerable:!0,get:function(){return i(u).default}});var h=t("./display/DisplayObject");Object.defineProperty(r,"DisplayObject",{enumerable:!0,get:function(){return i(h).default}});var l=t("./display/Container");Object.defineProperty(r,"Container",{enumerable:!0,get:function(){return i(l).default}});var c=t("./display/Transform");Object.defineProperty(r,"Transform",{enumerable:!0,get:function(){return i(c).default}});var d=t("./display/TransformStatic");Object.defineProperty(r,"TransformStatic",{enumerable:!0,get:function(){return i(d).default}});var f=t("./display/TransformBase");Object.defineProperty(r,"TransformBase",{enumerable:!0,get:function(){return i(f).default}});var p=t("./sprites/Sprite");Object.defineProperty(r,"Sprite",{enumerable:!0,get:function(){return i(p).default}});var m=t("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(r,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return i(m).default}});var g=t("./sprites/canvas/CanvasTinter");Object.defineProperty(r,"CanvasTinter",{enumerable:!0,get:function(){return i(g).default}});var v=t("./sprites/webgl/SpriteRenderer");Object.defineProperty(r,"SpriteRenderer",{enumerable:!0,get:function(){return i(v).default}});var y=t("./text/Text");Object.defineProperty(r,"Text",{enumerable:!0,get:function(){return i(y).default}});var b=t("./text/TextStyle");Object.defineProperty(r,"TextStyle",{enumerable:!0,get:function(){return i(b).default}});var x=t("./text/TextMetrics");Object.defineProperty(r,"TextMetrics",{enumerable:!0,get:function(){return i(x).default}});var w=t("./graphics/Graphics");Object.defineProperty(r,"Graphics",{enumerable:!0,get:function(){return i(w).default}});var _=t("./graphics/GraphicsData");Object.defineProperty(r,"GraphicsData",{enumerable:!0,get:function(){return i(_).default}});var T=t("./graphics/webgl/GraphicsRenderer");Object.defineProperty(r,"GraphicsRenderer",{enumerable:!0,get:function(){return i(T).default}});var E=t("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(r,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return i(E).default}});var S=t("./textures/Spritesheet");Object.defineProperty(r,"Spritesheet",{enumerable:!0,get:function(){return i(S).default}});var C=t("./textures/Texture");Object.defineProperty(r,"Texture",{enumerable:!0,get:function(){return i(C).default}});var O=t("./textures/TextureMatrix");Object.defineProperty(r,"TextureMatrix",{enumerable:!0,get:function(){return i(O).default}});var P=t("./textures/BaseTexture");Object.defineProperty(r,"BaseTexture",{enumerable:!0,get:function(){return i(P).default}});var A=t("./textures/RenderTexture");Object.defineProperty(r,"RenderTexture",{enumerable:!0,get:function(){return i(A).default}});var M=t("./textures/BaseRenderTexture");Object.defineProperty(r,"BaseRenderTexture",{enumerable:!0,get:function(){return i(M).default}});var I=t("./textures/VideoBaseTexture");Object.defineProperty(r,"VideoBaseTexture",{enumerable:!0,get:function(){return i(I).default}});var R=t("./textures/TextureUvs");Object.defineProperty(r,"TextureUvs",{enumerable:!0,get:function(){return i(R).default}});var k=t("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(r,"CanvasRenderTarget",{enumerable:!0,get:function(){return i(k).default}});var D=t("./Shader");Object.defineProperty(r,"Shader",{enumerable:!0,get:function(){return i(D).default}});var L=t("./renderers/webgl/managers/WebGLManager");Object.defineProperty(r,"WebGLManager",{enumerable:!0,get:function(){return i(L).default}});var B=t("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(r,"ObjectRenderer",{enumerable:!0,get:function(){return i(B).default}});var F=t("./renderers/webgl/utils/RenderTarget");Object.defineProperty(r,"RenderTarget",{enumerable:!0,get:function(){return i(F).default}});var N=t("./renderers/webgl/utils/Quad");Object.defineProperty(r,"Quad",{enumerable:!0,get:function(){return i(N).default}});var j=t("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(r,"SpriteMaskFilter",{enumerable:!0,get:function(){return i(j).default}});var U=t("./renderers/webgl/filters/Filter");Object.defineProperty(r,"Filter",{enumerable:!0,get:function(){return i(U).default}});var q=t("./Application");Object.defineProperty(r,"Application",{enumerable:!0,get:function(){return i(q).default}});var W=t("./autoDetectRenderer");Object.defineProperty(r,"autoDetectRenderer",{enumerable:!0,get:function(){return W.autoDetectRenderer}});var X=n(t("./utils")),H=n(t("./ticker")),z=i(t("./settings")),G=i(t("./renderers/canvas/CanvasRenderer")),Y=i(t("./renderers/webgl/WebGLRenderer"));r.settings=z.default,r.utils=X,r.ticker=H,r.CanvasRenderer=G.default,r.WebGLRenderer=Y.default},{"./Application":49,"./Shader":50,"./autoDetectRenderer":51,"./const":52,"./display/Bounds":53,"./display/Container":54,"./display/DisplayObject":55,"./display/Transform":56,"./display/TransformBase":57,"./display/TransformStatic":58,"./graphics/Graphics":59,"./graphics/GraphicsData":60,"./graphics/canvas/CanvasGraphicsRenderer":61,"./graphics/webgl/GraphicsRenderer":63,"./math":76,"./renderers/canvas/CanvasRenderer":83,"./renderers/canvas/utils/CanvasRenderTarget":85,"./renderers/webgl/WebGLRenderer":90,"./renderers/webgl/filters/Filter":92,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":95,"./renderers/webgl/managers/WebGLManager":99,"./renderers/webgl/utils/ObjectRenderer":100,"./renderers/webgl/utils/Quad":101,"./renderers/webgl/utils/RenderTarget":102,"./settings":107,"./sprites/Sprite":108,"./sprites/canvas/CanvasSpriteRenderer":109,"./sprites/canvas/CanvasTinter":110,"./sprites/webgl/SpriteRenderer":112,"./text/Text":114,"./text/TextMetrics":115,"./text/TextStyle":116,"./textures/BaseRenderTexture":117,"./textures/BaseTexture":118,"./textures/RenderTexture":119,"./textures/Spritesheet":120,"./textures/Texture":121,"./textures/TextureMatrix":122,"./textures/TextureUvs":123,"./textures/VideoBaseTexture":124,"./ticker":127,"./utils":131,"pixi-gl-core":35}],72:[function(t,e,r){"use strict";function l(t){return t<0?-1:0<t?1:0}r.__esModule=!0;var n,i=t("./Matrix"),c=(n=i)&&n.__esModule?n:{default:n},d=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],f=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],p=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],m=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],g=[],v=[];!function(){for(var t=0;t<16;t++){var e=[];v.push(e);for(var r=0;r<16;r++)for(var n=l(d[t]*d[r]+p[t]*f[r]),i=l(f[t]*d[r]+m[t]*f[r]),o=l(d[t]*p[r]+p[t]*m[r]),s=l(f[t]*p[r]+m[t]*m[r]),a=0;a<16;a++)if(d[a]===n&&f[a]===i&&p[a]===o&&m[a]===s){e.push(a);break}}for(var u=0;u<16;u++){var h=new c.default;h.set(d[u],f[u],p[u],m[u],0,0),g.push(h)}}();var o={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return d[t]},uY:function(t){return f[t]},vX:function(t){return p[t]},vY:function(t){return m[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return v[t][e]},sub:function(t,e){return v[t][o.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?o.S:o.N:2*Math.abs(e)<=Math.abs(t)?0<t?o.E:o.W:0<e?0<t?o.SE:o.SW:0<t?o.NE:o.NW},matrixAppendRotationInv:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=g[o.inv(e)];i.tx=r,i.ty=n,t.append(i)}};r.default=o},{"./Matrix":73}],73:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),o=t("./Point"),a=(n=o)&&n.__esModule?n:{default:n},u=t("../const"),s=function(){function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,s),this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o,this.array=null}return s.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},s.prototype.set=function(t,e,r,n,i,o){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o,this},s.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0),r[8]=1,r},s.prototype.apply=function(t,e){e=e||new a.default;var r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e},s.prototype.applyInverse=function(t,e){e=e||new a.default;var r=1/(this.a*this.d+this.c*-this.b),n=t.x,i=t.y;return e.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e},s.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},s.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},s.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,o=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},s.prototype.append=function(t){var e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this},s.prototype.setTransform=function(t,e,r,n,i,o,s,a,u){return this.a=Math.cos(s+u)*i,this.b=Math.sin(s+u)*i,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(r*this.a+n*this.c),this.ty=e-(r*this.b+n*this.d),this},s.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},s.prototype.decompose=function(t){var e=this.a,r=this.b,n=this.c,i=this.d,o=-Math.atan2(-n,i),s=Math.atan2(r,e),a=Math.abs(o+s);return a<1e-5||Math.abs(u.PI_2-a)<1e-5?(t.rotation=s,e<0&&0<=i&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+i*i),t.position.x=this.tx,t.position.y=this.ty,t},s.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,o=t*n-e*r;return this.a=n/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(t*this.ty-e*i)/o,this},s.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},s.prototype.clone=function(){var t=new s;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},s.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},i(s,null,[{key:"IDENTITY",get:function(){return new s}},{key:"TEMP_MATRIX",get:function(){return new s}}]),s}();r.default=s},{"../const":52,"./Point":75}],74:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),i=function(){function i(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,i),this._x=r,this._y=n,this.cb=t,this.scope=e}return i.prototype.set=function(t,e){var r=t||0,n=e||(0!==e?r:0);this._x===r&&this._y===n||(this._x=r,this._y=n,this.cb.call(this.scope))},i.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},n(i,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),i}();r.default=i},{}],75:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,r),this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copy=function(t){this.set(t.x,t.y)},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},r}();r.default=n},{}],76:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./Point");Object.defineProperty(r,"Point",{enumerable:!0,get:function(){return n(i).default}});var o=t("./ObservablePoint");Object.defineProperty(r,"ObservablePoint",{enumerable:!0,get:function(){return n(o).default}});var s=t("./Matrix");Object.defineProperty(r,"Matrix",{enumerable:!0,get:function(){return n(s).default}});var a=t("./GroupD8");Object.defineProperty(r,"GroupD8",{enumerable:!0,get:function(){return n(a).default}});var u=t("./shapes/Circle");Object.defineProperty(r,"Circle",{enumerable:!0,get:function(){return n(u).default}});var h=t("./shapes/Ellipse");Object.defineProperty(r,"Ellipse",{enumerable:!0,get:function(){return n(h).default}});var l=t("./shapes/Polygon");Object.defineProperty(r,"Polygon",{enumerable:!0,get:function(){return n(l).default}});var c=t("./shapes/Rectangle");Object.defineProperty(r,"Rectangle",{enumerable:!0,get:function(){return n(c).default}});var d=t("./shapes/RoundedRectangle");Object.defineProperty(r,"RoundedRectangle",{enumerable:!0,get:function(){return n(d).default}})},{"./GroupD8":72,"./Matrix":73,"./ObservablePoint":74,"./Point":75,"./shapes/Circle":77,"./shapes/Ellipse":78,"./shapes/Polygon":79,"./shapes/Rectangle":80,"./shapes/RoundedRectangle":81}],77:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=t("./Rectangle"),o=(n=i)&&n.__esModule?n:{default:n},s=t("../../const"),a=function(){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.x=t,this.y=e,this.radius=r,this.type=s.SHAPES.CIRC}return n.prototype.clone=function(){return new n(this.x,this.y,this.radius)},n.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-t,i=this.y-e;return(n*=n)+(i*=i)<=r},n.prototype.getBounds=function(){return new o.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},n}();r.default=a},{"../../const":52,"./Rectangle":80}],78:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=t("./Rectangle"),o=(n=i)&&n.__esModule?n:{default:n},s=t("../../const"),a=function(){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,i),this.x=t,this.y=e,this.width=r,this.height=n,this.type=s.SHAPES.ELIP}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,n=(e-this.y)/this.height;return(r*=r)+(n*=n)<=1},i.prototype.getBounds=function(){return new o.default(this.x-this.width,this.y-this.height,this.width,this.height)},i}();r.default=a},{"../../const":52,"./Rectangle":80}],79:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=t("../Point"),a=(n=i)&&n.__esModule?n:{default:n},u=t("../../const"),o=function(){function s(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),Array.isArray(e[0])&&(e=e[0]),e[0]instanceof a.default){for(var n=[],i=0,o=e.length;i<o;i++)n.push(e[i].x,e[i].y);e=n}this.closed=!0,this.points=e,this.type=u.SHAPES.POLY}return s.prototype.clone=function(){return new s(this.points.slice())},s.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},s.prototype.contains=function(t,e){for(var r=!1,n=this.points.length/2,i=0,o=n-1;i<n;o=i++){var s=this.points[2*i],a=this.points[2*i+1],u=this.points[2*o],h=this.points[2*o+1];e<a!=e<h&&t<(e-a)/(h-a)*(u-s)+s&&(r=!r)}return r},s}();r.default=o},{"../../const":52,"../Point":75}],80:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),o=t("../../const"),i=function(){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,i),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(n),this.type=o.SHAPES.RECT}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},i.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},i.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},i.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},i.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=r-e,this.y=n,this.height=i-n},n(i,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new i(0,0,0,0)}}]),i}();r.default=i},{"../../const":52}],81:[function(t,e,r){"use strict";r.__esModule=!0;var s=t("../../const"),n=function(){function o(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,o),this.x=t,this.y=e,this.width=r,this.height=n,this.radius=i,this.type=s.SHAPES.RREC}return o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.radius)},o.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),n=e-(this.y+this.radius),i=this.radius*this.radius;if(r*r+n*n<=i)return!0;if((r=t-(this.x+this.width-this.radius))*r+n*n<=i)return!0;if(r*r+(n=e-(this.y+this.height-this.radius))*n<=i)return!0;if((r=t-(this.x+this.radius))*r+n*n<=i)return!0}return!1},o}();r.default=n},{"../../const":52}],82:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),a=t("../utils"),u=t("../math"),h=t("../const"),l=n(t("../settings")),c=n(t("../display/Container")),d=n(t("../textures/RenderTexture")),o=n(t("eventemitter3")),f=new u.Matrix,s=function(o){function s(t,e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this));return(0,a.sayHello)(t),"number"==typeof e&&(e=Object.assign({width:e,height:r||l.default.RENDER_OPTIONS.height},n)),e=Object.assign({},l.default.RENDER_OPTIONS,e),i.options=e,i.type=h.RENDERER_TYPE.UNKNOWN,i.screen=new u.Rectangle(0,0,e.width,e.height),i.view=e.view||document.createElement("canvas"),i.resolution=e.resolution||l.default.RESOLUTION,i.transparent=e.transparent,i.autoResize=e.autoResize||!1,i.blendModes=null,i.preserveDrawingBuffer=e.preserveDrawingBuffer,i.clearBeforeRender=e.clearBeforeRender,i.roundPixels=e.roundPixels,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,0],i._backgroundColorString="#000000",i.backgroundColor=e.backgroundColor||i._backgroundColor,i._tempDisplayObjectParent=new c.default,i._lastObjectRendered=i._tempDisplayObjectParent,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,o),s.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},s.prototype.generateTexture=function(t,e,r,n){n=n||t.getLocalBounds();var i=d.default.create(0|n.width,0|n.height,e,r);return f.tx=-n.x,f.ty=-n.y,this.render(t,i,!1,f,!0),i},s.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=h.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},i(s,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,a.hex2string)(t),(0,a.hex2rgb)(t,this._backgroundColorRgba)}}]),s}(o.default);r.default=s},{"../const":52,"../display/Container":54,"../math":76,"../settings":107,"../textures/RenderTexture":119,"../utils":131,eventemitter3:21}],83:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=n(t("../SystemRenderer")),s=n(t("./utils/CanvasMaskManager")),l=n(t("./utils/CanvasRenderTarget")),a=n(t("./utils/mapCanvasBlendModesToPixi")),o=t("../../utils"),c=t("../../const"),u=n(t("../../settings")),h=function(i){function o(t,e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,"Canvas",t,e,r));return n.type=c.RENDERER_TYPE.CANVAS,n.rootContext=n.view.getContext("2d",{alpha:n.transparent}),n.context=n.rootContext,n.refresh=!0,n.maskManager=new s.default(n),n.smoothProperty="imageSmoothingEnabled",n.rootContext.imageSmoothingEnabled||(n.rootContext.webkitImageSmoothingEnabled?n.smoothProperty="webkitImageSmoothingEnabled":n.rootContext.mozImageSmoothingEnabled?n.smoothProperty="mozImageSmoothingEnabled":n.rootContext.oImageSmoothingEnabled?n.smoothProperty="oImageSmoothingEnabled":n.rootContext.msImageSmoothingEnabled&&(n.smoothProperty="msImageSmoothingEnabled")),n.initPlugins(),n.blendModes=(0,a.default)(),n._activeBlendMode=null,n.renderingToScreen=!1,n.resize(n.options.width,n.options.height),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,i),o.prototype.render=function(t,e,r,n,i){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var o=this.resolution;e?((e=e.baseTexture||e)._canvasRenderTarget||(e._canvasRenderTarget=new l.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var s=this.context;if(e||(this._lastObjectRendered=t),!i){var a=t.parent,u=this._tempDisplayObjectParent.transform.worldTransform;n?(n.copy(u),this._tempDisplayObjectParent.transform._worldID=-1):u.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=a}s.save(),s.setTransform(1,0,0,1,0,0),s.globalAlpha=1,this._activeBlendMode=c.BLEND_MODES.NORMAL,s.globalCompositeOperation=this.blendModes[c.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(s.fillStyle="black",s.clear()),(void 0!==r?r:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?s.clearRect(0,0,this.width,this.height):(s.fillStyle=this._backgroundColorString,s.fillRect(0,0,this.width,this.height)));var h=this.context;this.context=s,t.renderCanvas(this),this.context=h,s.restore(),this.resolution=o,this.emit("postrender")}},o.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},o.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},o.prototype.destroy=function(t){this.destroyPlugins(),i.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},o.prototype.resize=function(t,e){i.prototype.resize.call(this,t,e),this.smoothProperty&&(this.rootContext[this.smoothProperty]=u.default.SCALE_MODE===c.SCALE_MODES.LINEAR)},o.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},o}(i.default);r.default=h,o.pluginTarget.mixin(h)},{"../../const":52,"../../settings":107,"../../utils":131,"../SystemRenderer":82,"./utils/CanvasMaskManager":84,"./utils/CanvasRenderTarget":85,"./utils/mapCanvasBlendModesToPixi":87}],84:[function(t,e,r){"use strict";r.__esModule=!0;var E=t("../../../const"),n=function(){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),this.renderer=t}return e.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var r=t.alpha,n=t.transform.worldTransform,i=e.resolution;e.context.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=r},e.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,r=t.graphicsData.length;if(0!==r){e.beginPath();for(var n=0;n<r;n++){var i=t.graphicsData[n],o=i.shape;if(i.type===E.SHAPES.POLY){var s=o.points;e.moveTo(s[0],s[1]);for(var a=1;a<s.length/2;a++)e.lineTo(s[2*a],s[2*a+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&e.closePath()}else if(i.type===E.SHAPES.RECT)e.rect(o.x,o.y,o.width,o.height),e.closePath();else if(i.type===E.SHAPES.CIRC)e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath();else if(i.type===E.SHAPES.ELIP){var u=2*o.width,h=2*o.height,l=o.x-u/2,c=o.y-h/2,d=u/2*.5522848,f=h/2*.5522848,p=l+u,m=c+h,g=l+u/2,v=c+h/2;e.moveTo(l,v),e.bezierCurveTo(l,v-f,g-d,c,g,c),e.bezierCurveTo(g+d,c,p,v-f,p,v),e.bezierCurveTo(p,v+f,g+d,m,g,m),e.bezierCurveTo(g-d,m,l,v+f,l,v),e.closePath()}else if(i.type===E.SHAPES.RREC){var y=o.x,b=o.y,x=o.width,w=o.height,_=o.radius,T=Math.min(x,w)/2|0;_=T<_?T:_,e.moveTo(y,b+_),e.lineTo(y,b+w-_),e.quadraticCurveTo(y,b+w,y+_,b+w),e.lineTo(y+x-_,b+w),e.quadraticCurveTo(y+x,b+w,y+x,b+w-_),e.lineTo(y+x,b+_),e.quadraticCurveTo(y+x,b,y+x-_,b),e.lineTo(y+_,b),e.quadraticCurveTo(y,b,y,b+_),e.closePath()}}}},e.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},e.prototype.destroy=function(){},e}();r.default=n},{"../../../const":52}],85:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),o=t("../../../settings"),s=(n=o)&&n.__esModule?n:{default:n},a=function(){function n(t,e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||s.default.RESOLUTION,this.resize(t,e)}return n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},n.prototype.destroy=function(){this.context=null,this.canvas=null},i(n,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),n}();r.default=a},{"../../../settings":107}],86:[function(t,e,r){"use strict";function s(t){var e=document.createElement("canvas");e.width=6,e.height=1;var r=e.getContext("2d");return r.fillStyle=t,r.fillRect(0,0,6,1),e}r.__esModule=!0,r.default=function(){if("undefined"==typeof document)return!1;var t=s("#ff00ff"),e=s("#ffff00"),r=document.createElement("canvas");r.width=6,r.height=1;var n=r.getContext("2d");n.globalCompositeOperation="multiply",n.drawImage(t,0,0),n.drawImage(e,2,0);var i=n.getImageData(2,0,1,1);if(!i)return!1;var o=i.data;return 255===o[0]&&0===o[1]&&0===o[2]}},{}],87:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return(0,s.default)()?(t[i.BLEND_MODES.NORMAL]="source-over",t[i.BLEND_MODES.ADD]="lighter",t[i.BLEND_MODES.MULTIPLY]="multiply",t[i.BLEND_MODES.SCREEN]="screen",t[i.BLEND_MODES.OVERLAY]="overlay",t[i.BLEND_MODES.DARKEN]="darken",t[i.BLEND_MODES.LIGHTEN]="lighten",t[i.BLEND_MODES.COLOR_DODGE]="color-dodge",t[i.BLEND_MODES.COLOR_BURN]="color-burn",t[i.BLEND_MODES.HARD_LIGHT]="hard-light",t[i.BLEND_MODES.SOFT_LIGHT]="soft-light",t[i.BLEND_MODES.DIFFERENCE]="difference",t[i.BLEND_MODES.EXCLUSION]="exclusion",t[i.BLEND_MODES.HUE]="hue",t[i.BLEND_MODES.SATURATION]="saturate",t[i.BLEND_MODES.COLOR]="color",t[i.BLEND_MODES.LUMINOSITY]="luminosity"):(t[i.BLEND_MODES.NORMAL]="source-over",t[i.BLEND_MODES.ADD]="lighter",t[i.BLEND_MODES.MULTIPLY]="source-over",t[i.BLEND_MODES.SCREEN]="source-over",t[i.BLEND_MODES.OVERLAY]="source-over",t[i.BLEND_MODES.DARKEN]="source-over",t[i.BLEND_MODES.LIGHTEN]="source-over",t[i.BLEND_MODES.COLOR_DODGE]="source-over",t[i.BLEND_MODES.COLOR_BURN]="source-over",t[i.BLEND_MODES.HARD_LIGHT]="source-over",t[i.BLEND_MODES.SOFT_LIGHT]="source-over",t[i.BLEND_MODES.DIFFERENCE]="source-over",t[i.BLEND_MODES.EXCLUSION]="source-over",t[i.BLEND_MODES.HUE]="source-over",t[i.BLEND_MODES.SATURATION]="source-over",t[i.BLEND_MODES.COLOR]="source-over",t[i.BLEND_MODES.LUMINOSITY]="source-over"),t[i.BLEND_MODES.NORMAL_NPM]=t[i.BLEND_MODES.NORMAL],t[i.BLEND_MODES.ADD_NPM]=t[i.BLEND_MODES.ADD],t[i.BLEND_MODES.SCREEN_NPM]=t[i.BLEND_MODES.SCREEN],t};var n,i=t("../../../const"),o=t("./canUseNewCanvasBlendModes"),s=(n=o)&&n.__esModule?n:{default:n}},{"../../../const":52,"./canUseNewCanvasBlendModes":86}],88:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=t("../../const"),o=t("../../settings"),s=(n=o)&&n.__esModule?n:{default:n},a=function(){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=s.default.GC_MAX_IDLE,this.checkCountMax=s.default.GC_MAX_CHECK_COUNT,this.mode=s.default.GC_MODE}return e.prototype.update=function(){this.count++,this.mode!==i.GC_MODES.MANUAL&&++this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())},e.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,r=!1,n=0;n<e.length;n++){var i=e[n];!i._glRenderTargets&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),r=!(e[n]=null))}if(r){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},e.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var r=t.children.length-1;0<=r;r--)this.unload(t.children[r])},e}();r.default=a},{"../../const":52,"../../settings":107}],89:[function(t,e,r){"use strict";r.__esModule=!0;var n,u=t("pixi-gl-core"),h=t("../../const"),i=t("./utils/RenderTarget"),l=(n=i)&&n.__esModule?n:{default:n},s=t("../../utils"),o=function(){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),this.renderer=t,this.gl=t.gl,this._managedTextures=[]}return e.prototype.bindTexture=function(){},e.prototype.getTexture=function(){},e.prototype.updateTexture=function(t,e){var r=this.gl,n=!!t._glRenderTargets;if(!t.hasLoaded)return null;var i=this.renderer.boundTextures;if(void 0===e)for(var o=e=0;o<i.length;++o)if(i[o]===t){e=o;break}i[e]=t,r.activeTexture(r.TEXTURE0+e);var s=t._glTextures[this.renderer.CONTEXT_UID];if(s)n?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):s.upload(t.source);else{if(n){var a=new l.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);a.resize(t.width,t.height),s=(t._glRenderTargets[this.renderer.CONTEXT_UID]=a).texture}else(s=new u.GLTexture(this.gl,null,null,null,null)).bind(e),s.premultiplyAlpha=!0,s.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=s,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&s.enableMipmap(),t.wrapMode===h.WRAP_MODES.CLAMP?s.enableWrapClamp():t.wrapMode===h.WRAP_MODES.REPEAT?s.enableWrapRepeat():s.enableWrapMirrorRepeat()):s.enableWrapClamp(),t.scaleMode===h.SCALE_MODES.NEAREST?s.enableNearestScaling():s.enableLinearScaling()}return s},e.prototype.destroyTexture=function(t,e){if((t=t.baseTexture||t).hasLoaded){var r=this.renderer.CONTEXT_UID,n=t._glTextures,i=t._glRenderTargets;if(n[r]&&(this.renderer.unbindTexture(t),n[r].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete n[r],!e)){var o=this._managedTextures.indexOf(t);-1!==o&&(0,s.removeItems)(this._managedTextures,o,1)}i&&i[r]&&(i[r].destroy(),delete i[r])}},e.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},e.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},e}();r.default=o},{"../../const":52,"../../utils":131,"./utils/RenderTarget":102,"pixi-gl-core":35}],90:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var s=n(t("../SystemRenderer")),a=n(t("./managers/MaskManager")),u=n(t("./managers/StencilManager")),h=n(t("./managers/FilterManager")),l=n(t("./utils/RenderTarget")),c=n(t("./utils/ObjectRenderer")),d=n(t("./TextureManager")),f=n(t("../../textures/BaseTexture")),p=n(t("./TextureGarbageCollector")),m=n(t("./WebGLState")),g=n(t("./utils/mapWebGLDrawModesToPixi")),v=n(t("./utils/validateContext")),i=t("../../utils"),y=n(t("pixi-gl-core")),b=t("../../const"),x=0,o=function(i){function o(t,e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,"WebGL",t,e,r));return n.legacy=n.options.legacy,n.legacy&&(y.default.VertexArrayObject.FORCE_NATIVE=!0),n.type=b.RENDERER_TYPE.WEBGL,n.handleContextLost=n.handleContextLost.bind(n),n.handleContextRestored=n.handleContextRestored.bind(n),n.view.addEventListener("webglcontextlost",n.handleContextLost,!1),n.view.addEventListener("webglcontextrestored",n.handleContextRestored,!1),n._contextOptions={alpha:n.transparent,antialias:n.options.antialias,premultipliedAlpha:n.transparent&&"notMultiplied"!==n.transparent,stencil:!0,preserveDrawingBuffer:n.options.preserveDrawingBuffer,powerPreference:n.options.powerPreference},n._backgroundColorRgba[3]=n.transparent?0:1,n.maskManager=new a.default(n),n.stencilManager=new u.default(n),n.emptyRenderer=new c.default(n),n.currentRenderer=n.emptyRenderer,n.textureManager=null,n.filterManager=null,n.initPlugins(),n.options.context&&(0,v.default)(n.options.context),n.gl=n.options.context||y.default.createContext(n.view,n._contextOptions),n.CONTEXT_UID=x++,n.state=new m.default(n.gl),n.renderingToScreen=!0,n.boundTextures=null,n._activeShader=null,n._activeVao=null,n._activeRenderTarget=null,n._initContext(),n.drawModes=(0,g.default)(n.gl),n._nextTextureLocation=0,n.setBlendMode(0),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,i),o.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this.textureManager=new d.default(this),this.filterManager=new h.default(this),this.textureGC=new p.default(this),this.state.resetToDefault(),this.rootRenderTarget=new l.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var r=new y.default.GLTexture.fromData(t,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var i=0;i<e;i++){var o=new f.default;o._glTextures[this.CONTEXT_UID]=r,this.boundTextures[i]=n,this.emptyTextures[i]=o,this.bindTexture(null,i)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},o.prototype.render=function(t,e,r,n,i){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!i){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.bindRenderTexture(e,n),this.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},o.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},o.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},o.prototype.resize=function(t,e){s.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},o.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},o.prototype.clear=function(t){this._activeRenderTarget.clear(t)},o.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},o.prototype.clearRenderTexture=function(t,e){var r=t.baseTexture._glRenderTargets[this.CONTEXT_UID];return r&&r.clear(e),this},o.prototype.bindRenderTexture=function(t,e){var r=void 0;if(t){var n=t.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),(r=n._glRenderTargets[this.CONTEXT_UID]).setFrame(t.frame)}else r=this.rootRenderTarget;return r.transform=e,this.bindRenderTarget(r),this},o.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&((this._activeRenderTarget=t).activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},o.prototype.bindShader=function(t,e){return this._activeShader!==t&&((this._activeShader=t).bind(),!1!==e&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},o.prototype.bindTexture=function(t,e,r){if((t=(t=t||this.emptyTextures[e]).baseTexture||t).touched=this.textureGC.count,r)e=e||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===t)return n;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var i=this.gl,o=t._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[e]=t,i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(t,e),e},o.prototype.unbindTexture=function(t){var e=this.gl;t=t.baseTexture||t;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===t&&(this.boundTextures[r]=this.emptyTextures[r],e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this},o.prototype.createVao=function(){return new y.default.VertexArrayObject(this.gl,this.state.attribState)},o.prototype.bindVao=function(t){return this._activeVao===t||(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t),this},o.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.emptyTextures[t];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},o.prototype.handleContextLost=function(t){t.preventDefault()},o.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},o.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),i.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},o}(s.default);r.default=o,i.pluginTarget.mixin(o)},{"../../const":52,"../../textures/BaseTexture":118,"../../utils":131,"../SystemRenderer":82,"./TextureGarbageCollector":88,"./TextureManager":89,"./WebGLState":91,"./managers/FilterManager":96,"./managers/MaskManager":97,"./managers/StencilManager":98,"./utils/ObjectRenderer":100,"./utils/RenderTarget":102,"./utils/mapWebGLDrawModesToPixi":105,"./utils/validateContext":106,"pixi-gl-core":35}],91:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=t("./utils/mapWebGLBlendModesToPixi"),o=(n=i)&&n.__esModule?n:{default:n},s=function(){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=t,this.maxAttribs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,o.default)(t),this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")}return e.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},e.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},e.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},e.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},e.prototype.setBlendMode=function(t){if(t!==this.activeState[4]){this.activeState[4]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},e.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},e.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},e.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},e.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var r=1;r<this.maxAttribs;r++)this.gl.disableVertexAttribArray(r)},e.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},e}();r.default=s},{"./utils/mapWebGLBlendModesToPixi":104}],92:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var o=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),s=n(t("./extractUniformsFromSrc")),a=t("../../../utils"),u=t("../../../const"),h=n(t("../../../settings")),l={},i=function(){function i(t,e,r){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.vertexSrc=t||i.defaultVertexSrc,this.fragmentSrc=e||i.defaultFragmentSrc,this._blendMode=u.BLEND_MODES.NORMAL,this.uniformData=r||(0,s.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[n]=this.uniformData[n].value,this.uniformData[n].type&&(this.uniformData[n].type=this.uniformData[n].type.toLowerCase());this.glShaders={},l[this.vertexSrc+this.fragmentSrc]||(l[this.vertexSrc+this.fragmentSrc]=(0,a.uid)()),this.glShaderKey=l[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=h.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return i.prototype.apply=function(t,e,r,n,i){t.applyFilter(this,e,r,n)},o(i,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),i}();r.default=i},{"../../../const":52,"../../../settings":107,"../../../utils":131,"./extractUniformsFromSrc":93}],93:[function(t,e,r){"use strict";function o(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),r={},n=void 0,i=t.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<i.length;o++){var s=i[o].trim();if(-1<s.indexOf("uniform")){var a=s.split(" "),u=a[1],h=a[2],l=1;-1<h.indexOf("[")&&(h=(n=h.split(/\[|]/))[0],l*=Number(n[1])),h.match(e)||(r[h]={value:c(u,l),name:h,type:u})}}return r}r.__esModule=!0,r.default=function(t,e,r){var n=o(t),i=o(e);return Object.assign(n,i)};var n,i=t("pixi-gl-core"),c=((n=i)&&n.__esModule?n:{default:n}).default.shader.defaultValue},{"pixi-gl-core":35}],94:[function(t,e,r){"use strict";r.__esModule=!0,r.calculateScreenSpaceMatrix=function(t,e,r){var n=t.identity();return n.translate(e.x/r.width,e.y/r.height),n.scale(r.width,r.height),n},r.calculateNormalizedScreenSpaceMatrix=function(t,e,r){var n=t.identity();n.translate(e.x/r.width,e.y/r.height);var i=r.width/e.width,o=r.height/e.height;return n.scale(i,o),n},r.calculateSpriteMatrix=function(t,e,r,n){var i=n._texture.orig,o=t.set(r.width,0,0,r.height,e.x,e.y),s=n.worldTransform.copy(a.Matrix.TEMP_MATRIX);return s.invert(),o.prepend(s),o.scale(1/i.width,1/i.height),o.translate(n.anchor.x,n.anchor.y),o};var a=t("../../../math")},{"../../../math":76}],95:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=n(t("../Filter")),o=t("../../../../math"),s=(t("path"),n(t("../../../../textures/TextureMatrix"))),a=function(n){function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var e=new o.Matrix,r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return t.renderable=!1,r.maskSprite=t,r.maskMatrix=e,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,n),i.prototype.apply=function(t,e,r){var n=this.maskSprite,i=this.maskSprite.texture;i.valid&&(i.transform||(i.transform=new s.default(i,0)),i.transform.update(),this.uniforms.mask=i,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(i.transform.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=i.transform.uClampFrame,t.applyFilter(this,e,r))},i}(i.default);r.default=a},{"../../../../math":76,"../../../../textures/TextureMatrix":122,"../Filter":92,path:28}],96:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=n(t("./WebGLManager")),a=n(t("../utils/RenderTarget")),s=n(t("../utils/Quad")),u=t("../../../math"),h=n(t("../../../Shader")),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../filters/filterTransforms")),c=n(t("bit-twiddle")),p=function t(){i(this,t),this.renderTarget=null,this.sourceFrame=new u.Rectangle,this.destinationFrame=new u.Rectangle,this.filters=[],this.target=null,this.resolution=1},d="screen",f=function(r){function n(t){i(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,r.call(this,t));return e.gl=e.renderer.gl,e.quad=new s.default(e.gl,t.state.attribState),e.shaderCache={},e.pool={},e.filterData=null,e.managedFilters=[],e.renderer.on("prerender",e.onPrerender,e),e._screenWidth=t.view.width,e._screenHeight=t.view.height,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r),n.prototype.pushFilter=function(t,e){var r=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var i=new p;i.sourceFrame=i.destinationFrame=this.renderer._activeRenderTarget.size,i.renderTarget=r._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[i]},this.filterData=n}var o=n.stack[++n.index],s=n.stack[0].destinationFrame;o||(o=n.stack[n.index]=new p);var a=t.filterArea&&0===t.filterArea.x&&0===t.filterArea.y&&t.filterArea.width===r.screen.width&&t.filterArea.height===r.screen.height,u=e[0].resolution,h=0|e[0].padding,l=a?r.screen:t.filterArea||t.getBounds(!0),c=o.sourceFrame,d=o.destinationFrame;c.x=(l.x*u|0)/u,c.y=(l.y*u|0)/u,c.width=(l.width*u|0)/u,c.height=(l.height*u|0)/u,a||(n.stack[0].renderTarget.transform||e[0].autoFit&&c.fit(s),c.pad(h)),d.width=c.width,d.height=c.height;var f=this.getPotRenderTarget(r.gl,c.width,c.height,u);o.target=t,o.filters=e,o.resolution=u,(o.renderTarget=f).setFrame(d,c),r.bindRenderTarget(f),f.clear()},n.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],r=t.stack[t.index];this.quad.map(r.renderTarget.size,r.sourceFrame).upload();var n=r.filters;if(1===n.length)n[0].apply(this,r.renderTarget,e.renderTarget,!1,r),this.freePotRenderTarget(r.renderTarget);else{var i=r.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,r.resolution);o.setFrame(r.destinationFrame,r.sourceFrame),o.clear();var s=0;for(s=0;s<n.length-1;++s){n[s].apply(this,i,o,!0,r);var a=i;i=o,o=a}n[s].apply(this,i,e.renderTarget,!1,r),this.freePotRenderTarget(i),this.freePotRenderTarget(o)}0==--t.index&&(this.filterData=null)},n.prototype.applyFilter=function(t,e,r,n){var i=this.renderer,o=i.gl,s=t.glShaders[i.CONTEXT_UID];s||(t.glShaderKey?(s=this.shaderCache[t.glShaderKey])||(s=new h.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[i.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=s,this.managedFilters.push(t)):(s=t.glShaders[i.CONTEXT_UID]=new h.default(this.gl,t.vertexSrc,t.fragmentSrc),this.managedFilters.push(t)),i.bindVao(null),this.quad.initVao(s)),i.bindVao(this.quad.vao),i.bindRenderTarget(r),n&&(o.disable(o.SCISSOR_TEST),i.clear(),o.enable(o.SCISSOR_TEST)),r===i.maskManager.scissorRenderTarget&&i.maskManager.pushScissorMask(null,i.maskManager.scissorData),i.bindShader(s);var a=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=a,this.syncUniforms(s,t),i.state.setBlendMode(t.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)},n.prototype.syncUniforms=function(t,e){var r=e.uniformData,n=e.uniforms,i=1,o=void 0;if(t.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var s=t.uniforms.filterArea;s[0]=o.renderTarget.size.width,s[1]=o.renderTarget.size.height,s[2]=o.sourceFrame.x,s[3]=o.sourceFrame.y,t.uniforms.filterArea=s}if(t.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var a=t.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,a[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,t.uniforms.filterClamp=a}for(var u in r){var h=r[u].type;if("sampler2d"===h&&0!==n[u]){if(n[u].baseTexture)t.uniforms[u]=this.renderer.bindTexture(n[u].baseTexture,i);else{t.uniforms[u]=i;var l=this.renderer.gl;this.renderer.boundTextures[i]=this.renderer.emptyTextures[i],l.activeTexture(l.TEXTURE0+i),n[u].texture.bind()}i++}else if("mat3"===h)void 0!==n[u].a?t.uniforms[u]=n[u].toArray(!0):t.uniforms[u]=n[u];else if("vec2"===h)if(void 0!==n[u].x){var c=t.uniforms[u]||new Float32Array(2);c[0]=n[u].x,c[1]=n[u].y,t.uniforms[u]=c}else t.uniforms[u]=n[u];else"float"===h?t.uniforms.data[u].value!==r[u]&&(t.uniforms[u]=n[u]):t.uniforms[u]=n[u]}},n.prototype.getRenderTarget=function(t,e){var r=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,e||r.resolution);return n.setFrame(r.destinationFrame,r.sourceFrame),n},n.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},n.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return l.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},n.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return l.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},n.prototype.calculateSpriteMatrix=function(t,e){var r=this.filterData.stack[this.filterData.index];return l.calculateSpriteMatrix(t,r.sourceFrame,r.renderTarget.size,e)},n.prototype.destroy=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=this.renderer,r=this.managedFilters;e.off("prerender",this.onPrerender,this);for(var n=0;n<r.length;n++)t||r[n].glShaders[e.CONTEXT_UID].destroy(),delete r[n].glShaders[e.CONTEXT_UID];this.shaderCache={},t?this.pool={}:this.emptyPool()},n.prototype.getPotRenderTarget=function(t,e,r,n){var i=d;r*=n,(e*=n)===this._screenWidth&&r===this._screenHeight||(i=(65535&(e=c.default.nextPow2(e)))<<16|65535&(r=c.default.nextPow2(r))),this.pool[i]||(this.pool[i]=[]);var o=this.pool[i].pop();if(!o){var s=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),o=new a.default(t,e,r,null,1),t.bindTexture(t.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)}return o.resolution=n,o.defaultFrame.width=o.size.width=e/n,o.defaultFrame.height=o.size.height=r/n,o},n.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var r=0;r<e.length;r++)e[r].destroy(!0)}this.pool={}},n.prototype.freePotRenderTarget=function(t){var e=t.size.width*t.resolution,r=t.size.height*t.resolution,n=d;e===this._screenWidth&&r===this._screenHeight||(n=(65535&e)<<16|65535&r),this.pool[n].push(t)},n.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var t=this.pool[d];if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0);this.pool[d]=[]}},n}(o.default);r.default=f},{"../../../Shader":50,"../../../math":76,"../filters/filterTransforms":94,"../utils/Quad":101,"../utils/RenderTarget":102,"./WebGLManager":99,"bit-twiddle":11}],97:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=n(t("./WebGLManager")),o=n(t("../filters/spriteMask/SpriteMaskFilter")),s=function(r){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,r.call(this,t));return e.scissor=!1,e.scissorData=null,e.scissorRenderTarget=null,e.enableScissor=!0,e.alphaMaskPool=[],e.alphaMaskIndex=0,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r),n.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var r=e.worldTransform,n=Math.atan2(r.b,r.a);(n=Math.round(n*(180/Math.PI)))%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},n.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},n.prototype.pushSpriteMask=function(t,e){var r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new o.default(e)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=e,t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,r),this.alphaMaskIndex++},n.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},n.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},n.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},n.prototype.pushScissorMask=function(t,e){e.renderable=!0;var r=this.renderer._activeRenderTarget,n=e.getBounds();n.fit(r.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var i=this.renderer.resolution;this.renderer.gl.scissor(n.x*i,(r.root?r.size.height-n.y-n.height:n.y)*i,n.width*i,n.height*i),this.scissorRenderTarget=r,this.scissorData=e,this.scissor=!0},n.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},n}(i.default);r.default=s},{"../filters/spriteMask/SpriteMaskFilter":95,"./WebGLManager":99}],98:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=t("./WebGLManager"),o=(n=i)&&n.__esModule?n:{default:n},s=function(r){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,r.call(this,t));return e.stencilMaskStack=null,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r),n.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},n.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,r=this.stencilMaskStack.length;0===r&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,r,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),this._useCurrent()},n.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(e),this._useCurrent())},n.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},n.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},n.prototype.destroy=function(){o.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},n}(o.default);r.default=s},{"./WebGLManager":99}],99:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),this.renderer=t,this.renderer.on("context",this.onContextChange,this)}return e.prototype.onContextChange=function(){},e.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},e}();r.default=n},{}],100:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=t("../managers/WebGLManager"),o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(((n=i)&&n.__esModule?n:{default:n}).default);r.default=o},{"../managers/WebGLManager":99}],101:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=n(t("pixi-gl-core")),o=n(t("../../../utils/createIndicesForQuads")),s=function(){function n(t,e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;r<4;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=(0,o.default)(1),this.vertexBuffer=i.default.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=i.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new i.default.VertexArrayObject(t,e)}return n.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},n.prototype.map=function(t,e){var r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+e.width/t.width,this.uvs[3]=n,this.uvs[4]=r+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=r,this.uvs[7]=n+e.height/t.height,r=e.x,n=e.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+e.width,this.vertices[3]=n,this.vertices[4]=r+e.width,this.vertices[5]=n+e.height,this.vertices[6]=r,this.vertices[7]=n+e.height,this},n.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},n.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},n}();r.default=s},{"../../../utils/createIndicesForQuads":129,"pixi-gl-core":35}],102:[function(t,e,r){"use strict";r.__esModule=!0;var n,a=t("../../../math"),u=t("../../../const"),i=t("../../../settings"),h=(n=i)&&n.__esModule?n:{default:n},l=t("pixi-gl-core"),o=function(){function s(t,e,r,n,i,o){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,s),this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new a.Rectangle(0,0,1,1),this.resolution=i||h.default.RESOLUTION,this.projectionMatrix=new a.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new a.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==n?n:h.default.SCALE_MODE,this.root=o,this.root?(this.frameBuffer=new l.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=l.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===u.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(e,r)}return s.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},s.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},s.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},s.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},s.prototype.calculateProjection=function(t,e){var r=this.projectionMatrix;e=e||t,r.identity(),this.root?(r.a=1/t.width*2,r.d=-1/t.height*2,r.tx=-1-e.x*r.a,r.ty=1-e.y*r.d):(r.a=1/t.width*2,r.d=1/t.height*2,r.tx=-1-e.x*r.a,r.ty=-1-e.y*r.d)},s.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var r=this.frame||this.size;this.calculateProjection(r)}},s.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},s}();r.default=o},{"../../../const":52,"../../../math":76,"../../../settings":107,"pixi-gl-core":35}],103:[function(t,e,r){"use strict";function s(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}r.__esModule=!0,r.default=function(t,e){var r=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(r){var n=document.createElement("canvas");n.width=1,n.height=1,e=a.default.createContext(n)}for(var i=e.createShader(e.FRAGMENT_SHADER);;){var o=u.replace(/%forloop%/gi,s(t));if(e.shaderSource(i,o),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return r&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t};var n,i=t("pixi-gl-core"),a=(n=i)&&n.__esModule?n:{default:n},u=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":35}],104:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return e[n.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[n.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[n.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.DST_ALPHA,t.ONE,t.DST_ALPHA],e[n.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_COLOR],e};var n=t("../../../const")},{"../../../const":52}],105:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e[n.DRAW_MODES.POINTS]=t.POINTS,e[n.DRAW_MODES.LINES]=t.LINES,e[n.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[n.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[n.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[n.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[n.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e};var n=t("../../../const")},{"../../../const":52}],106:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){t.getContextAttributes().stencil}},{}],107:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=n(t("./utils/maxRecommendedTextures")),o=n(t("./utils/canUploadSameBuffer"));r.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,i.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,o.default)(),MESH_CANVAS_PADDING:0}},{"./utils/canUploadSameBuffer":128,"./utils/maxRecommendedTextures":133}],108:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),o=t("../math"),s=t("../utils"),a=t("../const"),u=n(t("../textures/Texture")),h=n(t("../display/Container")),l=new o.Point,c=function(r){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,r.call(this));return e._anchor=new o.ObservablePoint(e._onAnchorUpdate,e),e._texture=null,e._width=0,e._height=0,e._tint=null,e._tintRGB=null,e.tint=16777215,e.blendMode=a.BLEND_MODES.NORMAL,e.shader=null,e.cachedTint=16777215,e.texture=t||u.default.EMPTY,e.vertexData=new Float32Array(8),e.vertexTrimmedData=null,e._transformID=-1,e._textureID=-1,e._transformTrimmedID=-1,e._textureTrimmedID=-1,e.pluginName="sprite",e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r),n.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,s.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,s.sign)(this.scale.y)*this._height/this._texture.orig.height)},n.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},n.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,o=e.d,s=e.tx,a=e.ty,u=this.vertexData,h=t.trim,l=t.orig,c=this._anchor,d=0,f=0,p=0,m=0;h?(d=(f=h.x-c._x*l.width)+h.width,p=(m=h.y-c._y*l.height)+h.height):(d=(f=-c._x*l.width)+l.width,p=(m=-c._y*l.height)+l.height),u[0]=r*f+i*m+s,u[1]=o*m+n*f+a,u[2]=r*d+i*m+s,u[3]=o*m+n*d+a,u[4]=r*d+i*p+s,u[5]=o*p+n*d+a,u[6]=r*f+i*p+s,u[7]=o*p+n*f+a}},n.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,n=this._anchor,i=this.transform.worldTransform,o=i.a,s=i.b,a=i.c,u=i.d,h=i.tx,l=i.ty,c=-n._x*r.width,d=c+r.width,f=-n._y*r.height,p=f+r.height;e[0]=o*c+a*f+h,e[1]=u*f+s*c+l,e[2]=o*d+a*f+h,e[3]=u*f+s*d+l,e[4]=o*d+a*p+h,e[5]=u*p+s*d+l,e[6]=o*c+a*p+h,e[7]=u*p+s*c+l},n.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},n.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},n.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},n.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):r.prototype.getLocalBounds.call(this,t)},n.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,l);var e=this._texture.orig.width,r=this._texture.orig.height,n=-e*this.anchor.x,i=0;return l.x>=n&&l.x<n+e&&(i=-r*this.anchor.y,l.y>=i&&l.y<i+r)},n.prototype.destroy=function(t){if(r.prototype.destroy.call(this,t),this._anchor=null,"boolean"==typeof t?t:t&&t.texture){var e="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!e)}this._texture=null,this.shader=null},n.from=function(t){return new n(u.default.from(t))},n.fromFrame=function(t){var e=s.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new n(e)},n.fromImage=function(t,e,r){return new n(u.default.fromImage(t,e,r))},i(n,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,s.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,s.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),n}(h.default);r.default=c},{"../const":52,"../display/Container":54,"../math":76,"../textures/Texture":121,"../utils":131}],109:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=n(t("../../renderers/canvas/CanvasRenderer")),l=t("../../const"),c=t("../../math"),d=n(t("./CanvasTinter")),f=new c.Matrix,o=function(){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),this.renderer=t}return e.prototype.render=function(t){var e=t._texture,r=this.renderer,n=e._frame.width,i=e._frame.height,o=t.transform.worldTransform,s=0,a=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(r.setBlendMode(t.blendMode),e.valid)){r.context.globalAlpha=t.worldAlpha;var u=e.baseTexture.scaleMode===l.SCALE_MODES.LINEAR;r.smoothProperty&&r.context[r.smoothProperty]!==u&&(r.context[r.smoothProperty]=u),e.trim?(s=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,a=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(s=(.5-t.anchor.x)*e.orig.width,a=(.5-t.anchor.y)*e.orig.height),e.rotate&&(o.copy(f),o=f,c.GroupD8.matrixAppendRotationInv(o,e.rotate,s,a),a=s=0),s-=n/2,a-=i/2,r.roundPixels?(r.context.setTransform(o.a,o.b,o.c,o.d,o.tx*r.resolution|0,o.ty*r.resolution|0),s|=0,a|=0):r.context.setTransform(o.a,o.b,o.c,o.d,o.tx*r.resolution,o.ty*r.resolution);var h=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=d.default.getTintedTexture(t,t.tint)),r.context.drawImage(t.tintedTexture,0,0,n*h,i*h,s*r.resolution,a*r.resolution,n*r.resolution,i*r.resolution)):r.context.drawImage(e.baseTexture.source,e._frame.x*h,e._frame.y*h,n*h,i*h,s*r.resolution,a*r.resolution,n*r.resolution,i*r.resolution)}},e.prototype.destroy=function(){this.renderer=null},e}();r.default=o,i.default.registerPlugin("sprite",o)},{"../../const":52,"../../math":76,"../../renderers/canvas/CanvasRenderer":83,"./CanvasTinter":110}],110:[function(t,e,r){"use strict";r.__esModule=!0;var n,f=t("../../utils"),i=t("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),a={getTintedTexture:function(t,e){var r=t._texture,n="#"+("00000"+(0|(e=a.roundColor(e))).toString(16)).substr(-6);r.tintCache=r.tintCache||{};var i=r.tintCache[n],o=void 0;if(i){if(i.tintId===r._updateID)return r.tintCache[n];o=r.tintCache[n]}else o=a.canvas||document.createElement("canvas");if(a.tintMethod(r,e,o),o.tintId=r._updateID,a.convertTintToImage){var s=new Image;s.src=o.toDataURL(),r.tintCache[n]=s}else r.tintCache[n]=o,a.canvas=null;return o},tintWithMultiply:function(t,e,r){var n=r.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),n.save(),n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.restore()},tintWithOverlay:function(t,e,r){var n=r.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),n.save(),n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.restore()},tintWithPerPixel:function(t,e,r){var n=r.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),n.save(),n.globalCompositeOperation="copy",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.restore();for(var s=(0,f.hex2rgb)(e),a=s[0],u=s[1],h=s[2],l=n.getImageData(0,0,i.width,i.height),c=l.data,d=0;d<c.length;d+=4)c[d+0]*=a,c[d+1]*=u,c[d+2]*=h;n.putImageData(l,0,0)},roundColor:function(t){var e=a.cacheStepsPerColorChannel,r=(0,f.hex2rgb)(t);return r[0]=Math.min(255,r[0]/e*e),r[1]=Math.min(255,r[1]/e*e),r[2]=Math.min(255,r[2]/e*e),(0,f.rgb2hex)(r)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,((n=i)&&n.__esModule?n:{default:n}).default)(),tintMethod:0};a.tintMethod=a.canUseMultiply?a.tintWithMultiply:a.tintWithPerPixel,r.default=a},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":86,"../../utils":131}],111:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),this.vertices=new ArrayBuffer(t),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return e.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},e}();r.default=n},{}],112:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=n(t("../../renderers/webgl/utils/ObjectRenderer")),o=n(t("../../renderers/webgl/WebGLRenderer")),s=n(t("../../utils/createIndicesForQuads")),a=n(t("./generateMultiTextureShader")),u=n(t("../../renderers/webgl/utils/checkMaxIfStatmentsInShader")),h=n(t("./BatchBuffer")),F=n(t("../../settings")),N=t("../../utils"),j=n(t("pixi-gl-core")),U=n(t("bit-twiddle")),q=0,W=0,l=function(i){function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,t));e.vertSize=5,e.vertByteSize=4*e.vertSize,e.size=F.default.SPRITE_BATCH_SIZE,e.buffers=[];for(var r=1;r<=U.default.nextPow2(e.size);r*=2)e.buffers.push(new h.default(4*r*e.vertByteSize));e.indices=(0,s.default)(e.size),e.shader=null,e.currentIndex=0,e.groups=[];for(var n=0;n<e.size;n++)e.groups[n]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return e.sprites=[],e.vertexBuffers=[],e.vaos=[],e.vaoMax=2,e.vertexCount=0,e.renderer.on("prerender",e.onPrerender,e),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,i),o.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),F.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,u.default)(this.MAX_TEXTURES,t)),this.shader=(0,a.default)(t,this.MAX_TEXTURES),this.indexBuffer=j.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,r=0;r<this.vaoMax;r++){var n=this.vertexBuffers[r]=j.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),i=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(n,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(n,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&i.addAttribute(n,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[r]=i}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},o.prototype.onPrerender=function(){this.vertexCount=0},o.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},o.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,r=U.default.nextPow2(this.currentIndex),n=U.default.log2(r),i=this.buffers[n],o=this.sprites,s=this.groups,a=i.float32View,u=i.uint32View,h=this.boundTextures,l=this.renderer.boundTextures,c=this.renderer.textureGC.count,d=0,f=void 0,p=void 0,m=1,g=0,v=s[0],y=void 0,b=void 0,x=N.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];v.textureCount=0,v.start=0,v.blend=x,q++;var w=void 0;for(w=0;w<e;++w){var _=l[w];_._enabled!==q?((h[w]=_)._virtalBoundId=w,_._enabled=q):h[w]=this.renderer.emptyTextures[w]}for(q++,w=0;w<this.currentIndex;++w){var T=o[w];f=T._texture.baseTexture;var E=N.premultiplyBlendMode[Number(f.premultipliedAlpha)][T.blendMode];if(x!==E&&(x=E,p=null,g=e,q++),p!==f&&(p=f)._enabled!==q){if(g===e&&(q++,v.size=w-v.start,g=0,(v=s[m++]).blend=x,v.textureCount=0,v.start=w),f.touched=c,-1===f._virtalBoundId)for(var S=0;S<e;++S){var C=(S+W)%e,O=h[C];if(O._enabled!==q){W++,O._virtalBoundId=-1,h[f._virtalBoundId=C]=f;break}}f._enabled=q,v.textureCount++,v.ids[g]=f._virtalBoundId,v.textures[g++]=f}if(y=T.vertexData,b=T._texture._uvs.uvsUint32,this.renderer.roundPixels){var P=this.renderer.resolution;a[d]=(y[0]*P|0)/P,a[d+1]=(y[1]*P|0)/P,a[d+5]=(y[2]*P|0)/P,a[d+6]=(y[3]*P|0)/P,a[d+10]=(y[4]*P|0)/P,a[d+11]=(y[5]*P|0)/P,a[d+15]=(y[6]*P|0)/P,a[d+16]=(y[7]*P|0)/P}else a[d]=y[0],a[d+1]=y[1],a[d+5]=y[2],a[d+6]=y[3],a[d+10]=y[4],a[d+11]=y[5],a[d+15]=y[6],a[d+16]=y[7];u[d+2]=b[0],u[d+7]=b[1],u[d+12]=b[2],u[d+17]=b[3];var A=Math.min(T.worldAlpha,1),M=A<1&&f.premultipliedAlpha?(0,N.premultiplyTint)(T._tintRGB,A):T._tintRGB+(255*A<<24);u[d+3]=u[d+8]=u[d+13]=u[d+18]=M,a[d+4]=a[d+9]=a[d+14]=a[d+19]=f._virtalBoundId,d+=20}if(v.size=w-v.start,F.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var I=this.shader.attributes,R=this.vertexBuffers[this.vertexCount]=j.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),k=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(R,I.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(R,I.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(R,I.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);I.aTextureId&&k.addAttribute(R,I.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=k}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!1),this.vertexCount++}for(w=0;w<e;++w)l[w]._virtalBoundId=-1;for(w=0;w<m;++w){for(var D=s[w],L=D.textureCount,B=0;B<L;B++)p=D.textures[B],l[D.ids[B]]!==p&&this.renderer.bindTexture(p,D.ids[B],!0),p._virtalBoundId=-1;this.renderer.state.setBlendMode(D.blend),t.drawElements(t.TRIANGLES,6*D.size,t.UNSIGNED_SHORT,6*D.start*2)}this.currentIndex=0}},o.prototype.start=function(){this.renderer.bindShader(this.shader),F.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},o.prototype.stop=function(){this.flush()},o.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),i.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var e=0;e<this.buffers.length;++e)this.buffers[e].destroy()},o}(i.default);r.default=l,o.default.registerPlugin("sprite",l)},{"../../renderers/webgl/WebGLRenderer":90,"../../renderers/webgl/utils/ObjectRenderer":100,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":103,"../../settings":107,"../../utils":131,"../../utils/createIndicesForQuads":129,"./BatchBuffer":111,"./generateMultiTextureShader":113,"bit-twiddle":11,"pixi-gl-core":35}],113:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e){var r=a;r=(r=r.replace(/%count%/gi,e)).replace(/%forloop%/gi,function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(textureId == "+r+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}(e));for(var n=new s.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",r),i=[],o=0;o<e;o++)i[o]=o;return n.bind(),n.uniforms.uSamplers=i,n};var n,i=t("../../Shader"),s=(n=i)&&n.__esModule?n:{default:n},a=(t("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},{"../../Shader":50,path:28}],114:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),o=n(t("../sprites/Sprite")),a=n(t("../textures/Texture")),u=t("../math"),h=t("../utils"),m=t("../const"),l=n(t("../settings")),c=n(t("./TextStyle")),v=n(t("./TextMetrics")),d=n(t("../utils/trimCanvas")),f={texture:!0,children:!1,baseTexture:!0},s=function(o){function s(t,e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,s),(r=r||document.createElement("canvas")).width=3,r.height=3;var n=a.default.fromCanvas(r,l.default.SCALE_MODE,"text");n.orig=new u.Rectangle,n.trim=new u.Rectangle;var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this,n));return a.default.addToCache(i._texture,i._texture.baseTexture.textureCacheIds[0]),i.canvas=r,i.context=i.canvas.getContext("2d"),i.resolution=l.default.RESOLUTION,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=t,i.style=e,i.localStyleID=-1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,o),s.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var r=this.context,n=v.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),i=n.width,o=n.height,s=n.lines,a=n.lineHeight,u=n.lineWidths,h=n.maxLineWidth,l=n.fontProperties;this.canvas.width=Math.ceil((Math.max(1,i)+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*e.padding)*this.resolution),r.scale(this.resolution,this.resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.strokeStyle=e.stroke,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;var c=void 0,d=void 0;if(e.dropShadow){r.fillStyle=e.dropShadowColor,r.globalAlpha=e.dropShadowAlpha,r.shadowBlur=e.dropShadowBlur,0<e.dropShadowBlur&&(r.shadowColor=e.dropShadowColor);for(var f=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,p=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,m=0;m<s.length;m++)c=e.strokeThickness/2,d=e.strokeThickness/2+m*a+l.ascent,"right"===e.align?c+=h-u[m]:"center"===e.align&&(c+=(h-u[m])/2),e.fill&&(this.drawLetterSpacing(s[m],c+f+e.padding,d+p+e.padding),e.stroke&&e.strokeThickness&&(r.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(s[m],c+f+e.padding,d+p+e.padding,!0),r.strokeStyle=e.stroke))}r.shadowBlur=0,r.globalAlpha=1,r.fillStyle=this._generateFillStyle(e,s);for(var g=0;g<s.length;g++)c=e.strokeThickness/2,d=e.strokeThickness/2+g*a+l.ascent,"right"===e.align?c+=h-u[g]:"center"===e.align&&(c+=(h-u[g])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(s[g],c+e.padding,d+e.padding,!0),e.fill&&this.drawLetterSpacing(s[g],c+e.padding,d+e.padding);this.updateTexture()}},s.prototype.drawLetterSpacing=function(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=this._style.letterSpacing;if(0!==i)for(var o=String.prototype.split.call(t,""),s=e,a=0,u="";a<t.length;)u=o[a++],n?this.context.strokeText(u,s,r):this.context.fillText(u,s,r),s+=this.context.measureText(u).width+i;else n?this.context.strokeText(t,e,r):this.context.fillText(t,e,r)},s.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,d.default)(t);t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0)}var r=this._texture,n=this._style,i=n.trim?0:n.padding,o=r.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=t.width,o.realHeight=t.height,o.width=t.width/this.resolution,o.height=t.height/this.resolution,r.trim.width=r._frame.width=t.width/this.resolution,r.trim.height=r._frame.height=t.height/this.resolution,r.trim.x=-i,r.trim.y=-i,r.orig.width=r._frame.width-2*i,r.orig.height=r._frame.height-2*i,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},s.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),o.prototype.renderWebGL.call(this,t)},s.prototype._renderCanvas=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),o.prototype._renderCanvas.call(this,t)},s.prototype.getLocalBounds=function(t){return this.updateText(!0),o.prototype.getLocalBounds.call(this,t)},s.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},s.prototype._onStyleChange=function(){this.dirty=!0},s.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var r=void 0,n=void 0,i=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,u=t.fill.slice(),h=t.fillGradientStops.slice();if(!h.length)for(var l=u.length+1,c=1;c<l;++c)h.push(c/l);if(u.unshift(t.fill[0]),h.unshift(0),u.push(t.fill[t.fill.length-1]),h.push(1),t.fillGradientType===m.TEXT_GRADIENT.LINEAR_VERTICAL){r=this.context.createLinearGradient(s/2,0,s/2,a),n=(u.length+1)*e.length;for(var d=i=0;d<e.length;d++){i+=1;for(var f=0;f<u.length;f++)o="number"==typeof h[f]?h[f]/e.length+d/e.length:i/n,r.addColorStop(o,u[f]),i++}}else{r=this.context.createLinearGradient(0,a/2,s,a/2),n=u.length+1,i=1;for(var p=0;p<u.length;p++)o="number"==typeof h[p]?h[p]:i/n,r.addColorStop(o,u[p]),i++}return r},s.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},f,t),o.prototype.destroy.call(this,t),this.context=null,this.canvas=null,this._style=null},i(s,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,h.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,h.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){(t=t||{})instanceof c.default?this._style=t:this._style=new c.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null==t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),s}(o.default);r.default=s},{"../const":52,"../math":76,"../settings":107,"../sprites/Sprite":108,"../textures/Texture":121,"../utils":131,"../utils/trimCanvas":136,"./TextMetrics":115,"./TextStyle":116}],115:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function y(t,e,r,n,i,o,s,a,u){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,y),this.text=t,this.style=e,this.width=r,this.height=n,this.lines=i,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=u}return y.measureText=function(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:y._canvas;r=r||e.wordWrap;var i=e.toFontString(),o=y.measureFont(i),s=n.getContext("2d");s.font=i;for(var a=(r?y.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),u=new Array(a.length),h=0,l=0;l<a.length;l++){var c=s.measureText(a[l]).width+(a[l].length-1)*e.letterSpacing;u[l]=c,h=Math.max(h,c)}var d=h+e.strokeThickness;e.dropShadow&&(d+=e.dropShadowDistance);var f=e.lineHeight||o.fontSize+e.strokeThickness,p=Math.max(f,o.fontSize+e.strokeThickness)+(a.length-1)*(f+e.leading);return e.dropShadow&&(p+=e.dropShadowDistance),new y(t,e,d,p,a,u,f+e.leading,h,o)},y.wordWrap=function(t,e){for(var r=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:y._canvas).getContext("2d"),n="",i=0,o="",s={},a=e.letterSpacing,u=e.wordWrapWidth+e.letterSpacing,h=y.getFromCache(" ",a,s,r),l=t.split(" "),c=0;c<l.length;c++){var d=l[c],f=y.getFromCache(d,a,s,r);if(u<f)if(e.breakWords)for(var p=(0<n.length?" "+d:d).split(""),m=0;m<p.length;m++){var g=p[m],v=y.getFromCache(g,a,s,r);u<v+i&&(o+=y.addLine(n),n="",i=0),n+=g,i+=v}else 0<n.length&&(o+=y.addLine(n),n="",i=0),o+=y.addLine(d),n="",i=0;else u<f+i&&(o+=y.addLine(n),n="",i=0),0<n.length?n+=" "+d:n+=d,i+=f+h}return o+y.addLine(n,!1)},y.addLine=function(t){return 1<arguments.length&&void 0!==arguments[1]&&!arguments[1]?t:t+"\n"},y.getFromCache=function(t,e,r,n){var i=r[t];if(void 0===i){var o=t.length*e;i=n.measureText(t).width+o,r[t]=i}return i},y.measureFont=function(t){if(y._fonts[t])return y._fonts[t];var e={},r=y._canvas,n=y._context;n.font=t;var i=Math.ceil(n.measureText("|Mq").width),o=Math.ceil(n.measureText("M").width),s=2*o;o=1.4*o|0,r.width=i,r.height=s,n.fillStyle="#f00",n.fillRect(0,0,i,s),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|Mq",0,o);var a=n.getImageData(0,0,i,s).data,u=a.length,h=4*i,l=0,c=0,d=!1;for(l=0;l<o;++l){for(var f=0;f<h;f+=4)if(255!==a[c+f]){d=!0;break}if(d)break;c+=h}for(e.ascent=o-l,c=u-h,d=!1,l=s;o<l;--l){for(var p=0;p<h;p+=4)if(255!==a[c+p]){d=!0;break}if(d)break;c-=h}return e.descent=l-o,e.fontSize=e.ascent+e.descent,y._fonts[t]=e},y}();r.default=n;var i=document.createElement("canvas");i.width=i.height=10,n._canvas=i,n._context=i.getContext("2d"),n._fonts={}},{}],116:[function(t,e,r){"use strict";function n(t){return"number"==typeof t?(0,u.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function i(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=n(t[e]);return t}return n(t)}function o(t,e,r){for(var n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}r.__esModule=!0;var s=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),a=t("../const"),u=t("../utils"),h={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:a.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100,leading:0},l=function(){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),this.styleID=0,this.reset(),o(this,t,t)}return e.prototype.clone=function(){var t={};return o(t,this,h),new e(t)},e.prototype.reset=function(){o(this,h,h)},e.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var r=e.length-1;0<=r;r--){var n=e[r].trim();/([\"\'])[^\'\"]+\1/.test(n)||(n='"'+n+'"'),e[r]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},s(e,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=i(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=i(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=i(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),e}();r.default=l},{"../const":52,"../utils":131}],117:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=n(t("./BaseTexture")),a=n(t("../settings")),o=function(o){function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,r=arguments[2],n=arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this,null,r));return i.resolution=n||a.default.RESOLUTION,i.width=Math.ceil(t),i.height=Math.ceil(e),i.realWidth=i.width*i.resolution,i.realHeight=i.height*i.resolution,i.scaleMode=void 0!==r?r:a.default.SCALE_MODE,i.hasLoaded=!0,i._glRenderTargets={},i._canvasRenderTarget=null,i.valid=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,o),s.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),t===this.width&&e===this.height||(this.valid=0<t&&0<e,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},s.prototype.destroy=function(){o.prototype.destroy.call(this,!0),this.renderer=null},s}(i.default);r.default=o},{"../settings":107,"./BaseTexture":118}],118:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var a=t("../utils"),o=n(t("../settings")),i=n(t("eventemitter3")),u=n(t("../utils/determineCrossOrigin")),h=n(t("bit-twiddle")),s=function(i){function s(t,e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this));return n.uid=(0,a.uid)(),n.touched=0,n.resolution=r||o.default.RESOLUTION,n.width=100,n.height=100,n.realWidth=100,n.realHeight=100,n.scaleMode=void 0!==e?e:o.default.SCALE_MODE,n.hasLoaded=!1,n.isLoading=!1,n.source=null,n.origSource=null,n.imageType=null,n.sourceScale=1,n.premultipliedAlpha=!0,n.imageUrl=null,n.isPowerOfTwo=!1,n.mipmap=o.default.MIPMAP_TEXTURES,n.wrapMode=o.default.WRAP_MODE,n._glTextures={},n._enabled=0,n._virtalBoundId=-1,n._destroyed=!1,n.textureCacheIds=[],t&&n.loadSource(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,i),s.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},s.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=h.default.isPow2(this.realWidth)&&h.default.isPow2(this.realHeight)},s.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var r=!this.source;if(((this.source=t).src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),r&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var n=this;if(t.onload=function(){if(n._updateImageType(),t.onload=null,t.onerror=null,n.isLoading){if(n.isLoading=!1,n._sourceLoaded(),"svg"===n.imageType)return void n._loadSvgSource();n.emit("loaded",n)}},t.onerror=function(){t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===n.imageType)return void n._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},s.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,a.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var r=t.subType.split("+")[0];if(!(e=(0,a.getUrlFileExtension)("."+r)))throw new Error("Invalid image type in data URI.")}else(e=(0,a.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},s.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,a.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},s.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},s.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},s.prototype._loadSvgSourceUsingString=function(t){var e=(0,a.getSvgSize)(t),r=e.width,n=e.height;if(!r||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(n*this.sourceScale),this._updateDimensions();var i=document.createElement("canvas");i.width=this.realWidth,i.height=this.realHeight,i._pixiId="canvas_"+(0,a.uid)(),i.getContext("2d").drawImage(this.source,0,0,r,n,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=i,s.addToCache(this,i._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},s.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},s.prototype.destroy=function(){this.imageUrl&&(delete a.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),s.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},s.prototype.dispose=function(){this.emit("dispose",this)},s.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},s.fromImage=function(t,e,r,n){var i=a.BaseTextureCache[t];if(!i){var o=new Image;void 0===e&&0!==t.indexOf("data:")?o.crossOrigin=(0,u.default)(t):e&&(o.crossOrigin="string"==typeof e?e:"anonymous"),(i=new s(o,r)).imageUrl=t,n&&(i.sourceScale=n),i.resolution=(0,a.getResolutionOfUrl)(t),o.src=t,s.addToCache(i,t)}return i},s.fromCanvas=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=r+"_"+(0,a.uid)());var n=a.BaseTextureCache[t._pixiId];return n||(n=new s(t,e),s.addToCache(n,t._pixiId)),n},s.from=function(t,e,r){if("string"==typeof t)return s.fromImage(t,void 0,e,r);if(t instanceof HTMLImageElement){var n=t.src,i=a.BaseTextureCache[n];return i||((i=new s(t,e)).imageUrl=n,r&&(i.sourceScale=r),i.resolution=(0,a.getResolutionOfUrl)(n),s.addToCache(i,n)),i}return t instanceof HTMLCanvasElement?s.fromCanvas(t,e):t},s.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),a.BaseTextureCache[e],a.BaseTextureCache[e]=t)},s.removeFromCache=function(t){if("string"==typeof t){var e=a.BaseTextureCache[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete a.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete a.BaseTextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},s}(i.default);r.default=s},{"../settings":107,"../utils":131,"../utils/determineCrossOrigin":130,"bit-twiddle":11,eventemitter3:21}],119:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var l=n(t("./BaseRenderTexture")),i=function(u){function h(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);var r=null;if(!(t instanceof l.default)){var n=e,i=arguments[2],o=arguments[3],s=arguments[4];r=t,e=null,t=new l.default(n,i,o,s)}var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,u.call(this,t,e));return a.legacyRenderer=r,a.valid=!0,a._updateUvs(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,u),h.prototype.resize=function(t,e,r){t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r||this.baseTexture.resize(t,e),this._updateUvs()},h.create=function(t,e,r,n){return new h(new l.default(t,e,r,n))},h}(n(t("./Texture")).default);r.default=i},{"./BaseRenderTexture":117,"./Texture":121}],120:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),d=t("../"),i=t("../utils"),o=function(){function c(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,c),this.baseTexture=t,this.textures={},this.data=e,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return n(c,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),c.prototype._updateResolution=function(t){var e=this.data.meta.scale,r=(0,i.getResolutionOfUrl)(t,null);return null===r&&(r=void 0!==e?parseFloat(e):1),1!==r&&(this.baseTexture.resolution=r,this.baseTexture.update()),r},c.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=c.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},c.prototype._processFrames=function(t){for(var e=t,r=c.BATCH_SIZE,n=this.baseTexture.sourceScale;e-t<r&&e<this._frameKeys.length;){var i=this._frameKeys[e],o=this._frames[i],s=o.frame;if(s){var a,u=null,h=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,l=new d.Rectangle(0,0,Math.floor(h.w*n)/this.resolution,Math.floor(h.h*n)/this.resolution);a=o.rotated?new d.Rectangle(Math.floor(s.x*n)/this.resolution,Math.floor(s.y*n)/this.resolution,Math.floor(s.h*n)/this.resolution,Math.floor(s.w*n)/this.resolution):new d.Rectangle(Math.floor(s.x*n)/this.resolution,Math.floor(s.y*n)/this.resolution,Math.floor(s.w*n)/this.resolution,Math.floor(s.h*n)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(u=new d.Rectangle(Math.floor(o.spriteSourceSize.x*n)/this.resolution,Math.floor(o.spriteSourceSize.y*n)/this.resolution,Math.floor(s.w*n)/this.resolution,Math.floor(s.h*n)/this.resolution)),this.textures[i]=new d.Texture(this.baseTexture,a,l,u,o.rotated?2:0),d.Texture.addToCache(this.textures[i],i)}e++}},c.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},c.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*c.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*c.BATCH_SIZE<t._frameKeys.length?t._nextBatch():t._parseComplete()},0)},c.prototype.destroy=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},c}();r.default=o},{"../":71,"../utils":131}],121:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}r.__esModule=!0;var o=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),u=n(t("./BaseTexture")),h=n(t("./VideoBaseTexture")),l=n(t("./TextureUvs")),s=n(t("eventemitter3")),c=t("../math"),d=t("../utils"),f=n(t("../settings")),a=function(s){function a(t,e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this));if(o.noFrame=!1,e||(o.noFrame=!0,e=new c.Rectangle(0,0,1,1)),t instanceof a&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=n,o.valid=!1,o.requiresUpdate=!1,o._uvs=null,o.orig=r||e,o._rotate=Number(i||0),!0===i)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return t.hasLoaded?(o.noFrame&&(e=new c.Rectangle(0,0,t.width,t.height),t.on("update",o.onBaseTextureUpdated,o)),o.frame=e):t.once("loaded",o.onBaseTextureLoaded,o),o._updateID=0,o.transform=null,o.textureCacheIds=[],o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,s),a.prototype.update=function(){this.baseTexture.update()},a.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new c.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},a.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},a.prototype.destroy=function(t){this.baseTexture&&(t&&(d.TextureCache[this.baseTexture.imageUrl]&&a.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,a.removeFromCache(this),this.textureCacheIds=null},a.prototype.clone=function(){return new a(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},a.prototype._updateUvs=function(){this._uvs||(this._uvs=new l.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},a.fromImage=function(t,e,r,n){var i=d.TextureCache[t];return i||(i=new a(u.default.fromImage(t,e,r,n)),a.addToCache(i,t)),i},a.fromFrame=function(t){var e=d.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},a.fromCanvas=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";return new a(u.default.fromCanvas(t,e,r))},a.fromVideo=function(t,e){return"string"==typeof t?a.fromVideoUrl(t,e):new a(h.default.fromVideo(t,e))},a.fromVideoUrl=function(t,e){return new a(h.default.fromUrl(t,e))},a.from=function(t){if("string"==typeof t){var e=d.TextureCache[t];return e||(null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?a.fromVideoUrl(t):a.fromImage(t))}return t instanceof HTMLImageElement?new a(u.default.from(t)):t instanceof HTMLCanvasElement?a.fromCanvas(t,f.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?a.fromVideo(t):t instanceof u.default?new a(t):t},a.fromLoader=function(t,e,r){var n=new u.default(t,void 0,(0,d.getResolutionOfUrl)(e)),i=new a(n);return n.imageUrl=e,r||(r=e),u.default.addToCache(i.baseTexture,r),a.addToCache(i,r),r!==e&&(u.default.addToCache(i.baseTexture,e),a.addToCache(i,e)),i},a.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),d.TextureCache[e],d.TextureCache[e]=t)},a.removeFromCache=function(t){if("string"==typeof t){var e=d.TextureCache[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete d.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)d.TextureCache[t.textureCacheIds[n]]===t&&delete d.TextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},o(a,[{key:"frame",get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,n=t.width,i=t.height,o=e+n>this.baseTexture.width,s=r+i>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",u="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,h="Y: "+r+" + "+i+" = "+(r+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+a+" "+h)}this.valid=n&&i&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),a}(s.default);(r.default=a).EMPTY=new a(new u.default),i(a.EMPTY),i(a.EMPTY.baseTexture),a.WHITE=function(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new a(new u.default(t))}(),i(a.WHITE),i(a.WHITE.baseTexture)},{"../math":76,"../settings":107,"../utils":131,"./BaseTexture":118,"./TextureUvs":123,"./VideoBaseTexture":124,eventemitter3:21}],122:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),o=t("../math/Matrix"),s=(n=o)&&n.__esModule?n:{default:n},h=new s.default,a=function(){function r(t,e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,r),this._texture=t,this.mapCoord=new s.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===e?.5:e}return r.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,n=0;n<t.length;n+=2){var i=t[n],o=t[n+1];e[n]=i*r.a+o*r.c+r.tx,e[n+1]=i*r.b+o*r.d+r.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=e.orig,i=e.trim;i&&(h.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(h));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,u=this.clampOffset;return s[0]=(e._frame.x+a+u)/o.width,s[1]=(e._frame.y+a+u)/o.height,s[2]=(e._frame.x+e._frame.width-a+u)/o.width,s[3]=(e._frame.y+e._frame.height-a+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,!0},i(r,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),r}();r.default=a},{"../math/Matrix":73}],123:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=t("../math/GroupD8"),h=(n=i)&&n.__esModule?n:{default:n},o=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,r){var n=e.width,i=e.height;if(r){var o=t.width/2/n,s=t.height/2/i,a=t.x/n+o,u=t.y/i+s;r=h.default.add(r,h.default.NW),this.x0=a+o*h.default.uX(r),this.y0=u+s*h.default.uY(r),r=h.default.add(r,2),this.x1=a+o*h.default.uX(r),this.y1=u+s*h.default.uY(r),r=h.default.add(r,2),this.x2=a+o*h.default.uX(r),this.y2=u+s*h.default.uY(r),r=h.default.add(r,2),this.x3=a+o*h.default.uX(r),this.y3=u+s*h.default.uY(r)}else this.x0=t.x/n,this.y0=t.y/i,this.x1=(t.x+t.width)/n,this.y1=t.y/i,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/i,this.x3=t.x/n,this.y3=(t.y+t.height)/i;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},t}();r.default=o},{"../math/GroupD8":72}],124:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=t,r.type=e,r}r.__esModule=!0;var i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),o=n(t("./BaseTexture")),u=t("../utils"),h=t("../ticker"),l=t("../const"),c=n(t("../utils/determineCrossOrigin")),s=function(n){function s(t,e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t,e));return r.width=t.videoWidth,r.height=t.videoHeight,r._autoUpdate=!0,r._isAutoUpdating=!1,r.autoPlay=!0,r.update=r.update.bind(r),r._onCanPlay=r._onCanPlay.bind(r),t.addEventListener("play",r._onPlayStart.bind(r)),t.addEventListener("pause",r._onPlayStop.bind(r)),r.hasLoaded=!1,r.__loaded=!1,r._isSourceReady()?r._onCanPlay():(t.addEventListener("canplay",r._onCanPlay),t.addEventListener("canplaythrough",r._onCanPlay)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,n),s.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},s.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},s.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(h.shared.add(this.update,this,l.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},s.prototype._onPlayStop=function(){this._isAutoUpdating&&(h.shared.remove(this.update,this),this._isAutoUpdating=!1)},s.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},s.prototype.destroy=function(){this._isAutoUpdating&&h.shared.remove(this.update,this),this.source&&this.source._pixiId&&(o.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),n.prototype.destroy.call(this)},s.fromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+(0,u.uid)());var r=u.BaseTextureCache[t._pixiId];return r||(r=new s(t,e),o.default.addToCache(r,t._pixiId)),r},s.fromUrl=function(t,e,r){var n=document.createElement("video");n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","");var i=Array.isArray(t)?t[0].src||t[0]:t.src||t;if(void 0===r&&0!==i.indexOf("data:")?n.crossOrigin=(0,c.default)(i):r&&(n.crossOrigin="string"==typeof r?r:"anonymous"),Array.isArray(t))for(var o=0;o<t.length;++o)n.appendChild(a(t[o].src||t[o],t[o].mime));else n.appendChild(a(i,t.mime));return n.load(),s.fromVideo(n,e)},i(s,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(h.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(h.shared.add(this.update,this,l.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),s}(o.default);(r.default=s).fromUrls=s.fromUrl},{"../const":52,"../ticker":127,"../utils":131,"../utils/determineCrossOrigin":130,"./BaseTexture":118}],125:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),o=n(t("../settings")),s=t("../const"),a=n(t("./TickerListener")),u=function(){function t(){var e=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._head=new a.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/o.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:s.UPDATE_PRIORITY.NORMAL;return this._addListener(new a.default(t,e,r))},t.prototype.addOnce=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:s.UPDATE_PRIORITY.NORMAL;return this._addListener(new a.default(t,e,r,!0))},t.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){(e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*o.default.TARGET_FPMS*this.speed;for(var r=this._head,n=r.next;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},i(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,o.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();r.default=u},{"../const":52,"../settings":107,"./TickerListener":126}],126:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,i),this.fn=t,this.context=e,this.priority=r,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}return i.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},i.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},i.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},i.prototype.destroy=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.previous;return this.next=t?null:e,this.previous=null,e},i}();r.default=n},{}],127:[function(t,e,r){"use strict";r.__esModule=!0,r.Ticker=r.shared=void 0;var n,i=t("./Ticker"),o=(n=i)&&n.__esModule?n:{default:n},s=new o.default;s.autoStart=!0,s.destroy=function(){},r.shared=s,r.Ticker=o.default},{"./Ticker":125}],128:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},{}],129:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){for(var e=6*t,r=new Uint16Array(e),n=0,i=0;n<e;n+=6,i+=4)r[n+0]=i+0,r[n+1]=i+1,r[n+2]=i+2,r[n+3]=i+0,r[n+4]=i+2,r[n+5]=i+3;return r}},{}],130:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,s||(s=document.createElement("a")),s.href=t;var r=!(t=o.default.parse(s.href)).port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&r&&t.protocol===e.protocol?"":"anonymous"};var n,i=t("url"),o=(n=i)&&n.__esModule?n:{default:n},s=void 0},{url:209}],131:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.premultiplyBlendMode=r.BaseTextureCache=r.TextureCache=r.earcut=r.mixins=r.pluginTarget=r.EventEmitter=r.removeItems=r.isMobile=void 0,r.uid=function(){return++p},r.hex2rgb=function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},r.hex2string=function(t){return t=t.toString(16),"#"+("000000".substr(0,6-t.length)+t)},r.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},r.getResolutionOfUrl=function(t,e){var r=s.default.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):void 0!==e?e:1},r.decomposeDataUri=function(t){var e=o.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,encoding:e[3]?e[3].toLowerCase():void 0,data:e[4]}},r.getUrlFileExtension=function(t){var e=o.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase()},r.getSvgSize=function(t){var e=o.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r},r.skipHello=function(){m=!0},r.sayHello=function(t){if(!m){if(-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var e=["\n %c %c %c PixiJS "+o.VERSION+" -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS "+o.VERSION+" - "+t+" - http://www.pixijs.com/");m=!0}},r.isWebGLSupported=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!r||!r.getContextAttributes().stencil);if(r){var i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,n}catch(t){return!1}},r.sign=function(t){return 0===t?0:t<0?-1:1},r.destroyTextureCache=function(){var t=void 0;for(t in g)g[t].destroy();for(t in v)v[t].destroy()},r.clearTextureCache=function(){var t=void 0;for(t in g)delete g[t];for(t in v)delete v[t]},r.correctBlendMode=function(t,e){return y[e?1:0][t]},r.premultiplyTint=function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var r=t>>16&255,n=t>>8&255,i=255&t;return(255*e<<24)+((r=r*e+.5|0)<<16)+((n=n*e+.5|0)<<8)+(i=i*e+.5|0)},r.premultiplyRgba=function(t,e,r,n){return r=r||new Float32Array(4),n||void 0===n?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r},r.premultiplyTintToRgba=function(t,e,r,n){return(r=r||new Float32Array(4))[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,(n||void 0===n)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r};var o=t("../const"),s=i(t("../settings")),a=i(t("eventemitter3")),u=i(t("./pluginTarget")),h=n(t("./mixin")),l=n(t("ismobilejs")),c=i(t("remove-array-items")),d=i(t("./mapPremultipliedBlendModes")),f=i(t("earcut")),p=0,m=!1;r.isMobile=l,r.removeItems=c.default,r.EventEmitter=a.default,r.pluginTarget=u.default,r.mixins=h,r.earcut=f.default;var g=r.TextureCache=Object.create(null),v=r.BaseTextureCache=Object.create(null),y=r.premultiplyBlendMode=(0,d.default)()},{"../const":52,"../settings":107,"./mapPremultipliedBlendModes":132,"./mixin":134,"./pluginTarget":135,earcut:20,eventemitter3:21,ismobilejs:23,"remove-array-items":201}],132:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[i.BLEND_MODES.NORMAL_NPM]=i.BLEND_MODES.NORMAL,t[i.BLEND_MODES.ADD_NPM]=i.BLEND_MODES.ADD,t[i.BLEND_MODES.SCREEN_NPM]=i.BLEND_MODES.SCREEN,e[i.BLEND_MODES.NORMAL]=i.BLEND_MODES.NORMAL_NPM,e[i.BLEND_MODES.ADD]=i.BLEND_MODES.ADD_NPM,e[i.BLEND_MODES.SCREEN]=i.BLEND_MODES.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n};var i=t("../const")},{"../const":52}],133:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){return o.default.tablet||o.default.phone?4:t};var n,i=t("ismobilejs"),o=(n=i)&&n.__esModule?n:{default:n}},{ismobilejs:23}],134:[function(t,e,r){"use strict";function n(t,e){if(t&&e)for(var r=Object.keys(e),n=0;n<r.length;++n){var i=r[n];Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}}r.__esModule=!0,r.mixin=n,r.delayMixin=function(t,e){i.push(t,e)},r.performMixins=function(){for(var t=0;t<i.length;t+=2)n(i[t],i[t+1]);i.length=0};var i=[]},{}],135:[function(t,e,r){"use strict";r.__esModule=!0,r.default={mixin:function(t){var r;(r=t).__plugins={},r.registerPlugin=function(t,e){r.__plugins[t]=e},r.prototype.initPlugins=function(){for(var t in this.plugins=this.plugins||{},r.__plugins)this.plugins[t]=new r.__plugins[t](this)},r.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}}},{}],136:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){var e=t.width,r=t.height,n=t.getContext("2d"),i=n.getImageData(0,0,e,r).data,o=i.length,s={top:null,left:null,right:null,bottom:null},a=void 0,u=void 0,h=void 0;for(a=0;a<o;a+=4)0!==i[a+3]&&(u=a/4%e,h=~~(a/4/e),null===s.top&&(s.top=h),null===s.left?s.left=u:u<s.left&&(s.left=u),null===s.right?s.right=u+1:s.right<u&&(s.right=u+1),null===s.bottom?s.bottom=h:s.bottom<h&&(s.bottom=h));return e=s.right-s.left,{height:r=s.bottom-s.top+1,width:e,data:n.getImageData(s.left,s.top,e,r)}}},{}],137:[function(t,e,r){"use strict";function f(t){if(!n[t]){var e=(new Error).stack;void 0===e||(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed),n[t]=!0}}r.__esModule=!0,r.default=function(r){var t=r.mesh,e=r.particles,n=r.extras,i=r.filters,o=r.prepare,s=r.loaders,a=r.interaction;Object.defineProperties(r,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return f("You do not need to use a PIXI Stage any more, you can simply render any container."),r.Container}},DisplayObjectContainer:{get:function(){return f("DisplayObjectContainer has been shortened to Container, please use Container from now on."),r.Container}},Strip:{get:function(){return f("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),t.Mesh}},Rope:{get:function(){return f("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),t.Rope}},ParticleContainer:{get:function(){return f("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),e.ParticleContainer}},MovieClip:{get:function(){return f("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),n.AnimatedSprite}},TilingSprite:{get:function(){return f("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),n.TilingSprite}},BitmapText:{get:function(){return f("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),n.BitmapText}},blendModes:{get:function(){return f("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),r.BLEND_MODES}},scaleModes:{get:function(){return f("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),r.SCALE_MODES}},BaseTextureCache:{get:function(){return f("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),r.utils.BaseTextureCache}},TextureCache:{get:function(){return f("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),r.utils.TextureCache}},math:{get:function(){return f("The math namespace is deprecated, please access members already accessible on PIXI."),r}},AbstractFilter:{get:function(){return f("AstractFilter has been renamed to Filter, please use PIXI.Filter"),r.Filter}},TransformManual:{get:function(){return f("TransformManual has been renamed to TransformBase, please update your pixi-spine"),r.TransformBase}},TARGET_FPMS:{get:function(){return f("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),r.settings.TARGET_FPMS},set:function(t){f("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),r.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{get:function(){return f("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),r.settings.FILTER_RESOLUTION},set:function(t){f("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),r.settings.FILTER_RESOLUTION=t}},RESOLUTION:{get:function(){return f("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),r.settings.RESOLUTION},set:function(t){f("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),r.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{get:function(){return f("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),r.settings.MIPMAP_TEXTURES},set:function(t){f("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),r.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{get:function(){return f("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),r.settings.SPRITE_BATCH_SIZE},set:function(t){f("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),r.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{get:function(){return f("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),r.settings.SPRITE_MAX_TEXTURES},set:function(t){f("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),r.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{get:function(){return f("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),r.settings.RETINA_PREFIX},set:function(t){f("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),r.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{get:function(){return f("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),r.settings.RENDER_OPTIONS}}});for(var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],h=0;h<u.length;h++)!function(t){var e=u[h];Object.defineProperty(r[e.parent],"DEFAULT",{get:function(){return f("PIXI."+e.parent+".DEFAULT has been deprecated, please use PIXI.settings."+e.target),r.settings[e.target]},set:function(t){f("PIXI."+e.parent+".DEFAULT has been deprecated, please use PIXI.settings."+e.target),r.settings[e.target]=t}})}();Object.defineProperties(r.settings,{PRECISION:{get:function(){return f("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),r.settings.PRECISION_FRAGMENT},set:function(t){f("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),r.settings.PRECISION_FRAGMENT=t}}}),n.AnimatedSprite&&Object.defineProperties(n,{MovieClip:{get:function(){return f("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),n.AnimatedSprite}}}),n&&Object.defineProperties(n,{TextureTransform:{get:function(){return f("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),r.TextureMatrix}}}),r.DisplayObject.prototype.generateTexture=function(t,e,r){return f("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,r)},r.Graphics.prototype.generateTexture=function(t,e){return f("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},r.GroupD8.isSwapWidthHeight=function(t){return f("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),r.GroupD8.isVertical(t)},r.RenderTexture.prototype.render=function(t,e,r,n){this.legacyRenderer.render(t,this,r,e,!n),f("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},r.RenderTexture.prototype.getImage=function(t){return f("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},r.RenderTexture.prototype.getBase64=function(t){return f("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},r.RenderTexture.prototype.getCanvas=function(t){return f("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},r.RenderTexture.prototype.getPixels=function(t){return f("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},r.Sprite.prototype.setTexture=function(t){this.texture=t,f("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},n.BitmapText&&(n.BitmapText.prototype.setText=function(t){this.text=t,f("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),r.Text.prototype.setText=function(t){this.text=t,f("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},r.Text.calculateFontProperties=function(t){return f("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),r.TextMetrics.measureFont(t)},Object.defineProperties(r.Text,{fontPropertiesCache:{get:function(){return f("Text.fontPropertiesCache is deprecated"),r.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return f("Text.fontPropertiesCanvas is deprecated"),r.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return f("Text.fontPropertiesContext is deprecated"),r.TextMetrics._context}}}),r.Text.prototype.setStyle=function(t){this.style=t,f("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},r.Text.prototype.determineFontProperties=function(t){return f("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),r.TextMetrics.measureFont(t)},r.Text.getFontStyle=function(t){return f("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(t=t||{})instanceof r.TextStyle||(t=new r.TextStyle(t)),t.toFontString()},Object.defineProperties(r.TextStyle.prototype,{font:{get:function(){f("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){f("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),1<t.indexOf("italic")?this._fontStyle="italic":-1<t.indexOf("oblique")?this._fontStyle="oblique":this._fontStyle="normal",-1<t.indexOf("small-caps")?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),r=-1;this._fontSize=26;for(var n=0;n<e.length;++n)if(e[n].match(/(px|pt|em|%)/)){r=n,this._fontSize=e[n];break}this._fontWeight="normal";for(var i=0;i<r;++i)if(e[i].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[i];break}if(-1<r&&r<e.length-1){this._fontFamily="";for(var o=r+1;o<e.length;++o)this._fontFamily+=e[o]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),r.Texture.prototype.setFrame=function(t){this.frame=t,f("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},r.Texture.addTextureToCache=function(t,e){r.Texture.addToCache(t,e),f("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},r.Texture.removeTextureFromCache=function(t){return f("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),r.BaseTexture.removeFromCache(t),r.Texture.removeFromCache(t)},Object.defineProperties(i,{AbstractFilter:{get:function(){return f("AstractFilter has been renamed to Filter, please use PIXI.Filter"),r.AbstractFilter}},SpriteMaskFilter:{get:function(){return f("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),r.SpriteMaskFilter}},VoidFilter:{get:function(){return f("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),i.AlphaFilter}}}),r.utils.uuid=function(){return f("utils.uuid() is deprecated, please use utils.uid() from now on."),r.utils.uid()},r.utils.canUseNewCanvasBlendModes=function(){return f("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),r.CanvasTinter.canUseMultiply};var l=!0;if(Object.defineProperty(r.utils,"_saidHello",{set:function(t){t&&(f("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),l=t},get:function(){return l}}),o.BasePrepare&&(o.BasePrepare.prototype.register=function(t,e){return f("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this}),o.canvas&&Object.defineProperty(o.canvas,"UPLOADS_PER_FRAME",{set:function(){f("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return f("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),o.webgl&&Object.defineProperty(o.webgl,"UPLOADS_PER_FRAME",{set:function(){f("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return f("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),s.Loader){var c=s.Resource,d=s.Loader;Object.defineProperties(c.prototype,{isJson:{get:function(){return f("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===c.TYPE.JSON}},isXml:{get:function(){return f("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===c.TYPE.XML}},isImage:{get:function(){return f("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===c.TYPE.IMAGE}},isAudio:{get:function(){return f("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===c.TYPE.AUDIO}},isVideo:{get:function(){return f("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===c.TYPE.VIDEO}}}),Object.defineProperties(d.prototype,{before:{get:function(){return f("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return f("The after() method is deprecated, please use use()."),this.use}}})}a.interactiveTarget&&Object.defineProperty(a.interactiveTarget,"defaultCursor",{set:function(t){f("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return f("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),a.InteractionManager&&(Object.defineProperty(a.InteractionManager,"defaultCursorStyle",{set:function(t){f("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return f("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(a.InteractionManager,"currentCursorStyle",{set:function(t){f("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return f("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))};var n={}},{}],138:[function(t,e,r){"use strict";r.__esModule=!0;var l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),c=new l.Rectangle,n=function(){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),(this.renderer=t).extract=this}return e.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},e.prototype.base64=function(t){return this.canvas(t).toDataURL()},e.prototype.canvas=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0;t&&(o=t instanceof l.RenderTexture?t:e.generateTexture(t)),o?(r=o.baseTexture._canvasRenderTarget.context,n=o.baseTexture._canvasRenderTarget.resolution,i=o.frame):(r=e.rootContext,(i=c).width=this.renderer.width,i.height=this.renderer.height);var s=i.width*n,a=i.height*n,u=new l.CanvasRenderTarget(s,a),h=r.getImageData(i.x*n,i.y*n,s,a);return u.context.putImageData(h,0,0),u.canvas},e.prototype.pixels=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0;return t&&(o=t instanceof l.RenderTexture?t:e.generateTexture(t)),o?(r=o.baseTexture._canvasRenderTarget.context,n=o.baseTexture._canvasRenderTarget.resolution,i=o.frame):(r=e.rootContext,(i=c).width=e.width,i.height=e.height),r.getImageData(0,0,i.width*n,i.height*n).data},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();r.default=n,l.CanvasRenderer.registerPlugin("extract",n)},{"../../core":71}],139:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./webgl/WebGLExtract");Object.defineProperty(r,"webgl",{enumerable:!0,get:function(){return n(i).default}});var o=t("./canvas/CanvasExtract");Object.defineProperty(r,"canvas",{enumerable:!0,get:function(){return n(o).default}})},{"./canvas/CanvasExtract":138,"./webgl/WebGLExtract":140}],140:[function(t,e,r){"use strict";r.__esModule=!0;var p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),m=new p.Rectangle,n=function(){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),(this.renderer=t).extract=this}return e.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},e.prototype.base64=function(t){return this.canvas(t).toDataURL()},e.prototype.canvas=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,o=!1,s=void 0,a=!1;t&&(t instanceof p.RenderTexture?s=t:(s=this.renderer.generateTexture(t),a=!0)),s?(n=(r=s.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,i=s.frame,o=!1):(n=(r=this.renderer.rootRenderTarget).resolution,o=!0,(i=m).width=r.size.width,i.height=r.size.height);var u=i.width*n,h=i.height*n,l=new p.CanvasRenderTarget(u,h);if(r){e.bindRenderTarget(r);var c=new Uint8Array(4*u*h),d=e.gl;d.readPixels(i.x*n,i.y*n,u,h,d.RGBA,d.UNSIGNED_BYTE,c);var f=l.context.getImageData(0,0,u,h);f.data.set(c),l.context.putImageData(f,0,0),o&&(l.context.scale(1,-1),l.context.drawImage(l.canvas,0,-h))}return a&&s.destroy(!0),l.canvas},e.prototype.pixels=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0,s=!1;t&&(t instanceof p.RenderTexture?o=t:(o=this.renderer.generateTexture(t),s=!0)),o?(n=(r=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,i=o.frame):(n=(r=this.renderer.rootRenderTarget).resolution,(i=m).width=r.size.width,i.height=r.size.height);var a=i.width*n,u=i.height*n,h=new Uint8Array(4*a*u);if(r){e.bindRenderTarget(r);var l=e.gl;l.readPixels(i.x*n,i.y*n,a,u,l.RGBA,l.UNSIGNED_BYTE,h)}return s&&o.destroy(!0),h},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();r.default=n,p.WebGLRenderer.registerPlugin("extract",n)},{"../../core":71}],141:[function(t,e,r){"use strict";r.__esModule=!0;var o=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),n=function(n){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t[0]instanceof s.Texture?t[0]:t[0].texture));return r._textures=null,r._durations=null,r.textures=t,r._autoUpdate=!1!==e,r.animationSpeed=1,r.loop=!0,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r.playing=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,n),i.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&s.ticker.shared.remove(this.update,this))},i.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&s.ticker.shared.add(this.update,this,s.UPDATE_PRIORITY.HIGH))},i.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},i.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},i.prototype.update=function(t){var e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(0<this.animationSpeed&&this.currentFrame<r?this.onLoop():this.animationSpeed<0&&this.currentFrame>r&&this.onLoop()),this.updateTexture())},i.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},i.prototype.destroy=function(t){this.stop(),n.prototype.destroy.call(this,t)},i.fromFrames=function(t){for(var e=[],r=0;r<t.length;++r)e.push(s.Texture.fromFrame(t[r]));return new i(e)},i.fromImages=function(t){for(var e=[],r=0;r<t.length;++r)e.push(s.Texture.fromImage(t[r]));return new i(e)},o(i,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof s.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),i}(s.Sprite);r.default=n},{"../core":71}],142:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),C=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),o=n(t("../core/math/ObservablePoint")),y=t("../core/utils"),b=n(t("../core/settings")),s=function(n){function S(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,S);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this));return r._textWidth=0,r._textHeight=0,r._glyphs=[],r._font={tint:void 0!==e.tint?e.tint:16777215,align:e.align||"left",name:null,size:0},r.font=e.font,r._text=t,r._maxWidth=0,r._maxLineHeight=0,r._anchor=new o.default(function(){r.dirty=!0},r,0,0),r.dirty=!1,r.updateText(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(S,n),S.prototype.updateText=function(){for(var t=S.fonts[this._font.name],e=this._font.size/t.size,r=new C.Point,n=[],i=[],o=null,s=0,a=0,u=0,h=-1,l=0,c=0,d=0,f=0;f<this.text.length;f++){var p=this.text.charCodeAt(f);if(/(\s)/.test(this.text.charAt(f))&&(h=f,l=s),/(?:\r\n|\r|\n)/.test(this.text.charAt(f)))i.push(s),a=Math.max(a,s),u++,r.x=0,r.y+=t.lineHeight,o=null;else if(-1!==h&&0<this._maxWidth&&r.x*e>this._maxWidth)C.utils.removeItems(n,h-c,f-h),f=h,h=-1,++c,i.push(l),a=Math.max(a,l),u++,r.x=0,r.y+=t.lineHeight,o=null;else{var m=t.chars[p];m&&(o&&m.kerning[o]&&(r.x+=m.kerning[o]),n.push({texture:m.texture,line:u,charCode:p,position:new C.Point(r.x+m.xOffset,r.y+m.yOffset)}),s=r.x+(m.texture.width+m.xOffset),r.x+=m.xAdvance,d=Math.max(d,m.yOffset+m.texture.height),o=p)}}i.push(s),a=Math.max(a,s);for(var g=[],v=0;v<=u;v++){var y=0;"right"===this._font.align?y=a-i[v]:"center"===this._font.align&&(y=(a-i[v])/2),g.push(y)}for(var b=n.length,x=this.tint,w=0;w<b;w++){var _=this._glyphs[w];_?_.texture=n[w].texture:(_=new C.Sprite(n[w].texture),this._glyphs.push(_)),_.position.x=(n[w].position.x+g[n[w].line])*e,_.position.y=n[w].position.y*e,_.scale.x=_.scale.y=e,_.tint=x,_.parent||this.addChild(_)}for(var T=b;T<this._glyphs.length;++T)this.removeChild(this._glyphs[T]);if(this._textWidth=a*e,this._textHeight=(r.y+t.lineHeight)*e,0!==this.anchor.x||0!==this.anchor.y)for(var E=0;E<b;E++)this._glyphs[E].x-=this._textWidth*this.anchor.x,this._glyphs[E].y-=this._textHeight*this.anchor.y;this._maxLineHeight=d*e},S.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},S.prototype.getLocalBounds=function(){return this.validate(),n.prototype.getLocalBounds.call(this)},S.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},S.registerFont=function(t,e){var r={},n=t.getElementsByTagName("info")[0],i=t.getElementsByTagName("common")[0],o=t.getElementsByTagName("page")[0].getAttribute("file"),s=(0,y.getResolutionOfUrl)(o,b.default.RESOLUTION);r.font=n.getAttribute("face"),r.size=parseInt(n.getAttribute("size"),10),r.lineHeight=parseInt(i.getAttribute("lineHeight"),10)/s,r.chars={};for(var a=t.getElementsByTagName("char"),u=0;u<a.length;u++){var h=a[u],l=parseInt(h.getAttribute("id"),10),c=new C.Rectangle(parseInt(h.getAttribute("x"),10)/s+e.frame.x/s,parseInt(h.getAttribute("y"),10)/s+e.frame.y/s,parseInt(h.getAttribute("width"),10)/s,parseInt(h.getAttribute("height"),10)/s);r.chars[l]={xOffset:parseInt(h.getAttribute("xoffset"),10)/s,yOffset:parseInt(h.getAttribute("yoffset"),10)/s,xAdvance:parseInt(h.getAttribute("xadvance"),10)/s,kerning:{},texture:new C.Texture(e.baseTexture,c)}}for(var d=t.getElementsByTagName("kerning"),f=0;f<d.length;f++){var p=d[f],m=parseInt(p.getAttribute("first"),10)/s,g=parseInt(p.getAttribute("second"),10)/s,v=parseInt(p.getAttribute("amount"),10)/s;r.chars[g]&&(r.chars[g].kerning[m]=v)}return S.fonts[r.font]=r},i(S,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&0<=t?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=2<=t.length?parseInt(t[0],10):S.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),S}(C.Container);(r.default=s).fonts={}},{"../core":71,"../core/math/ObservablePoint":74,"../core/settings":107,"../core/utils":131}],143:[function(t,e,r){"use strict";r.__esModule=!0;var n,s=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),i=t("../core/sprites/canvas/CanvasTinter"),f=(n=i)&&n.__esModule?n:{default:n},a=new d.Point,o=function(i){function o(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,t));return n.tileTransform=new d.TransformStatic,n._width=e,n._height=r,n._canvasPattern=null,n.uvTransform=t.transform||new d.TextureMatrix(t),n.pluginName="tilingSprite",n.uvRespectAnchor=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,i),o.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},o.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},o.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var r=t.context,n=this.worldTransform,i=t.resolution,o=e.baseTexture,s=o.resolution,a=this.tilePosition.x/this.tileScale.x%e._frame.width*s,u=this.tilePosition.y/this.tileScale.y%e._frame.height*s;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var h=new d.CanvasRenderTarget(e._frame.width,e._frame.height,s);16777215!==this.tint?(this.tintedTexture=f.default.getTintedTexture(this,this.tint),h.context.drawImage(this.tintedTexture,0,0)):h.context.drawImage(o.source,-e._frame.x*s,-e._frame.y*s),this.cachedTint=this.tint,this._canvasPattern=h.context.createPattern(h.canvas,"repeat")}r.globalAlpha=this.worldAlpha,r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),t.setBlendMode(this.blendMode),r.fillStyle=this._canvasPattern,r.scale(this.tileScale.x/s,this.tileScale.y/s);var l=this.anchor.x*-this._width,c=this.anchor.y*-this._height;this.uvRespectAnchor?(r.translate(a,u),r.fillRect(-a+l,-u+c,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s)):(r.translate(a+l,u+c),r.fillRect(-a,-u,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s))}},o.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,r,n)},o.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),t||(this._localBoundsRect||(this._localBoundsRect=new d.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):i.prototype.getLocalBounds.call(this,t)},o.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,a);var e=this._width,r=this._height,n=-e*this.anchor._x;if(a.x>=n&&a.x<n+e){var i=-r*this.anchor._y;if(a.y>=i&&a.y<i+r)return!0}return!1},o.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this.tileTransform=null,this.uvTransform=null},o.from=function(t,e,r){return new o(d.Texture.from(t),e,r)},o.fromFrame=function(t,e,r){var n=d.utils.TextureCache[t];if(!n)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new o(n,e,r)},o.fromImage=function(t,e,r,n,i){return new o(d.Texture.fromImage(t,n,i),e,r)},s(o,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),o}(d.Sprite);r.default=o},{"../core":71,"../core/sprites/canvas/CanvasTinter":110}],144:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),c=n(t("../core/textures/Texture")),d=n(t("../core/textures/BaseTexture")),f=t("../core/utils"),i=l.DisplayObject,p=new l.Matrix;i.prototype._cacheAsBitmap=!1,i.prototype._cacheData=!1;var o=function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(i.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){var e=void 0;(this._cacheAsBitmap=t)?(this._cacheData||(this._cacheData=new o),(e=this._cacheData).originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),i.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},i.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var r=this.getLocalBounds().clone();if(this._filters){var n=this._filters[0].padding;r.pad(n)}var i=t._activeRenderTarget,o=t.filterManager.filterStack,s=l.RenderTexture.create(0|r.width,0|r.height),a="cacheAsBitmap_"+(0,f.uid)();this._cacheData.textureCacheId=a,d.default.addToCache(s.baseTexture,a),c.default.addToCache(s,a);var u=p;u.tx=-r.x,u.ty=-r.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,s,!0,u,!0),t.bindRenderTarget(i),t.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var h=new l.Sprite(s);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-r.x/r.width,h.anchor.y=-r.y/r.height,h.alpha=e,h._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)}},i.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(t))},i.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),r=this.alpha;this.alpha=1;var n=t.context,i=l.RenderTexture.create(0|e.width,0|e.height),o="cacheAsBitmap_"+(0,f.uid)();this._cacheData.textureCacheId=o,d.default.addToCache(i.baseTexture,o),c.default.addToCache(i,o);var s=p;this.transform.localTransform.copy(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,i,!0,s,!1),t.context=n,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var a=new l.Sprite(i);a.transform.worldTransform=this.transform.worldTransform,a.anchor.x=-e.x/e.width,a.anchor.y=-e.y/e.height,a._bounds=this._bounds,a.alpha=r,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=a,this.containsPoint=a.containsPoint.bind(a)}},i.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},i.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},i.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,d.default.removeFromCache(this._cacheData.textureCacheId),c.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},i.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},{"../core":71,"../core/textures/BaseTexture":118,"../core/textures/Texture":121,"../core/utils":131}],145:[function(t,e,r){"use strict";var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core"));n.DisplayObject.prototype.name=null,n.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":71}],146:[function(t,e,r){"use strict";var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core"));n.DisplayObject.prototype.getGlobalPosition=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new n.Point,e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":71}],147:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.BitmapText=r.TilingSpriteRenderer=r.TilingSprite=r.AnimatedSprite=void 0;var i=t("./AnimatedSprite");Object.defineProperty(r,"AnimatedSprite",{enumerable:!0,get:function(){return n(i).default}});var o=t("./TilingSprite");Object.defineProperty(r,"TilingSprite",{enumerable:!0,get:function(){return n(o).default}});var s=t("./webgl/TilingSpriteRenderer");Object.defineProperty(r,"TilingSpriteRenderer",{enumerable:!0,get:function(){return n(s).default}});var a=t("./BitmapText");Object.defineProperty(r,"BitmapText",{enumerable:!0,get:function(){return n(a).default}}),t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition")},{"./AnimatedSprite":141,"./BitmapText":142,"./TilingSprite":143,"./cacheAsBitmap":144,"./getChildByName":145,"./getGlobalPosition":146,"./webgl/TilingSpriteRenderer":148}],148:[function(t,e,r){"use strict";r.__esModule=!0;var p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),m=t("../../core/const"),g=(t("path"),new p.Matrix),n=function(r){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,r.call(this,t));return e.shader=null,e.simpleShader=null,e.quad=null,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r),n.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new p.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new p.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new p.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},n.prototype.render=function(t){var e=this.renderer,r=this.quad;e.bindVao(r.vao);var n=r.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((n=r.uvs)[0]=n[6]=-t.anchor.x,n[1]=n[3]=-t.anchor.y,n[2]=n[4]=1-t.anchor.x,n[5]=n[7]=1-t.anchor.y),r.upload();var i=t._texture,o=i.baseTexture,s=t.tileTransform.localTransform,a=t.uvTransform,u=o.isPowerOfTwo&&i.frame.width===o.width&&i.frame.height===o.height;u&&(o._glTextures[e.CONTEXT_UID]?u=o.wrapMode!==m.WRAP_MODES.CLAMP:o.wrapMode===m.WRAP_MODES.CLAMP&&(o.wrapMode=m.WRAP_MODES.REPEAT));var h=u?this.simpleShader:this.shader;e.bindShader(h);var l=i.width,c=i.height,d=t._width,f=t._height;g.set(s.a*l/d,s.b*l/f,s.c*c/d,s.d*c/f,s.tx/d,s.ty/f),g.invert(),u?g.prepend(a.mapCoord):(h.uniforms.uMapCoord=a.mapCoord.toArray(!0),h.uniforms.uClampFrame=a.uClampFrame,h.uniforms.uClampOffset=a.uClampOffset),h.uniforms.uTransform=g.toArray(!0),h.uniforms.uColor=p.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,h.uniforms.uColor,o.premultipliedAlpha),h.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),h.uniforms.uSampler=e.bindTexture(i),e.setBlendMode(p.utils.correctBlendMode(t.blendMode,o.premultipliedAlpha)),r.vao.draw(this.renderer.gl.TRIANGLES,6,0)},n}(p.ObjectRenderer);r.default=n,p.WebGLRenderer.registerPlugin("tilingSprite",n)},{"../../core":71,"../../core/const":52,path:28}],149:[function(t,e,r){"use strict";r.__esModule=!0;var i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),o=(t("path"),function(r){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,r.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return e.alpha=t,e.glShaderKey="alpha",e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r),i(n,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),n}(n.Filter));r.default=o},{"../../core":71,path:28}],150:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),u=n(t("./BlurXFilter")),h=n(t("./BlurYFilter")),o=function(o){function s(t,e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this));return i.blurXFilter=new u.default(t,e,r,n),i.blurYFilter=new h.default(t,e,r,n),i.padding=0,i.resolution=r||a.settings.RESOLUTION,i.quality=e||4,i.blur=t||8,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,o),s.prototype.apply=function(t,e,r){var n=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,n,!0),this.blurYFilter.apply(t,n,r,!1),t.returnRenderTarget(n)},i(s,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),s}(a.Filter);r.default=o},{"../../core":71,"./BlurXFilter":151,"./BlurYFilter":152}],151:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),c=n(t("./generateBlurVertSource")),d=n(t("./generateBlurFragSource")),f=n(t("./getMaxBlurKernelSize")),o=function(a){function u(t,e,r,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,u),n=n||5;var i=(0,c.default)(n,!0),o=(0,d.default)(n),s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,i,o));return s.resolution=r||h.settings.RESOLUTION,s._quality=0,s.quality=e||4,s.strength=t||8,s.firstRun=!0,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,a),u.prototype.apply=function(t,e,r,n){if(this.firstRun){var i=t.renderer.gl,o=(0,f.default)(i);this.vertexSrc=(0,c.default)(o,!0),this.fragmentSrc=(0,d.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.width*(r.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,n);else{for(var s=t.getRenderTarget(!0),a=e,u=s,h=0;h<this.passes-1;h++){t.applyFilter(this,a,u,!0);var l=u;u=a,a=l}t.applyFilter(this,a,r,n),t.returnRenderTarget(s)}},i(u,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),u}(h.Filter);r.default=o},{"../../core":71,"./generateBlurFragSource":153,"./generateBlurVertSource":154,"./getMaxBlurKernelSize":155}],152:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),c=n(t("./generateBlurVertSource")),d=n(t("./generateBlurFragSource")),f=n(t("./getMaxBlurKernelSize")),o=function(a){function u(t,e,r,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,u),n=n||5;var i=(0,c.default)(n,!1),o=(0,d.default)(n),s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,i,o));return s.resolution=r||h.settings.RESOLUTION,s._quality=0,s.quality=e||4,s.strength=t||8,s.firstRun=!0,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,a),u.prototype.apply=function(t,e,r,n){if(this.firstRun){var i=t.renderer.gl,o=(0,f.default)(i);this.vertexSrc=(0,c.default)(o,!1),this.fragmentSrc=(0,d.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.height*(r.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,n);else{for(var s=t.getRenderTarget(!0),a=e,u=s,h=0;h<this.passes-1;h++){t.applyFilter(this,a,u,!0);var l=u;u=a,a=l}t.applyFilter(this,a,r,n),t.returnRenderTarget(s)}},i(u,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),u}(h.Filter);r.default=o},{"../../core":71,"./generateBlurFragSource":153,"./generateBlurVertSource":154,"./getMaxBlurKernelSize":155}],153:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){for(var e=u[t],r=e.length,n=h,i="",o=void 0,s=0;s<t;s++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s);r<=(o=s)&&(o=t-s-1),i+=a=a.replace("%value%",e[o]),i+="\n"}return(n=n.replace("%blur%",i)).replace("%size%",t)};var u={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},h=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],154:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e){var r=Math.ceil(t/2),n=u,i="",o=void 0;o=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var a=o.replace("%index%",s);i+=a=a.replace("%sampleIndex%",s-(r-1)+".0"),i+="\n"}return(n=n.replace("%blur%",i)).replace("%size%",t)};var u=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],155:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),r=15;e<r;)r-=2;return r}},{}],156:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),o=(t("path"),function(e){function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return t.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],t.alpha=1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,e),r.prototype._loadMatrix=function(t){var e=t;1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(e,this.uniforms.m,t),e=this._colorMatrix(e)),this.uniforms.m=e},r.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t},r.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},r.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},r.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},r.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},r.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),n=Math.sin(t),i=(0,Math.sqrt)(1/3),o=[r+1/3*(1-r),1/3*(1-r)-i*n,1/3*(1-r)+i*n,0,0,1/3*(1-r)+i*n,r+1/3*(1-r),1/3*(1-r)-i*n,0,0,1/3*(1-r)-i*n,1/3*(1-r)+i*n,r+1/3*(1-r),0,0,0,0,0,1,0];this._loadMatrix(o,e)},r.prototype.contrast=function(t,e){var r=(t||0)+1,n=-.5*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.saturate=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],r=2*t/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.desaturate=function(){this.saturate(-1)},r.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},r.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},r.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},r.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},r.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},r.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},r.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},r.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},r.prototype.colorTone=function(t,e,r,n,i){var o=((r=r||16770432)>>16&255)/255,s=(r>>8&255)/255,a=(255&r)/255,u=((n=n||3375104)>>16&255)/255,h=(n>>8&255)/255,l=(255&n)/255,c=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,u,h,l,e=e||.15,0,o-u,s-h,a-l,0,0];this._loadMatrix(c,i)},r.prototype.night=function(t,e){var r=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},r.prototype.predator=function(t,e){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)},r.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},r.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},n(r,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),r}(i.Filter));(r.default=o).prototype.grayscale=o.prototype.greyscale},{"../../core":71,path:28}],157:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),i=(t("path"),function(i){function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var r=new s.Matrix;t.renderable=!1;var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return n.maskSprite=t,n.maskMatrix=r,n.uniforms.mapSampler=t._texture,n.uniforms.filterMatrix=r,n.uniforms.scale={x:1,y:1},null!=e||(e=20),n.scale=new s.Point(e,e),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,i),o.prototype.apply=function(t,e,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,t.applyFilter(this,e,r)},n(o,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),o}(s.Filter));r.default=i},{"../../core":71,path:28}],158:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),i=(t("path"),function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(n.Filter));r.default=i},{"../../core":71,path:28}],159:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./fxaa/FXAAFilter");Object.defineProperty(r,"FXAAFilter",{enumerable:!0,get:function(){return n(i).default}});var o=t("./noise/NoiseFilter");Object.defineProperty(r,"NoiseFilter",{enumerable:!0,get:function(){return n(o).default}});var s=t("./displacement/DisplacementFilter");Object.defineProperty(r,"DisplacementFilter",{enumerable:!0,get:function(){return n(s).default}});var a=t("./blur/BlurFilter");Object.defineProperty(r,"BlurFilter",{enumerable:!0,get:function(){return n(a).default}});var u=t("./blur/BlurXFilter");Object.defineProperty(r,"BlurXFilter",{enumerable:!0,get:function(){return n(u).default}});var h=t("./blur/BlurYFilter");Object.defineProperty(r,"BlurYFilter",{enumerable:!0,get:function(){return n(h).default}});var l=t("./colormatrix/ColorMatrixFilter");Object.defineProperty(r,"ColorMatrixFilter",{enumerable:!0,get:function(){return n(l).default}});var c=t("./alpha/AlphaFilter");Object.defineProperty(r,"AlphaFilter",{enumerable:!0,get:function(){return n(c).default}})},{"./alpha/AlphaFilter":149,"./blur/BlurFilter":150,"./blur/BlurXFilter":151,"./blur/BlurYFilter":152,"./colormatrix/ColorMatrixFilter":156,"./displacement/DisplacementFilter":157,"./fxaa/FXAAFilter":158,"./noise/NoiseFilter":160}],160:[function(t,e,r){"use strict";r.__esModule=!0;var o=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),i=(t("path"),function(n){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.5,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Math.random();!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return r.noise=t,r.seed=e,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,n),o(i,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),i}(n.Filter));r.default=i},{"../../core":71,path:28}],161:[function(v,t,y){(function(t){"use strict";function e(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}y.__esModule=!0,y.loader=y.prepare=y.particles=y.mesh=y.loaders=y.interaction=y.filters=y.extras=y.extract=y.accessibility=void 0;var r=v("./polyfill");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(y,t,{enumerable:!0,get:function(){return r[t]}})});var n=v("./core");Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(y,t,{enumerable:!0,get:function(){return n[t]}})});var i,o=v("./deprecation"),s=(i=o)&&i.__esModule?i:{default:i},a=e(v("./accessibility")),u=e(v("./extract")),h=e(v("./extras")),l=e(v("./filters")),c=e(v("./interaction")),d=e(v("./loaders")),f=e(v("./mesh")),p=e(v("./particles")),m=e(v("./prepare"));n.utils.mixins.performMixins();var g=d.shared||null;y.accessibility=a,y.extract=u,y.extras=h,y.filters=l,y.interaction=c,y.loaders=d,y.mesh=f,y.particles=p,y.prepare=m,y.loader=g,"function"==typeof s.default&&(0,s.default)(y),t.PIXI=y}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":48,"./core":71,"./deprecation":137,"./extract":139,"./extras":147,"./filters":159,"./interaction":166,"./loaders":169,"./mesh":178,"./particles":181,"./polyfill":188,"./prepare":192}],162:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),o=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.global=new i.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)},t.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},n(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();r.default=o},{"../core":71}],163:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();r.default=n},{}],164:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),a=n(t("./InteractionData")),u=n(t("./InteractionEvent")),c=n(t("./InteractionTrackingData")),i=n(t("eventemitter3")),h=n(t("./interactiveTarget"));s.utils.mixins.delayMixin(s.DisplayObject.prototype,h.default);var l={target:null,data:{global:null}},d=function(n){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this));return e=e||{},r.renderer=t,r.autoPreventDefault=void 0===e.autoPreventDefault||e.autoPreventDefault,r.interactionFrequency=e.interactionFrequency||10,r.mouse=new a.default,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new u.default,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.mouseOverRenderer=!1,r.supportsTouchEvents="ontouchstart"in window,r.supportsPointerEvents=!!window.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r._tempPoint=new s.Point,r.resolution=1,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,n),i.prototype.hitTest=function(t,e){return l.target=null,l.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(l,e,null,!0),l.target},i.prototype.setTargetElement=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},i.prototype.addEvents=function(){this.interactionDOMElement&&(s.ticker.shared.add(this.update,this,s.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},i.prototype.removeEvents=function(){this.interactionDOMElement&&(s.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},i.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var r=this.activeInteractionData[e];if(r.originalEvent&&"touch"!==r.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},i.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":o(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},i.prototype.dispatchEvent=function(t,e,r){r.stopped||(r.currentTarget=t,r.type=e,t.emit(e,r),t[e]&&t[e](r))},i.prototype.mapPositionToPoint=function(t,e,r){var n;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var i=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*i,t.y=(r-n.top)*(this.interactionDOMElement.height/n.height)*i},i.prototype.processInteractive=function(t,e,r,n,i){if(!e||!e.visible)return!1;var o=t.data.global,s=!1,a=i=e.interactive||i,u=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:u=n=!1),a=!1):e._mask&&n&&(e._mask.containsPoint(o)||(u=n=!1)),u&&e.interactiveChildren&&e.children)for(var h=e.children,l=h.length-1;0<=l;l--){var c=h[l],d=this.processInteractive(t,c,r,n,a);if(d){if(!c.parent)continue;a=!1,d&&(t.target&&(n=!1),s=!0)}}return i&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),r&&r(t,e,!!s))),s},i.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var r=e.length,n=0;n<r;n++){var i=e[n],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===i.pointerType)this.emit("touchstart",s);else if("mouse"===i.pointerType||"pen"===i.pointerType){var a=2===i.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},i.prototype.processPointerDown=function(t,e,r){var n=t.data,i=t.data.identifier;if(r)if(e.trackedPointers[i]||(e.trackedPointers[i]=new c.default(i)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var o=2===n.button;o?e.trackedPointers[i].rightDown=!0:e.trackedPointers[i].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},i.prototype.onPointerComplete=function(t,e,r){for(var n=this.normalizeToPointerData(t),i=n.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<i;s++){var a=n[s],u=this.getInteractionDataForPointerId(a),h=this.configureInteractionEventForDOMEvent(this.eventData,a,u);if(h.data.originalEvent=t,this.processInteractive(h,this.renderer._lastObjectRendered,r,e||!o),this.emit(e?"pointercancel":"pointerup"+o,h),"mouse"===a.pointerType||"pen"===a.pointerType){var l=2===a.button;this.emit(l?"rightup"+o:"mouseup"+o,h)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,h),this.releaseInteractionDataForPointerId(a.pointerId,u))}},i.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},i.prototype.processPointerCancel=function(t,e){var r=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===r.pointerType&&this.dispatchEvent(e,"touchcancel",t))},i.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},i.prototype.processPointerUp=function(t,e,r){var n=t.data,i=t.data.identifier,o=e.trackedPointers[i],s="touch"===n.pointerType;if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button,u=c.default.FLAGS,h=a?u.RIGHT_DOWN:u.LEFT_DOWN,l=void 0!==o&&o.flags&h;r?(this.dispatchEvent(e,a?"rightup":"mouseup",t),l&&this.dispatchEvent(e,a?"rightclick":"click",t)):l&&this.dispatchEvent(e,a?"rightupoutside":"mouseupoutside",t),o&&(a?o.rightDown=!1:o.leftDown=!1)}r?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[i]},i.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var r=e.length,n=0;n<r;n++){var i=e[n],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);s.data.originalEvent=t;var a="touch"!==i.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===i.pointerType&&this.emit("touchmove",s),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},i.prototype.processPointerMove=function(t,e,r){var n=t.data,i="touch"===n.pointerType,o="mouse"===n.pointerType||"pen"===n.pointerType;o&&this.processPointerOverOut(t,e,r),this.moveWhenInside&&!r||(this.dispatchEvent(e,"pointermove",t),i&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},i.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var r=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,r);n.data.originalEvent=e,this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(r.identifier)}},i.prototype.processPointerOverOut=function(t,e,r){var n=t.data,i=t.data.identifier,o="mouse"===n.pointerType||"pen"===n.pointerType,s=e.trackedPointers[i];r&&!s&&(s=e.trackedPointers[i]=new c.default(i)),void 0!==s&&(r&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(e,"pointerover",t),o&&this.dispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[i]))},i.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],r=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,r);"mouse"===(n.data.originalEvent=e).pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",n)},i.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,r=void 0;return 1===e||"mouse"===t.pointerType?r=this.mouse:this.activeInteractionData[e]?r=this.activeInteractionData[e]:((r=this.interactionDataPool.pop()||new a.default).identifier=e,this.activeInteractionData[e]=r),r.copyEvent(t),r},i.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},i.prototype.configureInteractionEventForDOMEvent=function(t,e,r){return t.data=r,this.mapPositionToPoint(r.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(r.global.x=r.global.x/this.resolution,r.global.y=r.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=r.global.x,e.globalY=r.global.y),r.originalEvent=e,t.reset(),t},i.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var r=0,n=t.changedTouches.length;r<n;r++){var i=t.changedTouches[r];void 0===i.button&&(i.button=t.touches.length?1:0),void 0===i.buttons&&(i.buttons=t.touches.length?1:0),void 0===i.isPrimary&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),i.twist=0,void(i.tangentialPressure=0)===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,e.push(i)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent||(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=1),void 0===t.pressure&&(t.pressure=.5),t.twist=0,t.tangentialPressure=0,t.isNormalized=!0),e.push(t);return e},i.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},i}(i.default);r.default=d,s.WebGLRenderer.registerPlugin("interaction",d),s.CanvasRenderer.registerPlugin("interaction",d)},{"../core":71,"./InteractionData":162,"./InteractionEvent":163,"./InteractionTrackingData":165,"./interactiveTarget":167,eventemitter3:21}],165:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),i=function(){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},n(e,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),e}();(r.default=i).FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],166:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./InteractionData");Object.defineProperty(r,"InteractionData",{enumerable:!0,get:function(){return n(i).default}});var o=t("./InteractionManager");Object.defineProperty(r,"InteractionManager",{enumerable:!0,get:function(){return n(o).default}});var s=t("./interactiveTarget");Object.defineProperty(r,"interactiveTarget",{enumerable:!0,get:function(){return n(s).default}});var a=t("./InteractionTrackingData");Object.defineProperty(r,"InteractionTrackingData",{enumerable:!0,get:function(){return n(a).default}});var u=t("./InteractionEvent");Object.defineProperty(r,"InteractionEvent",{enumerable:!0,get:function(){return n(u).default}})},{"./InteractionData":162,"./InteractionEvent":163,"./InteractionManager":164,"./InteractionTrackingData":165,"./interactiveTarget":167}],167:[function(t,e,r){"use strict";r.__esModule=!0,r.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],168:[function(t,e,r){"use strict";function o(t,e){t.bitmapFont=n.BitmapText.registerFont(t.data,e)}r.__esModule=!0,r.parse=o,r.default=function(){return function(e,r){if(e.data&&e.type===u.Resource.TYPE.XML)if(0!==e.data.getElementsByTagName("page").length&&0!==e.data.getElementsByTagName("info").length&&null!==e.data.getElementsByTagName("info")[0].getAttribute("face")){var t=e.isDataUrl?"":s.dirname(e.url);e.isDataUrl&&("."===t&&(t=""),this.baseUrl&&t&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(t+="/")),(t=t.replace(this.baseUrl,""))&&"/"!==t.charAt(t.length-1)&&(t+="/");var n=t+e.data.getElementsByTagName("page")[0].getAttribute("file");if(a.utils.TextureCache[n])o(e,a.utils.TextureCache[n]),r();else{var i={crossOrigin:e.crossOrigin,loadType:u.Resource.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata,parentResource:e};this.add(e.name+"_image",n,i,function(t){o(e,t.texture),r()})}}else r();else r()}};var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("path")),a=t("../core"),u=t("resource-loader"),n=t("../extras")},{"../core":71,"../extras":147,path:28,"resource-loader":206}],169:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.shared=r.Resource=r.textureParser=r.getResourcePath=r.spritesheetParser=r.parseBitmapFontData=r.bitmapFontParser=r.Loader=void 0;var i=t("./bitmapFontParser");Object.defineProperty(r,"bitmapFontParser",{enumerable:!0,get:function(){return n(i).default}}),Object.defineProperty(r,"parseBitmapFontData",{enumerable:!0,get:function(){return i.parse}});var o=t("./spritesheetParser");Object.defineProperty(r,"spritesheetParser",{enumerable:!0,get:function(){return n(o).default}}),Object.defineProperty(r,"getResourcePath",{enumerable:!0,get:function(){return o.getResourcePath}});var s=t("./textureParser");Object.defineProperty(r,"textureParser",{enumerable:!0,get:function(){return n(s).default}});var a=t("resource-loader");Object.defineProperty(r,"Resource",{enumerable:!0,get:function(){return a.Resource}});var u=n(t("../core/Application")),h=n(t("./loader"));r.Loader=h.default;var l=new h.default;l.destroy=function(){},r.shared=l;var c=u.default.prototype;c._loader=null,Object.defineProperty(c,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?l:new h.default}return this._loader}}),c._parentDestroy=c.destroy,c.destroy=function(t){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t)}},{"../core/Application":49,"./bitmapFontParser":168,"./loader":170,"./spritesheetParser":171,"./textureParser":172,"resource-loader":206}],170:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=n(t("resource-loader")),o=t("resource-loader/lib/middlewares/parsing/blob"),s=n(t("eventemitter3")),a=n(t("./textureParser")),u=n(t("./spritesheetParser")),h=n(t("./bitmapFontParser")),l=function(i){function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,t,e));s.default.call(n);for(var r=0;r<o._pixiMiddleware.length;++r)n.use(o._pixiMiddleware[r]());return n.onStart.add(function(t){return n.emit("start",t)}),n.onProgress.add(function(t,e){return n.emit("progress",t,e)}),n.onError.add(function(t,e,r){return n.emit("error",t,e,r)}),n.onLoad.add(function(t,e){return n.emit("load",t,e)}),n.onComplete.add(function(t,e){return n.emit("complete",t,e)}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,i),o.addPixiMiddleware=function(t){o._pixiMiddleware.push(t)},o.prototype.destroy=function(){this.removeAllListeners(),this.reset()},o}(i.default);for(var c in r.default=l,s.default.prototype)l.prototype[c]=s.default.prototype[c];l._pixiMiddleware=[o.blobMiddlewareFactory,a.default,u.default,h.default];var d=i.default.Resource;d.setExtensionXhrType("fnt",d.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":168,"./spritesheetParser":171,"./textureParser":172,eventemitter3:21,"resource-loader":206,"resource-loader/lib/middlewares/parsing/blob":207}],171:[function(t,e,r){"use strict";function o(t,e){return t.isDataUrl?t.data.meta.image:a.default.resolve(t.url.replace(e,""),t.data.meta.image)}r.__esModule=!0,r.default=function(){return function(r,n){var t=r.name+"_image";if(r.data&&r.type===s.Resource.TYPE.JSON&&r.data.frames&&!this.resources[t]){var e={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},i=o(r,this.baseUrl);this.add(t,i,e,function(t){if(t.error)n(t.error);else{var e=new u.Spritesheet(t.texture.baseTexture,r.data,r.url);e.parse(function(){r.spritesheet=e,r.textures=e.textures,n()})}})}else n()}},r.getResourcePath=o;var n,s=t("resource-loader"),i=t("url"),a=(n=i)&&n.__esModule?n:{default:n},u=t("../core")},{"../core":71,"resource-loader":206,url:209}],172:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(){return function(t,e){t.data&&t.type===i.Resource.TYPE.IMAGE&&(t.texture=s.default.fromLoader(t.data,t.url,t.name)),e()}};var n,i=t("resource-loader"),o=t("../core/textures/Texture"),s=(n=o)&&n.__esModule?n:{default:n}},{"../core/textures/Texture":121,"resource-loader":206}],173:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),o=t("../core/textures/Texture"),u=(n=o)&&n.__esModule?n:{default:n},c=new a.Point,d=new a.Polygon,s=function(s){function l(t,e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this));return o._texture=t||u.default.EMPTY,o.uvs=r||new Float32Array([0,0,1,0,1,1,0,1]),o.vertices=e||new Float32Array([0,0,100,0,100,100,0,100]),o.indices=n||new Uint16Array([0,1,3,2]),o.dirty=0,o.indexDirty=0,o.blendMode=a.BLEND_MODES.NORMAL,o.canvasPadding=a.settings.MESH_CANVAS_PADDING,o.drawMode=i||l.DRAW_MODES.TRIANGLE_MESH,o.shader=null,o.tintRgb=new Float32Array([1,1,1]),o._glDatas={},o._uvTransform=new a.TextureMatrix(o._texture),o.uploadUvTransform=!1,o.pluginName="mesh",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,s),l.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},l.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},l.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},l.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},l.prototype.refresh=function(t){this._uvTransform.update(t)&&this._refresh()},l.prototype._refresh=function(){},l.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},l.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,c);for(var e=this.vertices,r=d.points,n=this.indices,i=this.indices.length,o=this.drawMode===l.DRAW_MODES.TRIANGLES?3:1,s=0;s+2<i;s+=o){var a=2*n[s],u=2*n[s+1],h=2*n[s+2];if(r[0]=e[a],r[1]=e[a+1],r[2]=e[u],r[3]=e[u+1],r[4]=e[h],r[5]=e[h+1],d.contains(c.x,c.y))return!0}return!1},i(l,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&((this._texture=t)&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return a.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=a.utils.hex2rgb(t,this.tintRgb)}}]),l}(a.Container);(r.default=s).DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":71,"../core/textures/Texture":121}],174:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),o=t("./Plane"),s=(n=o)&&n.__esModule?n:{default:n},a=function(s){function a(t,e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t,4,4));return o._origWidth=t.orig.width,o._origHeight=t.orig.height,o._width=o._origWidth,o._height=o._origHeight,o.leftWidth=void 0!==e?e:10,o.rightWidth=void 0!==n?n:10,o.topHeight=void 0!==r?r:10,o.bottomHeight=void 0!==i?i:10,o.refresh(!0),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,s),a.prototype.updateHorizontalVertices=function(){var t=this.vertices;t[9]=t[11]=t[13]=t[15]=this._topHeight,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight,t[25]=t[27]=t[29]=t[31]=this._height},a.prototype.updateVerticalVertices=function(){var t=this.vertices;t[2]=t[10]=t[18]=t[26]=this._leftWidth,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth,t[6]=t[14]=t[22]=t[30]=this._width},a.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode);var r=this.worldTransform,n=t.resolution;t.roundPixels?e.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n|0,r.ty*n|0):e.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n);var i=this._texture.baseTexture,o=i.source,s=i.width*i.resolution,a=i.height*i.resolution;this.drawSegment(e,o,s,a,0,1,10,11),this.drawSegment(e,o,s,a,2,3,12,13),this.drawSegment(e,o,s,a,4,5,14,15),this.drawSegment(e,o,s,a,8,9,18,19),this.drawSegment(e,o,s,a,10,11,20,21),this.drawSegment(e,o,s,a,12,13,22,23),this.drawSegment(e,o,s,a,16,17,26,27),this.drawSegment(e,o,s,a,18,19,28,29),this.drawSegment(e,o,s,a,20,21,30,31)},a.prototype.drawSegment=function(t,e,r,n,i,o,s,a){var u=this.uvs,h=this.vertices,l=(u[s]-u[i])*r,c=(u[a]-u[o])*n,d=h[s]-h[i],f=h[a]-h[o];l<1&&(l=1),c<1&&(c=1),d<1&&(d=1),f<1&&(f=1),t.drawImage(e,u[i]*r,u[o]*n,l,c,h[i],h[o],d,f)},a.prototype._refresh=function(){s.prototype._refresh.call(this);var t=this.uvs,e=this._texture;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var r=1/this._origWidth,n=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=r*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth,t[9]=t[11]=t[13]=t[15]=n*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},i(a,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),a}(s.default);r.default=a},{"./Plane":175}],175:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=t("./Mesh"),s=(n=i)&&n.__esModule?n:{default:n},o=function(i){function o(t,e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,t));return n._ready=!0,n.verticesX=e||10,n.verticesY=r||10,n.drawMode=s.default.DRAW_MODES.TRIANGLES,n.refresh(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,i),o.prototype._refresh=function(){for(var t=this._texture,e=this.verticesX*this.verticesY,r=[],n=[],i=[],o=this.verticesX-1,s=this.verticesY-1,a=t.width/o,u=t.height/s,h=0;h<e;h++){var l=h%this.verticesX,c=h/this.verticesX|0;r.push(l*a,c*u),n.push(l/o,c/s)}for(var d=o*s,f=0;f<d;f++){var p=f%o,m=f/o|0,g=m*this.verticesX+p,v=m*this.verticesX+p+1,y=(m+1)*this.verticesX+p,b=(m+1)*this.verticesX+p+1;i.push(g,v,y),i.push(v,b,y)}this.vertices=new Float32Array(r),this.uvs=new Float32Array(n),this.colors=new Float32Array([]),this.indices=new Uint16Array(i),this.dirty++,this.indexDirty++,this.multiplyUvs()},o.prototype._onTextureUpdate=function(){s.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},o}(s.default);r.default=o},{"./Mesh":173}],176:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=t("./Mesh"),o=function(n){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t));return r.points=e,r.vertices=new Float32Array(4*e.length),r.uvs=new Float32Array(4*e.length),r.colors=new Float32Array(2*e.length),r.indices=new Uint16Array(2*e.length),r.autoUpdate=!0,r.refresh(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,n),i.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,r=this.indices,n=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,n[0]=1,n[1]=1,r[0]=0,r[1]=1;for(var i=t.length,o=1;o<i;o++){var s=4*o,a=o/(i-1);e[s]=a,e[s+1]=0,e[s+2]=a,e[s+3]=1,n[s=2*o]=1,n[s+1]=1,r[s=2*o]=s,r[s+1]=s+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},i.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],r=void 0,n=0,i=0,o=this.vertices,s=t.length,a=0;a<s;a++){var u=t[a],h=4*a;i=-((r=a<t.length-1?t[a+1]:u).x-e.x),n=r.y-e.y;var l=10*(1-a/(s-1));1<l&&(l=1);var c=Math.sqrt(n*n+i*i),d=this._texture.height/2;n/=c,i/=c,n*=d,i*=d,o[h]=u.x+n,o[h+1]=u.y+i,o[h+2]=u.x-n,o[h+3]=u.y-i,e=u}},i.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},i}(((n=i)&&n.__esModule?n:{default:n}).default);r.default=o},{"./Mesh":173}],177:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),o=t("../Mesh"),s=(n=o)&&n.__esModule?n:{default:n},a=function(){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),this.renderer=t}return e.prototype.render=function(t){var e=this.renderer,r=e.context,n=t.worldTransform,i=e.resolution;e.roundPixels?r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i|0,n.ty*i|0):r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),t.drawMode===s.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},e.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,r=0;r<e-2;r++){var n=2*r;this._renderDrawTriangle(t,n,n+2,n+4)}},e.prototype._renderTriangles=function(t){for(var e=t.indices,r=e.length,n=0;n<r;n+=3){var i=2*e[n],o=2*e[n+1],s=2*e[n+2];this._renderDrawTriangle(t,i,o,s)}},e.prototype._renderDrawTriangle=function(t,e,r,n){var i=this.renderer.context,o=t.uvs,s=t.vertices,a=t._texture;if(a.valid){var u=a.baseTexture,h=u.source,l=u.width,c=u.height,d=void 0,f=void 0,p=void 0,m=void 0,g=void 0,v=void 0;if(t.uploadUvTransform){var y=t._uvTransform.mapCoord;d=(o[e]*y.a+o[e+1]*y.c+y.tx)*u.width,f=(o[r]*y.a+o[r+1]*y.c+y.tx)*u.width,p=(o[n]*y.a+o[n+1]*y.c+y.tx)*u.width,m=(o[e]*y.b+o[e+1]*y.d+y.ty)*u.height,g=(o[r]*y.b+o[r+1]*y.d+y.ty)*u.height,v=(o[n]*y.b+o[n+1]*y.d+y.ty)*u.height}else d=o[e]*u.width,f=o[r]*u.width,p=o[n]*u.width,m=o[e+1]*u.height,g=o[r+1]*u.height,v=o[n+1]*u.height;var b=s[e],x=s[r],w=s[n],_=s[e+1],T=s[r+1],E=s[n+1],S=t.canvasPadding/this.renderer.resolution;if(0<S){var C=S/Math.abs(t.worldTransform.a),O=S/Math.abs(t.worldTransform.d),P=(b+x+w)/3,A=(_+T+E)/3,M=b-P,I=_-A,R=Math.sqrt(M*M+I*I);b=P+M/R*(R+C),_=A+I/R*(R+O),I=T-A,x=P+(M=x-P)/(R=Math.sqrt(M*M+I*I))*(R+C),T=A+I/R*(R+O),I=E-A,w=P+(M=w-P)/(R=Math.sqrt(M*M+I*I))*(R+C),E=A+I/R*(R+O)}i.save(),i.beginPath(),i.moveTo(b,_),i.lineTo(x,T),i.lineTo(w,E),i.closePath(),i.clip();var k=d*g+m*p+f*v-g*p-m*f-d*v,D=b*g+m*w+x*v-g*w-m*x-b*v,L=d*x+b*p+f*w-x*p-b*f-d*w,B=d*g*w+m*x*p+b*f*v-b*g*p-m*f*w-d*x*v,F=_*g+m*E+T*v-g*E-m*T-_*v,N=d*T+_*p+f*E-T*p-_*f-d*E,j=d*g*E+m*T*p+_*f*v-_*g*p-m*f*E-d*T*v;i.transform(D/k,F/k,L/k,N/k,B/k,j/k),i.drawImage(h,0,0,l*u.resolution,c*u.resolution,0,0,l,c),i.restore(),this.renderer.invalidateBlendMode()}},e.prototype.renderMeshFlat=function(t){var e=this.renderer.context,r=t.vertices,n=r.length/2;e.beginPath();for(var i=1;i<n-2;++i){var o=2*i,s=r[o],a=r[o+1],u=r[o+2],h=r[o+3],l=r[o+4],c=r[o+5];e.moveTo(s,a),e.lineTo(u,h),e.lineTo(l,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();r.default=a,i.CanvasRenderer.registerPlugin("mesh",a)},{"../../core":71,"../Mesh":173}],178:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./Mesh");Object.defineProperty(r,"Mesh",{enumerable:!0,get:function(){return n(i).default}});var o=t("./webgl/MeshRenderer");Object.defineProperty(r,"MeshRenderer",{enumerable:!0,get:function(){return n(o).default}});var s=t("./canvas/CanvasMeshRenderer");Object.defineProperty(r,"CanvasMeshRenderer",{enumerable:!0,get:function(){return n(s).default}});var a=t("./Plane");Object.defineProperty(r,"Plane",{enumerable:!0,get:function(){return n(a).default}});var u=t("./NineSlicePlane");Object.defineProperty(r,"NineSlicePlane",{enumerable:!0,get:function(){return n(u).default}});var h=t("./Rope");Object.defineProperty(r,"Rope",{enumerable:!0,get:function(){return n(h).default}})},{"./Mesh":173,"./NineSlicePlane":174,"./Plane":175,"./Rope":176,"./canvas/CanvasMeshRenderer":177,"./webgl/MeshRenderer":179}],179:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),a=n(t("pixi-gl-core")),u=n(t("../Mesh")),h=(t("path"),s.Matrix.IDENTITY),i=function(r){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,r.call(this,t));return e.shader=null,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r),n.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new s.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},n.prototype.render=function(t){var e=this.renderer,r=e.gl,n=t._texture;if(n.valid){var i=t._glDatas[e.CONTEXT_UID];i||(e.bindVao(null),(i={shader:this.shader,vertexBuffer:a.default.GLBuffer.createVertexBuffer(r,t.vertices,r.STREAM_DRAW),uvBuffer:a.default.GLBuffer.createVertexBuffer(r,t.uvs,r.STREAM_DRAW),indexBuffer:a.default.GLBuffer.createIndexBuffer(r,t.indices,r.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty}).vao=new a.default.VertexArrayObject(r).addIndex(i.indexBuffer).addAttribute(i.vertexBuffer,i.shader.attributes.aVertexPosition,r.FLOAT,!1,8,0).addAttribute(i.uvBuffer,i.shader.attributes.aTextureCoord,r.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=i),e.bindVao(i.vao),t.dirty!==i.dirty&&(i.dirty=t.dirty,i.uvBuffer.upload(t.uvs)),t.indexDirty!==i.indexDirty&&(i.indexDirty=t.indexDirty,i.indexBuffer.upload(t.indices)),i.vertexBuffer.upload(t.vertices),e.bindShader(i.shader),i.shader.uniforms.uSampler=e.bindTexture(n),e.state.setBlendMode(s.utils.correctBlendMode(t.blendMode,n.baseTexture.premultipliedAlpha)),i.shader.uniforms.uTransform&&(t.uploadUvTransform?i.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(!0):i.shader.uniforms.uTransform=h.toArray(!0)),i.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),i.shader.uniforms.uColor=s.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,i.shader.uniforms.uColor,n.baseTexture.premultipliedAlpha);var o=t.drawMode===u.default.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;i.vao.draw(o,t.indices.length,0)}},n}(s.ObjectRenderer);r.default=i,s.WebGLRenderer.registerPlugin("mesh",i)},{"../../core":71,"../Mesh":173,path:28,"pixi-gl-core":35}],180:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),i=t("../core/utils"),o=function(o){function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1500,e=arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16384,n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this));return 16384<r&&(r=16384),t<r&&(r=t),i._properties=[!1,!0,!1,!1,!1],i._maxSize=t,i._batchSize=r,i._glBuffers={},i._bufferUpdateIDs=[],i._updateID=0,i.interactiveChildren=!1,i.blendMode=a.BLEND_MODES.NORMAL,i.autoResize=n,i.roundPixels=!0,i.baseTexture=null,i.setProperties(e),i._tint=0,i.tintRgb=new Float32Array(4),i.tint=16777215,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,o),s.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},s.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},s.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},s.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},s.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,r=this.worldTransform,n=!0,i=0,o=0,s=0,a=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var u=0;u<this.children.length;++u){var h=this.children[u];if(h.visible){var l=h._texture.frame;if(e.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)==0)n&&(e.setTransform(r.a,r.b,r.c,r.d,r.tx*t.resolution,r.ty*t.resolution),n=!1),i=h.anchor.x*(-l.width*h.scale.x)+h.position.x+.5,o=h.anchor.y*(-l.height*h.scale.y)+h.position.y+.5,s=l.width*h.scale.x,a=l.height*h.scale.y;else{n||(n=!0),h.displayObjectUpdateTransform();var c=h.worldTransform;t.roundPixels?e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution|0,c.ty*t.resolution|0):e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution,c.ty*t.resolution),i=h.anchor.x*-l.width+.5,o=h.anchor.y*-l.height+.5,s=l.width,a=l.height}var d=h._texture.baseTexture.resolution;e.drawImage(h._texture.baseTexture.source,l.x*d,l.y*d,l.width*d,l.height*d,i*t.resolution,o*t.resolution,s*t.resolution,a*t.resolution)}}}},s.prototype.destroy=function(t){if(o.prototype.destroy.call(this,t),this._buffers)for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},n(s,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,i.hex2rgb)(t,this.tintRgb)}}]),s}(a.Container);r.default=o},{"../core":71,"../core/utils":131}],181:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./ParticleContainer");Object.defineProperty(r,"ParticleContainer",{enumerable:!0,get:function(){return n(i).default}});var o=t("./webgl/ParticleRenderer");Object.defineProperty(r,"ParticleRenderer",{enumerable:!0,get:function(){return n(o).default}})},{"./ParticleContainer":180,"./webgl/ParticleRenderer":183}],182:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var f=n(t("pixi-gl-core")),p=n(t("../../core/utils/createIndicesForQuads")),i=function(){function s(t,e,r,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,s),this.gl=t,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<e.length;++i){var o=e[i];o={attribute:o.attribute,size:o.size,uploadFunction:o.uploadFunction,unsignedByte:o.unsignedByte,offset:o.offset},r[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return s.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,p.default)(this.size),this.indexBuffer=f.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW);for(var r=this.dynamicStride=0;r<this.dynamicProperties.length;++r){var n=this.dynamicProperties[r];n.offset=e,e+=n.size,this.dynamicStride+=n.size}var i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=f.default.GLBuffer.createVertexBuffer(t,i,t.STREAM_DRAW);for(var o=0,s=this.staticStride=0;s<this.staticProperties.length;++s){var a=this.staticProperties[s];a.offset=o,o+=a.size,this.staticStride+=a.size}var u=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(u),this.staticDataUint32=new Uint32Array(u),this.staticBuffer=f.default.GLBuffer.createVertexBuffer(t,u,t.STATIC_DRAW),this.vao=new f.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var h=0;h<this.dynamicProperties.length;++h){var l=this.dynamicProperties[h];l.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,l.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*l.offset):this.vao.addAttribute(this.dynamicBuffer,l.attribute,t.FLOAT,!1,4*this.dynamicStride,4*l.offset)}for(var c=0;c<this.staticProperties.length;++c){var d=this.staticProperties[c];d.unsignedByte?this.vao.addAttribute(this.staticBuffer,d.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*d.offset):this.vao.addAttribute(this.staticBuffer,d.attribute,t.FLOAT,!1,4*this.staticStride,4*d.offset)}},s.prototype.uploadDynamic=function(t,e,r){for(var n=0;n<this.dynamicProperties.length;n++){var i=this.dynamicProperties[n];i.uploadFunction(t,e,r,i.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer.upload()},s.prototype.uploadStatic=function(t,e,r){for(var n=0;n<this.staticProperties.length;n++){var i=this.staticProperties[n];i.uploadFunction(t,e,r,i.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer.upload()},s.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},s}();r.default=i},{"../../core/utils/createIndicesForQuads":129,"pixi-gl-core":35}],183:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var g=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),i=n(t("./ParticleShader")),a=n(t("./ParticleBuffer")),c=t("../../core/utils"),o=function(r){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,r.call(this,t));return e.shader=null,e.indexBuffer=null,e.properties=null,e.tempMatrix=new g.Matrix,e.CONTEXT_UID=0,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r),n.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new i.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},n.prototype.start=function(){this.renderer.bindShader(this.shader)},n.prototype.render=function(t){var e=t.children,r=t._maxSize,n=t._batchSize,i=this.renderer,o=e.length;if(0!==o){r<o&&(o=r);var s=t._glBuffers[i.CONTEXT_UID];s||(s=t._glBuffers[i.CONTEXT_UID]=this.generateBuffers(t));var a=e[0]._texture.baseTexture;this.renderer.setBlendMode(g.utils.correctBlendMode(t.blendMode,a.premultipliedAlpha));var u=i.gl,h=t.worldTransform.copy(this.tempMatrix);h.prepend(i._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=h.toArray(!0),this.shader.uniforms.uColor=g.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,a.premultipliedAlpha),this.shader.uniforms.uSampler=i.bindTexture(a);for(var l=!1,c=0,d=0;c<o;c+=n,d+=1){var f=o-c;if(n<f&&(f=n),d>=s.length){if(!t.autoResize)break;s.push(this._generateOneMoreBuffer(t))}var p=s[d];p.uploadDynamic(e,c,f);var m=t._bufferUpdateIDs[c]||0;(l=l||p._updateID<m)&&(p._updateID=t._updateID,p.uploadStatic(e,c,f)),i.bindVao(p.vao),p.vao.draw(u.TRIANGLES,6*f)}}},n.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,r=[],n=t._maxSize,i=t._batchSize,o=t._properties,s=0;s<n;s+=i)r.push(new a.default(e,this.properties,o,i));return r},n.prototype._generateOneMoreBuffer=function(t){var e=this.renderer.gl,r=t._batchSize,n=t._properties;return new a.default(e,this.properties,n,r)},n.prototype.uploadVertices=function(t,e,r,n,i,o){for(var s=0,a=0,u=0,h=0,l=0;l<r;++l){var c=t[e+l],d=c._texture,f=c.scale.x,p=c.scale.y,m=d.trim,g=d.orig;m?(s=(a=m.x-c.anchor.x*g.width)+m.width,u=(h=m.y-c.anchor.y*g.height)+m.height):(s=g.width*(1-c.anchor.x),a=g.width*-c.anchor.x,u=g.height*(1-c.anchor.y),h=g.height*-c.anchor.y),n[o]=a*f,n[o+1]=h*p,n[o+i]=s*f,n[o+i+1]=h*p,n[o+2*i]=s*f,n[o+2*i+1]=u*p,n[o+3*i]=a*f,n[o+3*i+1]=u*p,o+=4*i}},n.prototype.uploadPosition=function(t,e,r,n,i,o){for(var s=0;s<r;s++){var a=t[e+s].position;n[o]=a.x,n[o+1]=a.y,n[o+i]=a.x,n[o+i+1]=a.y,n[o+2*i]=a.x,n[o+2*i+1]=a.y,n[o+3*i]=a.x,n[o+3*i+1]=a.y,o+=4*i}},n.prototype.uploadRotation=function(t,e,r,n,i,o){for(var s=0;s<r;s++){var a=t[e+s].rotation;n[o]=a,n[o+i]=a,n[o+2*i]=a,n[o+3*i]=a,o+=4*i}},n.prototype.uploadUvs=function(t,e,r,n,i,o){for(var s=0;s<r;++s){var a=t[e+s]._texture._uvs;a?(n[o]=a.x0,n[o+1]=a.y0,n[o+i]=a.x1,n[o+i+1]=a.y1,n[o+2*i]=a.x2,n[o+2*i+1]=a.y2,n[o+3*i]=a.x3,n[o+3*i+1]=a.y3):(n[o]=0,n[o+1]=0,n[o+i]=0,n[o+i+1]=0,n[o+2*i]=0,n[o+2*i+1]=0,n[o+3*i]=0,n[o+3*i+1]=0),o+=4*i}},n.prototype.uploadTint=function(t,e,r,n,i,o){for(var s=0;s<r;++s){var a=t[e+s],u=a._texture.baseTexture.premultipliedAlpha,h=a.alpha,l=h<1&&u?(0,c.premultiplyTint)(a._tintRGB,h):a._tintRGB+(255*h<<24);n[o]=l,n[o+i]=l,n[o+2*i]=l,n[o+3*i]=l,o+=4*i}},n.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),r.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},n}(g.ObjectRenderer);r.default=o,g.WebGLRenderer.registerPlugin("particle",o)},{"../../core":71,"../../core/utils":131,"./ParticleBuffer":182,"./ParticleShader":184}],184:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=t("../../core/Shader"),o=function(e){function r(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,e.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,e),r}(((n=i)&&n.__esModule?n:{default:n}).default);r.default=o},{"../../core/Shader":50}],185:[function(t,e,r){"use strict";Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:0<t?1:-1})},{}],186:[function(t,e,r){"use strict";Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t})},{}],187:[function(t,e,r){"use strict";var n,i=t("object-assign"),o=(n=i)&&n.__esModule?n:{default:n};Object.assign||(Object.assign=o.default)},{"object-assign":26}],188:[function(t,e,r){"use strict";t("./Object.assign"),t("./requestAnimationFrame"),t("./Math.sign"),t("./Number.isInteger"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":185,"./Number.isInteger":186,"./Object.assign":187,"./requestAnimationFrame":189}],189:[function(t,e,r){(function(t){"use strict";if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var n=Date.now(),r=["ms","moz","webkit","o"],i=0;i<r.length&&!t.requestAnimationFrame;++i){var o=r[i];t.requestAnimationFrame=t[o+"RequestAnimationFrame"],t.cancelAnimationFrame=t[o+"CancelAnimationFrame"]||t[o+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+n-e;return r<0&&(r=0),n=e,setTimeout(function(){n=Date.now(),t(performance.now())},r)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],190:[function(t,e,r){"use strict";function n(t,e){var r=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof c.Texture){var i=t._textures[n].baseTexture;-1===e.indexOf(i)&&(e.push(i),r=!0)}return r}function i(t,e){return t instanceof c.BaseTexture&&(-1===e.indexOf(t)&&e.push(t),!0)}function o(t,e){if(t._texture&&t._texture instanceof c.Texture){var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function s(t,e){return e instanceof c.Text&&(e.updateText(!0),!0)}function a(t,e){if(e instanceof c.TextStyle){var r=e.toFontString();return c.TextMetrics.measureFont(r),!0}return!1}function u(t,e){if(t instanceof c.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function h(t,e){return t instanceof c.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}r.__esModule=!0;var l,c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),d=t("./limiters/CountLimiter"),f=(l=d)&&l.__esModule?l:{default:l},p=c.ticker.shared;c.settings.UPLOADS_PER_FRAME=4;var m=function(){function r(t){var e=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,r),this.limiter=new f.default(c.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(u),this.registerFindHook(h),this.registerFindHook(n),this.registerFindHook(i),this.registerFindHook(o),this.registerUploadHook(s),this.registerUploadHook(a)}return r.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,p.addOnce(this.tick,this,c.UPDATE_PRIORITY.UTILITY))):e&&e()},r.prototype.tick=function(){setTimeout(this.delayedTick,0)},r.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)p.addOnce(this.tick,this,c.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;for(var i=this.completes.slice(0),o=this.completes.length=0,s=i.length;o<s;o++)i[o]()}},r.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},r.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},r.prototype.add=function(t){for(var e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof c.Container)for(var n=t.children.length-1;0<=n;n--)this.add(t.children[n]);return this},r.prototype.destroy=function(){this.ticking&&p.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},r}();r.default=m},{"../core":71,"./limiters/CountLimiter":193}],191:[function(t,e,r){"use strict";function i(t,e){if(e instanceof o.BaseTexture){var r=e.source,n=0===r.width?t.canvas.width:Math.min(t.canvas.width,r.width),i=0===r.height?t.canvas.height:Math.min(t.canvas.height,r.height);return t.ctx.drawImage(r,0,0,n,i,0,0,t.canvas.width,t.canvas.height),!0}return!1}r.__esModule=!0;var n,o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),s=t("../BasePrepare"),a=(n=s)&&n.__esModule?n:{default:n},u=function(r){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,r.call(this,t));return(e.uploadHookHelper=e).canvas=document.createElement("canvas"),e.canvas.width=16,e.canvas.height=16,e.ctx=e.canvas.getContext("2d"),e.registerUploadHook(i),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r),n.prototype.destroy=function(){r.prototype.destroy.call(this),this.ctx=null,this.canvas=null},n}(a.default);r.default=u,o.CanvasRenderer.registerPlugin("prepare",u)},{"../../core":71,"../BasePrepare":190}],192:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./webgl/WebGLPrepare");Object.defineProperty(r,"webgl",{enumerable:!0,get:function(){return n(i).default}});var o=t("./canvas/CanvasPrepare");Object.defineProperty(r,"canvas",{enumerable:!0,get:function(){return n(o).default}});var s=t("./BasePrepare");Object.defineProperty(r,"BasePrepare",{enumerable:!0,get:function(){return n(s).default}});var a=t("./limiters/CountLimiter");Object.defineProperty(r,"CountLimiter",{enumerable:!0,get:function(){return n(a).default}});var u=t("./limiters/TimeLimiter");Object.defineProperty(r,"TimeLimiter",{enumerable:!0,get:function(){return n(u).default}})},{"./BasePrepare":190,"./canvas/CanvasPrepare":191,"./limiters/CountLimiter":193,"./limiters/TimeLimiter":194,"./webgl/WebGLPrepare":195}],193:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),this.maxItemsPerFrame=t,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return 0<this.itemsLeft--},e}();r.default=n},{}],194:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),this.maxMilliseconds=t,this.frameStart=0}return e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},e}();r.default=n},{}],195:[function(t,e,r){"use strict";function i(t,e){return e instanceof a.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function o(t,e){return e instanceof a.Graphics&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function s(t,e){return t instanceof a.Graphics&&(e.push(t),!0)}r.__esModule=!0;var n,a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),u=t("../BasePrepare"),h=function(r){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,r.call(this,t));return e.uploadHookHelper=e.renderer,e.registerFindHook(s),e.registerUploadHook(i),e.registerUploadHook(o),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r),n}(((n=u)&&n.__esModule?n:{default:n}).default);r.default=h,a.WebGLRenderer.registerPlugin("prepare",h)},{"../../core":71,"../BasePrepare":190}],196:[function(t,e,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function s(){m&&f&&(m=!1,f.length?p=f.concat(p):g=-1,p.length&&a())}function a(){if(!m){var t=o(s);m=!0;for(var e=p.length;e;){for(f=p,p=[];++g<e;)f&&f[g].run();g=-1,e=p.length}f=null,m=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===i||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(t)}}function u(t,e){this.fun=t,this.array=e}function h(){}var l,c,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{c="function"==typeof clearTimeout?clearTimeout:i}catch(t){c=i}}();var f,p=[],m=!1,g=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];p.push(new u(t,e)),1!==p.length||m||o(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=h,d.addListener=h,d.once=h,d.off=h,d.removeListener=h,d.removeAllListeners=h,d.emit=h,d.prependListener=h,d.prependOnceListener=h,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],197:[function(t,R,k){(function(I){!function(t){function v(t){throw new RangeError(m[t])}function i(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function e(t,e){var r=t.split("@"),n="";return 1<r.length&&(n=r[0]+"@",t=r[1]),n+i((t=t.replace(p,".")).split("."),e).join(".")}function y(t){for(var e,r,n=[],i=0,o=t.length;i<o;)55296<=(e=t.charCodeAt(i++))&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function b(t){return i(t,function(t){var e="";return 65535<t&&(e+=M((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+M(t)}).join("")}function x(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,r){var n=0;for(t=r?A(t/c):t>>1,t+=A(t/e);g*S>>1<t;n+=T)t=A(t/g);return A(n+(g+1)*t/(t+l))}function r(t){var e,r,n,i,o,s,a,u,h,l,c,d=[],f=t.length,p=0,m=O,g=C;for((r=t.lastIndexOf(P))<0&&(r=0),n=0;n<r;++n)128<=t.charCodeAt(n)&&v("not-basic"),d.push(t.charCodeAt(n));for(i=0<r?r+1:0;i<f;){for(o=p,s=1,a=T;f<=i&&v("invalid-input"),c=t.charCodeAt(i++),(T<=(u=c-48<10?c-22:c-65<26?c-65:c-97<26?c-97:T)||u>A((_-p)/s))&&v("overflow"),p+=u*s,!(u<(h=a<=g?E:g+S<=a?S:a-g));a+=T)s>A(_/(l=T-h))&&v("overflow"),s*=l;g=w(p-o,e=d.length+1,0==o),A(p/e)>_-m&&v("overflow"),m+=A(p/e),p%=e,d.splice(p++,0,m)}return b(d)}function n(t){var e,r,n,i,o,s,a,u,h,l,c,d,f,p,m,g=[];for(d=(t=y(t)).length,e=O,o=C,s=r=0;s<d;++s)(c=t[s])<128&&g.push(M(c));for(n=i=g.length,i&&g.push(P);n<d;){for(a=_,s=0;s<d;++s)(c=t[s])>=e&&c<a&&(a=c);for(a-e>A((_-r)/(f=n+1))&&v("overflow"),r+=(a-e)*f,e=a,s=0;s<d;++s)if((c=t[s])<e&&++r>_&&v("overflow"),c==e){for(u=r,h=T;!(u<(l=h<=o?E:o+S<=h?S:h-o));h+=T)m=u-l,p=T-l,g.push(M(x(l+m%p,0))),u=A(m/p);g.push(M(x(u,0))),o=w(r,f,n==i),r=0,++n}++r,++e}return g.join("")}var o="object"==typeof k&&k&&!k.nodeType&&k,s="object"==typeof R&&R&&!R.nodeType&&R,a="object"==typeof I&&I;a.global!==a&&a.window!==a&&a.self!==a||(t=a);var u,h,_=2147483647,T=36,E=1,S=26,l=38,c=700,C=72,O=128,P="-",d=/^xn--/,f=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=T-E,A=Math.floor,M=String.fromCharCode;if(u={version:"1.4.1",ucs2:{decode:y,encode:b},decode:r,encode:n,toASCII:function(t){return e(t,function(t){return f.test(t)?"xn--"+n(t):t})},toUnicode:function(t){return e(t,function(t){return d.test(t)?r(t.slice(4).toLowerCase()):t})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return u});else if(o&&s)if(R.exports==o)s.exports=u;else for(h in u)u.hasOwnProperty(h)&&(o[h]=u[h]);else t.punycode=u}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],198:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){e=e||"&",r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var a,u,h=t.length;0<s&&s<h&&(h=s);for(var l=0;l<h;++l){var c,d,f,p,m=t[l].replace(o,"%20"),g=m.indexOf(r);0<=g?(c=m.substr(0,g),d=m.substr(g+1)):(c=m,d=""),f=decodeURIComponent(c),p=decodeURIComponent(d),a=i,u=f,Object.prototype.hasOwnProperty.call(a,u)?v(i[f])?i[f].push(p):i[f]=[i[f],p]:i[f]=p}return i};var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],199:[function(t,e,r){"use strict";function o(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var s=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(r,n,i,t){return n=n||"&",i=i||"=",null===r&&(r=void 0),"object"==typeof r?o(u(r),function(t){var e=encodeURIComponent(s(t))+i;return a(r[t])?o(r[t],function(t){return e+encodeURIComponent(s(t))}).join(n):e+encodeURIComponent(s(r[t]))}).join(n):t?encodeURIComponent(s(t))+i+encodeURIComponent(s(r)):""};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},u=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],200:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":198,"./encode":199}],201:[function(t,e,r){"use strict";e.exports=function(t,e,r){var n,i=t.length;if(!(i<=e||0===r)){var o=i-(r=i<e+r?i-e:r);for(n=e;n<o;++n)t[n]=t[n+r];t.length=o}}},{}],202:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),o=n(t("mini-signals")),s=n(t("parse-uri")),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("./async")),c=n(t("./Resource")),u=/(#[\w-]+)?$/,h=function(){function n(){var r=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=a.queue(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new o.default,this.onError=new o.default,this.onLoad=new o.default,this.onStart=new o.default,this.onComplete=new o.default}return n.prototype.add=function(t,e,r,n){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"===(void 0===t?"undefined":l(t))&&(n=e||t.callback||t.onComplete,e=(r=t).url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(n=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new c.default(t,e,r),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var o=r.parentResource,s=[],a=0;a<o.children.length;++a)o.children[a].isComplete||s.push(o.children[a]);var u=o.progressChunk*(s.length+1)/(s.length+2);o.children.push(this.resources[t]),o.progressChunk=u;for(var h=0;h<s.length;++h)s[h].progressChunk=u;this.resources[t].progressChunk=u}return this._queue.push(this.resources[t]),this},n.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},n.prototype.use=function(t){return this._afterMiddleware.push(t),this},n.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},n.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},n.prototype._prepareUrl=function(t){var e=(0,s.default)(t,{strictMode:!0}),r=void 0;if(r=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=u.exec(r)[0];-1!==(r=r.substr(0,r.length-n.length)).indexOf("?")?r+="&"+this.defaultQueryString:r+="?"+this.defaultQueryString,r+=n}return r},n.prototype._loadResource=function(r,t){var n=this;r._dequeue=t,a.eachSeries(this._beforeMiddleware,function(t,e){t.call(n,r,function(){e(r.isComplete?{}:null)})},function(){r.isComplete?n._onLoad(r):(r._onLoadBinding=r.onComplete.once(n._onLoad,n),r.load())},!0)},n.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},n.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},n.prototype._onLoad=function(r){var n=this;r._onLoadBinding=null,this._resourcesParsing.push(r),r._dequeue(),a.eachSeries(this._afterMiddleware,function(t,e){t.call(n,r,e)},function(){r.onAfterMiddleware.dispatch(r),n.progress+=r.progressChunk,n.onProgress.dispatch(n,r),r.error?n.onError.dispatch(r.error,n,r):n.onLoad.dispatch(n,r),n._resourcesParsing.splice(n._resourcesParsing.indexOf(r),1),n._queue.idle()&&0===n._resourcesParsing.length&&n._onComplete()},!0)},i(n,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),n}();r.default=h},{"./Resource":203,"./async":204,"mini-signals":25,"parse-uri":27}],203:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(){}function s(t,e,r){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=r)}function a(t){return t.toString().replace("object ","")}r.__esModule=!0;var u=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),h=n(t("parse-uri")),l=n(t("mini-signals")),c=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),d=null,o=function(){function o(t,e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(o.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:")),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=o.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=i,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new l.default,this.onProgress=new l.default,this.onComplete=new l.default,this.onAfterMiddleware=new l.default}return o.setExtensionLoadType=function(t,e){s(o._loadTypeMap,t,e)},o.setExtensionXhrType=function(t,e){s(o._xhrTypeMap,t,e)},o.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(o.STATUS_FLAGS.COMPLETE,!0),this._setFlag(o.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},o.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=o.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},o.prototype.load=function(t){var e=this;if(!this.isLoading){if(this.isComplete)return void(t&&setTimeout(function(){return t(e)},1));switch(t&&this.onComplete.once(t),this._setFlag(o.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case o.LOAD_TYPE.IMAGE:this.type=o.TYPE.IMAGE,this._loadElement("image");break;case o.LOAD_TYPE.AUDIO:this.type=o.TYPE.AUDIO,this._loadSourceElement("audio");break;case o.LOAD_TYPE.VIDEO:this.type=o.TYPE.VIDEO,this._loadSourceElement("video");break;case o.LOAD_TYPE.XHR:default:c&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},o.prototype._hasFlag=function(t){return!!(this._flags&t)},o.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},o.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},o.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(t,this.url[r],Array.isArray(e)?e[r]:e));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()}else this.abort("Unsupported element: "+t)},o.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===o.XHR_RESPONSE_TYPE.JSON||this.xhrType===o.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=o.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},o.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},o.prototype._createSource=function(t,e,r){r||(r=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=r,n},o.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},o.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},o.prototype._xhrOnError=function(){var t=this.xhr;this.abort(a(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},o.prototype._xhrOnAbort=function(){this.abort(a(this.xhr)+" Request was aborted by the user.")},o.prototype._xdrOnTimeout=function(){this.abort(a(this.xhr)+" Request timed out.")},o.prototype._xhrOnLoad=function(){var t=this.xhr,e="",r=void 0===t.status?200:t.status;if(""!==t.responseType&&"text"!==t.responseType&&void 0!==t.responseType||(e=t.responseText),0===r&&(0<e.length||t.responseType===o.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2==(r/100|0)){if(this.xhrType===o.XHR_RESPONSE_TYPE.TEXT)this.data=e,this.type=o.TYPE.TEXT;else if(this.xhrType===o.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e),this.type=o.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===o.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(e,"text/xml")}else{var i=document.createElement("div");i.innerHTML=e,this.data=i}this.type=o.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=t.response||e;this.complete()}else this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL)},o.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,d||(d=document.createElement("a")),d.href=t;var r=!(t=(0,h.default)(d.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&r&&n===e.protocol?"":"anonymous"},o.prototype._determineXhrType=function(){return o._xhrTypeMap[this.extension]||o.XHR_RESPONSE_TYPE.TEXT},o.prototype._determineLoadType=function(){return o._loadTypeMap[this.extension]||o.LOAD_TYPE.XHR},o.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var r=t.indexOf("/");e=t.substring(r+1,t.indexOf(";",r))}else{var n=t.indexOf("?"),i=t.indexOf("#"),o=Math.min(-1<n?n:t.length,-1<i?i:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},o.prototype._getMimeFromXhrType=function(t){switch(t){case o.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case o.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case o.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case o.XHR_RESPONSE_TYPE.JSON:return"application/json";case o.XHR_RESPONSE_TYPE.DEFAULT:case o.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},u(o,[{key:"isDataUrl",get:function(){return this._hasFlag(o.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(o.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(o.STATUS_FLAGS.LOADING)}}]),o}();(r.default=o).STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},o.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},o.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},o.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},o._loadTypeMap={gif:o.LOAD_TYPE.IMAGE,png:o.LOAD_TYPE.IMAGE,bmp:o.LOAD_TYPE.IMAGE,jpg:o.LOAD_TYPE.IMAGE,jpeg:o.LOAD_TYPE.IMAGE,tif:o.LOAD_TYPE.IMAGE,tiff:o.LOAD_TYPE.IMAGE,webp:o.LOAD_TYPE.IMAGE,tga:o.LOAD_TYPE.IMAGE,svg:o.LOAD_TYPE.IMAGE,"svg+xml":o.LOAD_TYPE.IMAGE,mp3:o.LOAD_TYPE.AUDIO,ogg:o.LOAD_TYPE.AUDIO,wav:o.LOAD_TYPE.AUDIO,mp4:o.LOAD_TYPE.VIDEO,webm:o.LOAD_TYPE.VIDEO},o._xhrTypeMap={xhtml:o.XHR_RESPONSE_TYPE.DOCUMENT,html:o.XHR_RESPONSE_TYPE.DOCUMENT,htm:o.XHR_RESPONSE_TYPE.DOCUMENT,xml:o.XHR_RESPONSE_TYPE.DOCUMENT,tmx:o.XHR_RESPONSE_TYPE.DOCUMENT,svg:o.XHR_RESPONSE_TYPE.DOCUMENT,tsx:o.XHR_RESPONSE_TYPE.DOCUMENT,gif:o.XHR_RESPONSE_TYPE.BLOB,png:o.XHR_RESPONSE_TYPE.BLOB,bmp:o.XHR_RESPONSE_TYPE.BLOB,jpg:o.XHR_RESPONSE_TYPE.BLOB,jpeg:o.XHR_RESPONSE_TYPE.BLOB,tif:o.XHR_RESPONSE_TYPE.BLOB,tiff:o.XHR_RESPONSE_TYPE.BLOB,webp:o.XHR_RESPONSE_TYPE.BLOB,tga:o.XHR_RESPONSE_TYPE.BLOB,json:o.XHR_RESPONSE_TYPE.JSON,text:o.XHR_RESPONSE_TYPE.TEXT,txt:o.XHR_RESPONSE_TYPE.TEXT,ttf:o.XHR_RESPONSE_TYPE.BUFFER,otf:o.XHR_RESPONSE_TYPE.BUFFER},o.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":25,"parse-uri":27}],204:[function(t,e,r){"use strict";function s(){}function a(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}r.__esModule=!0,r.eachSeries=function(r,n,i,o){var s=0,a=r.length;!function t(e){e||s===a?i&&i(e):o?setTimeout(function(){n(r[s++],t)},1):n(r[s++],t)}()},r.queue=function(e,t){function r(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(o.started=!0,null==t&&o.idle())setTimeout(function(){return o.drain()},1);else{var n={data:t,callback:"function"==typeof r?r:s};e?o._tasks.unshift(n):o._tasks.push(n),setTimeout(function(){return o.process()},1)}}function n(t){return function(){i-=1,t.callback.apply(t,arguments),null!=arguments[0]&&o.error(arguments[0],t.data),i<=o.concurrency-o.buffer&&o.unsaturated(),o.idle()&&o.drain(),o.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var i=0,o={_tasks:[],concurrency:t,saturated:s,unsaturated:s,buffer:t/4,empty:s,drain:s,error:s,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){i=0,o.drain=s,o.started=!1,o._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!o.paused&&i<o.concurrency&&o._tasks.length;){var t=o._tasks.shift();0===o._tasks.length&&o.empty(),(i+=1)===o.concurrency&&o.saturated(),e(t.data,a(n(t)))}},length:function(){return o._tasks.length},running:function(){return i},idle:function(){return o._tasks.length+i===0},pause:function(){!0!==o.paused&&(o.paused=!0)},resume:function(){if(!1!==o.paused){o.paused=!1;for(var t=1;t<=o.concurrency;t++)o.process()}}};return o}},{}],205:[function(t,e,r){"use strict";r.__esModule=!0,r.encodeBinary=function(t){for(var e="",r=0;r<t.length;){for(var n=[0,0,0],i=[0,0,0,0],o=0;o<n.length;++o)r<t.length?n[o]=255&t.charCodeAt(r++):n[o]=0;switch(i[0]=n[0]>>2,i[1]=(3&n[0])<<4|n[1]>>4,i[2]=(15&n[1])<<2|n[2]>>6,i[3]=63&n[2],r-(t.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(var s=0;s<i.length;++s)e+=a.charAt(i[s])}return e};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},{}],206:[function(t,e,r){"use strict";var n=t("./Loader").default,i=t("./Resource").default,o=t("./async"),s=t("./b64");n.Resource=i,n.async=o,n.base64=s,e.exports=n,e.exports.default=n},{"./Loader":202,"./Resource":203,"./async":204,"./b64":205}],207:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.blobMiddlewareFactory=function(){return function(t,e){if(t.data){if(t.xhr&&t.xhrType===s.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var r=(i=u.createObjectURL(t.data),t.blob=t.data,t.data=new Image,t.data.src=i,t.type=s.default.TYPE.IMAGE,t.data.onload=function(){u.revokeObjectURL(i),t.data.onload=null,e()},{v:void 0});if("object"===(void 0===r?"undefined":o(r)))return r.v}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+a.default.encodeBinary(t.xhr.responseText),t.type=s.default.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}var i;e()}else e()}};var s=n(t("../../Resource")),a=n(t("../../b64")),u=window.URL||window.webkitURL},{"../../Resource":203,"../../b64":205}],208:[function(t,e,r){var n;n="function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},e.exports=n},{}],209:[function(t,e,r){"use strict";function O(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function n(t,e,r){if(t&&D.isObject(t)&&t instanceof O)return t;var n=new O;return n.parse(t,e,r),n}var k=t("punycode"),D=t("./util");r.parse=n,r.resolve=function(t,e){return n(t,!1,!0).resolve(e)},r.resolveObject=function(t,e){return t?n(t,!1,!0).resolveObject(e):e},r.format=function(t){return D.isString(t)&&(t=n(t)),t instanceof O?t.format():O.prototype.format.call(t)},r.Url=O;var L=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,B=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,o=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),F=["'"].concat(o),N=["%","/","?",";","#"].concat(F),j=["/","?","#"],U=/^[+a-z0-9A-Z_-]{0,63}$/,q=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,W={javascript:!0,"javascript:":!0},X={javascript:!0,"javascript:":!0},H={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},z=t("querystring");O.prototype.parse=function(t,e,r){if(!D.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=-1!==n&&n<t.indexOf("#")?"?":"#",o=t.split(i);o[0]=o[0].replace(/\\/g,"/");var s=t=o.join(i);if(s=s.trim(),!r&&1===t.split("#").length){var a=B.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?z.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=L.exec(s);if(u){var h=(u=u[0]).toLowerCase();this.protocol=h,s=s.substr(u.length)}if(r||u||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===s.substr(0,2);!l||u&&X[u]||(s=s.substr(2),this.slashes=!0)}if(!X[u]&&(l||u&&!H[u])){for(var c=-1,d=0;d<j.length;d++){-1!==(m=s.indexOf(j[d]))&&(-1===c||m<c)&&(c=m)}var f,p;-1!==(p=-1===c?s.lastIndexOf("@"):s.lastIndexOf("@",c))&&(f=s.slice(0,p),s=s.slice(p+1),this.auth=decodeURIComponent(f)),c=-1;for(d=0;d<N.length;d++){var m;-1!==(m=s.indexOf(N[d]))&&(-1===c||m<c)&&(c=m)}-1===c&&(c=s.length),this.host=s.slice(0,c),s=s.slice(c),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var v=this.hostname.split(/\./),y=(d=0,v.length);d<y;d++){var b=v[d];if(b&&!b.match(U)){for(var x="",w=0,_=b.length;w<_;w++)127<b.charCodeAt(w)?x+="x":x+=b[w];if(!x.match(U)){var T=v.slice(0,d),E=v.slice(d+1),S=b.match(q);S&&(T.push(S[1]),E.unshift(S[2])),E.length&&(s="/"+E.join(".")+s),this.hostname=T.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=k.toASCII(this.hostname));var C=this.port?":"+this.port:"",O=this.hostname||"";this.host=O+C,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!W[h])for(d=0,y=F.length;d<y;d++){var P=F[d];if(-1!==s.indexOf(P)){var A=encodeURIComponent(P);A===P&&(A=escape(P)),s=s.split(P).join(A)}}var M=s.indexOf("#");-1!==M&&(this.hash=s.substr(M),s=s.slice(0,M));var I=s.indexOf("?");if(-1!==I?(this.search=s.substr(I),this.query=s.substr(I+1),e&&(this.query=z.parse(this.query)),s=s.slice(0,I)):e&&(this.search="",this.query={}),s&&(this.pathname=s),H[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){C=this.pathname||"";var R=this.search||"";this.path=C+R}return this.href=this.format(),this},O.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&D.isObject(this.query)&&Object.keys(this.query).length&&(o=z.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||H[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),e+i+(r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+n},O.prototype.resolve=function(t){return this.resolveObject(n(t,!1,!0)).format()},O.prototype.resolveObject=function(t){if(D.isString(t)){var e=new O;e.parse(t,!1,!0),t=e}for(var r=new O,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),a=0;a<s.length;a++){var u=s[a];"protocol"!==u&&(r[u]=t[u])}return H[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!H[t.protocol]){for(var h=Object.keys(t),l=0;l<h.length;l++){var c=h[l];r[c]=t[c]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||X[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var f=r.pathname||"",p=r.search||"";r.path=f+p}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),v=g||m||r.host&&t.pathname,y=v,b=r.pathname&&r.pathname.split("/")||[],x=(d=t.pathname&&t.pathname.split("/")||[],r.protocol&&!H[r.protocol]);if(x&&(r.hostname="",r.port=null,r.host&&(""===b[0]?b[0]=r.host:b.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),v=v&&(""===d[0]||""===b[0])),g)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,b=d;else if(d.length)b||(b=[]),b.pop(),b=b.concat(d),r.search=t.search,r.query=t.query;else if(!D.isNullOrUndefined(t.search)){if(x)r.hostname=r.host=b.shift(),(S=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=S.shift(),r.host=r.hostname=S.shift());return r.search=t.search,r.query=t.query,D.isNull(r.pathname)&&D.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!b.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var w=b.slice(-1)[0],_=(r.host||t.host||1<b.length)&&("."===w||".."===w)||""===w,T=0,E=b.length;0<=E;E--)"."===(w=b[E])?b.splice(E,1):".."===w?(b.splice(E,1),T++):T&&(b.splice(E,1),T--);if(!v&&!y)for(;T--;T)b.unshift("..");!v||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),_&&"/"!==b.join("/").substr(-1)&&b.push("");var S,C=""===b[0]||b[0]&&"/"===b[0].charAt(0);x&&(r.hostname=r.host=C?"":b.length?b.shift():"",(S=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=S.shift(),r.host=r.hostname=S.shift()));return(v=v||r.host&&b.length)&&!C&&b.unshift(""),b.length?r.pathname=b.join("/"):(r.pathname=null,r.path=null),D.isNull(r.pathname)&&D.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},O.prototype.parseHost=function(){var t=this.host,e=i.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":210,punycode:197,querystring:200}],210:[function(t,e,r){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}]},{},[8]);